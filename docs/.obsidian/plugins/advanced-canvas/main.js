/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AdvancedCanvasPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/utils/patch-helper.ts
var PatchHelper = class {
  static tryPatchWorkspacePrototype(plugin, getTarget, functions) {
    return new Promise((resolve) => {
      const tryPatch = () => {
        const target = getTarget();
        if (!target)
          return null;
        const uninstaller = around(target.constructor.prototype, functions);
        plugin.register(uninstaller);
        return target;
      };
      const result = tryPatch();
      if (result) {
        resolve(result);
        return;
      }
      const listener = plugin.app.workspace.on("layout-change", () => {
        const result2 = tryPatch();
        if (result2) {
          plugin.app.workspace.offref(listener);
          resolve(result2);
        }
      });
      plugin.registerEvent(listener);
    });
  }
  static patchObjectPrototype(plugin, target, functions) {
    const uninstaller = around(target.constructor.prototype, functions);
    plugin.register(uninstaller);
  }
  static patchObjectInstance(plugin, target, functions) {
    const uninstaller = around(target, functions);
    plugin.register(uninstaller);
  }
};

// src/core/events.ts
var PLUGIN_EVENT_PREFIX = "advanced-canvas";
var CanvasEvent = {
  CanvasChanged: `${PLUGIN_EVENT_PREFIX}:canvas-changed`,
  ViewportChanged: {
    Before: `${PLUGIN_EVENT_PREFIX}:viewport-changed:before`,
    After: `${PLUGIN_EVENT_PREFIX}:viewport-changed:after`
  },
  NodeMoved: `${PLUGIN_EVENT_PREFIX}:node-moved`,
  DoubleClick: `${PLUGIN_EVENT_PREFIX}:double-click`,
  DraggingStateChanged: `${PLUGIN_EVENT_PREFIX}:dragging-state-changed`,
  NodeCreated: `${PLUGIN_EVENT_PREFIX}:node-created`,
  EdgeCreated: `${PLUGIN_EVENT_PREFIX}:edge-created`,
  NodeAdded: `${PLUGIN_EVENT_PREFIX}:node-added`,
  EdgeAdded: `${PLUGIN_EVENT_PREFIX}:edge-added`,
  NodeRemoved: `${PLUGIN_EVENT_PREFIX}:node-removed`,
  EdgeRemoved: `${PLUGIN_EVENT_PREFIX}:edge-removed`,
  NodeChanged: `${PLUGIN_EVENT_PREFIX}:node-changed`,
  EdgeChanged: `${PLUGIN_EVENT_PREFIX}:edge-changed`,
  NodeBBoxRequested: `${PLUGIN_EVENT_PREFIX}:node-bbox-requested`,
  EdgeCenterRequested: `${PLUGIN_EVENT_PREFIX}:edge-center-requested`,
  ContainingNodesRequested: `${PLUGIN_EVENT_PREFIX}:containing-nodes-requested`,
  SelectionChanged: `${PLUGIN_EVENT_PREFIX}:selection-changed`,
  ZoomToBbox: {
    Before: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:before`,
    After: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:after`
  },
  PopupMenuCreated: `${PLUGIN_EVENT_PREFIX}:popup-menu-created`,
  NodeInteraction: `${PLUGIN_EVENT_PREFIX}:node-interaction`,
  Undo: `${PLUGIN_EVENT_PREFIX}:undo`,
  Redo: `${PLUGIN_EVENT_PREFIX}:redo`,
  ReadonlyChanged: `${PLUGIN_EVENT_PREFIX}:readonly-changed`,
  DataRequested: `${PLUGIN_EVENT_PREFIX}:data-requested`,
  LoadData: `${PLUGIN_EVENT_PREFIX}:load-data`,
  CanvasSaved: {
    Before: `${PLUGIN_EVENT_PREFIX}:canvas-saved:before`,
    After: `${PLUGIN_EVENT_PREFIX}:canvas-saved:after`
  }
};

// node_modules/tiny-jsonc/dist/index.js
var stringOrCommentRe = /("(?:\\?[^])*?")|(\/\/.*)|(\/\*[^]*?\*\/)/g;
var stringOrTrailingCommaRe = /("(?:\\?[^])*?")|(,\s*)(?=]|})/g;
var JSONC = {
  parse: (text) => {
    text = String(text);
    try {
      return JSON.parse(text);
    } catch (e) {
      return JSON.parse(text.replace(stringOrCommentRe, "$1").replace(stringOrTrailingCommaRe, "$1"));
    }
  }
};
var dist_default = JSONC;

// src/core/canvas-patcher.ts
var CanvasPatcher = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.applyPatches();
  }
  async applyPatches() {
    var _a, _b, _c;
    const that = this;
    const canvasView = (_c = (_b = (_a = this.plugin.app.workspace.getLeavesOfType("canvas")) == null ? void 0 : _a.first()) == null ? void 0 : _b.view) != null ? _c : await new Promise((resolve) => {
      const uninstall = around(this.plugin.app.internalPlugins.plugins.canvas.views, {
        canvas: (next) => function(...args) {
          const result = next.call(this, ...args);
          resolve(result);
          uninstall();
          return result;
        }
      });
      this.plugin.register(uninstall);
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView, {
      getViewData: (_next) => function(..._args) {
        var _a2;
        const canvasData = this.canvas.getData();
        canvasData.metadata = (_a2 = this.canvas.metadata) != null ? _a2 : {};
        return JSON.stringify(canvasData, null, 2);
      },
      setViewData: (next) => function(json, ...args) {
        let validJson = json !== "" ? json : "{}";
        let parsedJson;
        try {
          parsedJson = JSON.parse(validJson);
        } catch (e) {
          that.plugin.createFileSnapshot(this.file.path, json);
          parsedJson = dist_default.parse(validJson);
          validJson = JSON.stringify(parsedJson, null, 2);
        }
        const result = next.call(this, validJson, ...args);
        try {
          this.canvas.metadata = parsedJson.metadata;
        } catch (_e) {
          this.canvas.metadata = {};
        }
        that.triggerWorkspaceEvent(CanvasEvent.CanvasChanged, this.canvas);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas, {
      markViewportChanged: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.After, this);
        return result;
      },
      markMoved: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeMoved, this, node);
        return result;
      },
      onDoubleClick: (next) => function(event) {
        const preventDefault = { value: false };
        that.triggerWorkspaceEvent(CanvasEvent.DoubleClick, this, event, preventDefault);
        if (!preventDefault.value)
          next.call(this, event);
      },
      setDragging: (next) => function(dragging) {
        const result = next.call(this, dragging);
        that.triggerWorkspaceEvent(CanvasEvent.DraggingStateChanged, this, dragging);
        return result;
      },
      getContainingNodes: (next) => function(bbox) {
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ContainingNodesRequested, this, bbox, result);
        return result;
      },
      updateSelection: (next) => function(update) {
        const oldSelection = new Set(this.selection);
        const result = next.call(this, update);
        that.triggerWorkspaceEvent(CanvasEvent.SelectionChanged, this, oldSelection, (update2) => next.call(this, update2));
        return result;
      },
      createTextNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNodes: (next) => function(...args) {
        const nodes = next.call(this, ...args);
        nodes.forEach((node) => that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node));
        return nodes;
      },
      createGroupNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createLinkNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      addNode: (next) => function(node) {
        that.patchNode(node);
        return next.call(this, node);
      },
      addEdge: (next) => function(edge) {
        that.patchEdge(edge);
        if (!this.viewportChanged)
          that.triggerWorkspaceEvent(CanvasEvent.EdgeCreated, this, edge);
        return next.call(this, edge);
      },
      removeNode: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeRemoved, this, node);
        return result;
      },
      removeEdge: (next) => function(edge) {
        const result = next.call(this, edge);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeRemoved, this, edge);
        return result;
      },
      zoomToBbox: (next) => function(bbox) {
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.Before, this, bbox);
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.After, this, bbox);
        return result;
      },
      setReadonly: (next) => function(readonly) {
        const result = next.call(this, readonly);
        that.triggerWorkspaceEvent(CanvasEvent.ReadonlyChanged, this, readonly);
        return result;
      },
      undo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Undo, this);
        return result;
      },
      redo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Redo, this);
        return result;
      },
      /*setData: (next: any) => function (...args: any) {
        //
        const result = next.call(this, ...args)
        //
        return result
      },*/
      getData: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.DataRequested, this, result);
        return result;
      },
      importData: (next) => function(data, clearCanvas, silent) {
        const targetFilePath = this.view.file.path;
        const setData = (data2) => {
          if (!this.view.file || this.view.file.path !== targetFilePath)
            return;
          this.importData(data2, true, true);
          that.emitEventsForUnknownDataChanges(this);
        };
        if (!silent)
          that.triggerWorkspaceEvent(CanvasEvent.LoadData, this, data, setData);
        const result = next.call(this, data, clearCanvas);
        that.emitEventsForUnknownDataChanges(this);
        return result;
      },
      requestSave: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.After, this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.menu, {
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.PopupMenuCreated, this.canvas);
        next.call(this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.nodeInteractionLayer, {
      setTarget: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeInteraction, this.canvas, node);
        return result;
      }
    });
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.view.getViewType() !== "canvas")
        return;
      const canvasView2 = leaf.view;
      canvasView2.leaf.rebuildView();
    });
  }
  patchNode(node) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, node, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (node.initialized && !node.isDirty) {
          node.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.NodeChanged, this.canvas, node);
          delete node.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      getBBox: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeBBoxRequested, this.canvas, node, result);
        return result;
      }
    });
    this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeAdded, node.canvas, node);
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    });
  }
  patchEdge(edge) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, edge, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (edge.initialized && !edge.isDirty) {
          edge.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
          delete edge.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
        return result;
      },
      getCenter: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeCenterRequested, this.canvas, edge, result);
        return result;
      }
    });
    this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeAdded, edge.canvas, edge);
    });
  }
  runAfterInitialized(canvasElement, onReady) {
    if (canvasElement.initialized) {
      onReady();
      return;
    }
    const that = this;
    const uninstall = around(canvasElement, {
      initialize: (next) => function(...args) {
        const result = next.call(this, ...args);
        onReady();
        uninstall();
        return result;
      }
    });
    that.plugin.register(uninstall);
  }
  emitEventsForUnknownDataChanges(canvas) {
    canvas.nodes.forEach((node) => this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    }));
    canvas.edges.forEach((edge) => this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, edge.canvas, edge);
    }));
  }
  triggerWorkspaceEvent(event, ...args) {
    this.plugin.app.workspace.trigger(event, ...args);
  }
};

// src/utils/icons-helper.ts
var import_obsidian = require("obsidian");
var CUSTOM_ICONS = {
  "shape-pill": `<rect rx="31.25" height="62.5" width="93.75" y="18.75" x="3.125" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-parallelogram": `<rect transform="skewX(-20)" rx="5" height="50" width="70" y="25" x="35" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-predefined-process": `
    <g stroke-width="2" stroke="currentColor" fill="none" transform="matrix(4.166667,0,0,4.166667,0,0)">
      <path d="M 4.999687 3 L 19.000312 3 C 20.104688 3 21 3.895312 21 4.999687 L 21 19.000312 C 21 20.104688 20.104688 21 19.000312 21 L 4.999687 21 C 3.895312 21 3 20.104688 3 19.000312 L 3 4.999687 C 3 3.895312 3.895312 3 4.999687 3 Z M 4.999687 3 "/>
      <path d="M 7 3 L 7 21 "/>
      <path d="M 17 3 L 17 21 "/>
    </g>
  `,
  "shape-document": `<path transform="translate(0, 5)" stroke="currentColor" fill="none" stroke-width="8.333" d="M83.75 25C85.82 25 87.5 26.68 87.5 28.75L87.5 64.375Q68.75 54.25 50 64.375 31.25 74.5 12.5 64.375L12.5 30.625 12.5 28.75C12.5 26.68 14.18 25 16.25 25Z"/>`,
  "shape-database": `
    <g transform="translate(20, 20)" stroke-width="8.333" stroke="currentColor" fill="none">
      <path d="M 1 51 L 1 11 C 1 5.48 14.43 1 31 1 C 47.57 1 61 5.48 61 11 L 61 51 C 61 56.52 47.57 61 31 61 C 14.43 61 1 56.52 1 51 Z"/>
      <path d="M 1 11 C 1 16.52 14.43 21 31 21 C 47.57 21 61 16.52 61 11"/>
    </g>
  `,
  "border-solid": `<path stroke="currentColor" fill="none" stroke-width="8.333" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="13.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="8.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "path-solid": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="8.8" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-short-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="15" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-long-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="23" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "arrow-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-triangle-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-thin-triangle": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90"/>`,
  "arrow-halved-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 50 L 85 50 L 15 90 Z"/>`,
  "arrow-diamond": `<path stroke="currentColor" fill="currentColor" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-diamond-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-circle": `<circle stroke="currentColor" fill="currentColor" cx="50" cy="50" r="45"/>`,
  "arrow-circle-outline": `<circle stroke="currentColor" stroke-width="8.5" fill="none" cx="50" cy="50" r="45"/>`,
  "pathfinding-method-bezier": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "pathfinding-method-square": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M72.9167 79.1667 72.9167 50 27.0833 50 27.0833 20.8333"/>`
};
var IconsHelper = class {
  static addIcons() {
    for (const [id, svg] of Object.entries(CUSTOM_ICONS)) {
      (0, import_obsidian.addIcon)(id, svg);
    }
  }
};

// src/utils/debug-helper.ts
var DebugHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (_canvas, _node) => console.count("\u{1F7E2} NodeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, _node) => console.count("\u{1F7E1} NodeChanged")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeAdded,
      (_canvas, _edge) => console.count("\u{1F7E2} EdgeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, _edge) => console.count("\u{1F7E1} EdgeChanged")
    ));
  }
};

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/canvas-extensions/advanced-styles/style-config.ts
var BUILTIN_NODE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "textAlign",
    label: "Text Alignment",
    nodeTypes: ["text"],
    options: [
      {
        icon: "align-left",
        label: "Left (default)",
        value: null
      },
      {
        icon: "align-center",
        label: "Center",
        value: "center"
      },
      {
        icon: "align-right",
        label: "Right",
        value: "right"
      }
    ]
  },
  {
    datasetKey: "shape",
    label: "Shape",
    nodeTypes: ["text"],
    options: [
      {
        icon: "rectangle-horizontal",
        label: "Round Rectangle (default)",
        value: null
      },
      {
        icon: "shape-pill",
        label: "Pill",
        value: "pill"
      },
      {
        icon: "diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "shape-parallelogram",
        label: "Parallelogram",
        value: "parallelogram"
      },
      {
        icon: "circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "shape-predefined-process",
        label: "Predefined Process",
        value: "predefined-process"
      },
      {
        icon: "shape-document",
        label: "Document",
        value: "document"
      },
      {
        icon: "shape-database",
        label: "Database",
        value: "database"
      }
    ]
  },
  {
    datasetKey: "border",
    label: "Border",
    options: [
      {
        icon: "border-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "border-dashed",
        label: "Dashed",
        value: "dashed"
      },
      {
        icon: "border-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "eye-off",
        label: "Invisible",
        value: "invisible"
      }
    ]
  }
];
var BUILTIN_EDGE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "path",
    label: "Path Style",
    options: [
      {
        icon: "path-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "path-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "path-short-dashed",
        label: "Short Dashed",
        value: "short-dashed"
      },
      {
        icon: "path-long-dashed",
        label: "Long Dashed",
        value: "long-dashed"
      }
    ]
  },
  {
    datasetKey: "arrow",
    label: "Arrow Style",
    options: [
      {
        icon: "arrow-triangle",
        label: "Triangle (default)",
        value: null
      },
      {
        icon: "arrow-triangle-outline",
        label: "Triangle Outline",
        value: "triangle-outline"
      },
      {
        icon: "arrow-thin-triangle",
        label: "Thin Triangle",
        value: "thin-triangle"
      },
      {
        icon: "arrow-halved-triangle",
        label: "Halved Triangle",
        value: "halved-triangle"
      },
      {
        icon: "arrow-diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "arrow-diamond-outline",
        label: "Diamond Outline",
        value: "diamond-outline"
      },
      {
        icon: "arrow-circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "arrow-circle-outline",
        label: "Circle Outline",
        value: "circle-outline"
      }
    ]
  },
  {
    datasetKey: "pathfindingMethod",
    label: "Pathfinding Method",
    options: [
      {
        icon: "pathfinding-method-bezier",
        label: "Bezier (default)",
        value: null
      },
      {
        icon: "slash",
        label: "Direct",
        value: "direct"
      },
      {
        icon: "pathfinding-method-square",
        label: "Square",
        value: "square"
      },
      {
        icon: "map",
        label: "A*",
        value: "a-star"
      }
    ]
  }
];

// src/settings.ts
var NODE_TYPES_ON_DOUBLE_CLICK = {
  "text": "Text",
  "file": "File"
};
var DEFAULT_SETTINGS = {
  nodeTypeOnDoubleClick: Object.keys(NODE_TYPES_ON_DOUBLE_CLICK).first(),
  alignDoubleClickedNodeToGrid: true,
  defaultTextNodeWidth: 260,
  defaultTextNodeHeight: 60,
  defaultFileNodeWidth: 400,
  defaultFileNodeHeight: 400,
  performanceOptimizationEnabled: false,
  nodeStylingFeatureEnabled: true,
  customNodeStyleAttributes: [],
  defaultTextNodeStyleAttributes: {},
  edgesStylingFeatureEnabled: true,
  customEdgeStyleAttributes: [],
  defaultEdgeStyleAttributes: {},
  edgeStyleDirectRotateArrow: false,
  edgeStylePathfinderGridResolution: 10,
  edgeStylePathfinderPathLiveUpdate: true,
  edgeStylePathfinderPathRounded: true,
  commandsFeatureEnabled: true,
  zoomToClonedNode: true,
  cloneNodeMargin: 20,
  expandNodeStepSize: 20,
  betterReadonlyEnabled: true,
  disableNodePopup: false,
  disableZoom: false,
  disablePan: false,
  collapsibleGroupsFeatureEnabled: true,
  collapsedGroupPreviewOnDrag: true,
  presentationFeatureEnabled: true,
  showSetStartNodeInPopup: false,
  defaultSlideSize: "1200x675",
  wrapInSlidePadding: 20,
  useArrowKeysToChangeSlides: true,
  usePgUpPgDownKeysToChangeSlides: true,
  zoomToSlideWithoutPadding: true,
  slideTransitionAnimationDuration: 0.5,
  slideTransitionAnimationIntensity: 1.25,
  canvasEncapsulationEnabled: true,
  portalsFeatureEnabled: true,
  maintainClosedPortalSize: true,
  showEdgesIntoDisabledPortals: true
};
var _SettingsManager = class _SettingsManager {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.plugin.loadData());
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
  getSetting(key) {
    return this.settings[key];
  }
  async setSetting(data) {
    this.settings = Object.assign(this.settings, data);
    await this.saveSettings();
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  addSettingsTab() {
    this.settingsTab = new AdvancedCanvasPluginSettingTab(this.plugin, this);
    this.plugin.addSettingTab(this.settingsTab);
  }
};
_SettingsManager.SETTINGS_CHANGED_EVENT = "advanced-canvas:settings-changed";
var SettingsManager = _SettingsManager;
var AdvancedCanvasPluginSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(plugin, settingsManager) {
    super(plugin.app, plugin);
    this.settingsManager = settingsManager;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName("General");
    new import_obsidian2.Setting(containerEl).setName("Node type on double click").setDesc("The type of node that will be created when double clicking on the canvas.").addDropdown(
      (dropdown) => dropdown.addOptions(NODE_TYPES_ON_DOUBLE_CLICK).setValue(this.settingsManager.getSetting("nodeTypeOnDoubleClick")).onChange(async (value) => await this.settingsManager.setSetting({ nodeTypeOnDoubleClick: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Align node, created by double click, to grid").setDesc("When enabled, a node created by double clicking will be aligned to the grid.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("alignDoubleClickedNodeToGrid")).onChange(async (value) => await this.settingsManager.setSetting({ alignDoubleClickedNodeToGrid: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node width").setDesc("The default width of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node height").setDesc("The default height of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeHeight: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node width").setDesc("The default width of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node height").setDesc("The default height of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeHeight: Math.max(1, parseInt(value)) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Performance optimization",
      "Optimize the performance of the canvas (Side effect is some amount of blurriness).",
      "performanceOptimizationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Node styling",
      "Style your nodes with different shapes and borders.",
      "nodeStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom node style settings").setDesc("Add custom style settings for nodes. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    const allNodeStyleAttributes = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customNodeStyleAttributes")].filter((setting) => {
      var _a;
      return setting.nodeTypes === void 0 || ((_a = setting.nodeTypes) == null ? void 0 : _a.includes("text"));
    });
    this.createDefaultStylesSection(containerEl, "Default text node style attributes", "defaultTextNodeStyleAttributes", allNodeStyleAttributes);
    this.createFeatureHeading(
      containerEl,
      "Edges styling",
      "Style your edges with different path styles.",
      "edgesStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom edge style settings").setDesc("Add custom style settings for edges. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    this.createDefaultStylesSection(containerEl, "Default edge style attributes", "defaultEdgeStyleAttributes", [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customEdgeStyleAttributes")]);
    new import_obsidian2.Setting(containerEl).setName('Rotate arrow if pathfinding method is "Direct"').setDesc('When enabled, the arrow will be rotated to the direction of the edge if the pathfinding method is set to "Direct".').addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStyleDirectRotateArrow")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStyleDirectRotateArrow: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* grid resolution").setDesc("The resolution of the grid when using the A* path style. The lower the value, the more precise the path will be. But it will also take longer to calculate.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("edgeStylePathfinderGridResolution").toString()).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderGridResolution: Math.max(5, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Live update A* path").setDesc("When enabled, the A* path style will be updated live while dragging the edge.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathLiveUpdate")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathLiveUpdate: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* rounded path").setDesc("When enabled, the A* path style will be rounded.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathRounded")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathRounded: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Extended commands",
      "Add more commands to the canvas.",
      "commandsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to cloned node").setDesc("When enabled, the canvas will zoom to the cloned node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToClonedNode")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToClonedNode: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Clone node margin").setDesc("The margin between the cloned node and the source node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("cloneNodeMargin").toString()).onChange(async (value) => await this.settingsManager.setSetting({ cloneNodeMargin: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Expand node step size").setDesc("The step size for expanding the node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("expandNodeStepSize").toString()).onChange(async (value) => await this.settingsManager.setSetting({ expandNodeStepSize: parseInt(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Better readonly",
      "Improve the readonly mode.",
      "betterReadonlyEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Collapsible groups",
      "Group nodes can be collapsed and expanded to keep the canvas organized.",
      "collapsibleGroupsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Collapsed group preview on drag").setDesc("When enabled, a group that is collapsed show its border while dragging a node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("collapsedGroupPreviewOnDrag")).onChange(async (value) => await this.settingsManager.setSetting({ collapsedGroupPreviewOnDrag: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Presentations",
      "Create a presentation from your canvas.",
      "presentationFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName('Show "Set Start Node" in node popup').setDesc("If turned off, you can still set the start node using the corresponding command.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showSetStartNodeInPopup")).onChange(async (value) => await this.settingsManager.setSetting({ showSetStartNodeInPopup: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default slide ratio").setDesc("The default ratio of the slide. For example, 16:9 is 1200x675 and 3:2 is 1350x900.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultSlideSize")).onChange(async (value) => await this.settingsManager.setSetting({ defaultSlideSize: value.replace(" ", "") }))
    );
    new import_obsidian2.Setting(containerEl).setName("Wrap in slide padding").setDesc("The padding of the slide when wrapping the canvas in a slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("wrapInSlidePadding").toString()).onChange(async (value) => await this.settingsManager.setSetting({ wrapInSlidePadding: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use arrow keys to change slides").setDesc("When enabled, you can use the arrow keys to change slides in presentation mode.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("useArrowKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ useArrowKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use PgUp/PgDown keys to change slides").setDesc("When enabled, you can use the PgUp/PgDown keys to change slides in presentation mode (Makes the presentation mode compatible with most presentation remotes).").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("usePgUpPgDownKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ usePgUpPgDownKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to slide without padding").setDesc("When enabled, the canvas will zoom to the slide without padding.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToSlideWithoutPadding")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToSlideWithoutPadding: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation duration").setDesc("The duration of the slide transition animation in seconds. Set to 0 to disable the animation.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationDuration").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationDuration: parseFloat(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation intensity").setDesc("The intensity of the slide transition animation. The higher the value, the more the canvas will zoom out before zooming in on the next slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationIntensity").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationIntensity: parseFloat(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Canvas encapsulation",
      "Encapsulate a selection of nodes and edges into a new canvas.",
      "canvasEncapsulationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Portals",
      "Create portals to other canvases.",
      "portalsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Maintain closed portal size").setDesc("When enabled, closing a portal will change the size of the portal to the original, closed size.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("maintainClosedPortalSize")).onChange(async (value) => await this.settingsManager.setSetting({ maintainClosedPortalSize: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Show edges into disabled portals").setDesc("When enabled, edges into disabled portals will be shown by an edge to the portal node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showEdgesIntoDisabledPortals")).onChange(async (value) => await this.settingsManager.setSetting({ showEdgesIntoDisabledPortals: value }))
    );
    const kofiButton = document.createElement("a");
    kofiButton.classList.add("kofi-button");
    kofiButton.href = "https://ko-fi.com/X8X27IA08";
    kofiButton.target = "_blank";
    const kofiImage = document.createElement("img");
    kofiImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNcAAAGVCAMAAADqnefWAAAA3lBMVEUAAAD/////////////////////////////////////////////////////////////////9fX/7Ozv7+//4uH/2dn/2djf39//zc3/ycj/w8P/wMDPz8//ubj/t7f/r6//qqq/v7//o6P/nZz/m5v/lpb/kZCvr6//ion/h4f/hob/hoX/hIP/gH//fXz/fHv/eXifn5//dXT/cXH/bm7/bm3/a2v/amn/aWj/aGf/ZmX/ZGT/Y2L/YWH/YGCPj4//X19/f39vb29fX19PT08/Pz8vLy8fHx8PDw8AAABHqlbKAAAAEHRSTlMAECAwQFBgcICQoLDA0ODwVOCoyAAALtpJREFUeNrs3Vtvm8oaxnGwMcaYw6uiyKpEpI4i1VIutkTUi0pRZGMMZr7/F9rZK90rTnMwzAFm8PO7X6lW7fw7wxxwAAAAAAAAAAAAAAAAAAAAAAAAAAAAwByu5/kBKLDwPG/uAMCYZotgHRMolkbRKvC9mQMAw5ot1wmBVkkULD3XAYAhLFZomgDhui0wdgPQa75KCQaWrJeeAwBauD4eqI0mCtA2AOVmAYZqI1svMScFUGgWEhggWWHYBqCGuyIwRRouHACQhRloZ0gbgBU87OswULrC6QQATEEnJ1li3y4ABmuTE2IVAaA3DNZMl/gYtAH04WIfrgXSFXa1AXQ2xzKoJUKUDaAbn8AaER60AXQQENgEZQO4COemrIOyASBr0xPhORsAsjY5WEEAQNYmJw2wnw0AWZuaxHcA4G9LAqtFOBIPgH1rk4PJKABOGUxOgj0fAK9cZG0a1hiyAfxfRDANKe7UBcDpqckJMWQDeDYnmBA8ZQNwHBe3407MCkM2uHq4HndyEuxlgyvnEUxP4ABcM1z7PUkR5qJwxXB+aqJSLB/A1cKO3OlaOgDXCYsGE4atbHCdZgQTFuPCSbhGuHRt2lJs+IDrg+Ha5OG+SVDK9bwgWEXP6EwaResg8DznIgzXADvZwBiut1xFCV2QRMFi5ozLJZi+0AGQ4i6CKKXuktD/sm2m3uPByqquWw7C6hdlWW5ZTr1gWRQGNPPDhAQkq7kzkoQEZMWRg1ptfSy3OekSI2wgZLFK6IVFafOpv80BwzRtmmrH6EsIGwzF9cOUZCVL1xna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";
    kofiButton.appendChild(kofiImage);
    containerEl.appendChild(kofiButton);
  }
  createFeatureHeading(containerEl, label, description, settingsKey) {
    return new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName(label).setDesc(description).addToggle(
      (toggle) => toggle.setTooltip("Requires a reload to take effect.").setValue(this.settingsManager.getSetting(settingsKey)).onChange(async (value) => {
        await this.settingsManager.setSetting({ [settingsKey]: value });
        new import_obsidian2.Notice("Reload obsidian to apply the changes.");
      })
    );
  }
  createDefaultStylesSection(containerEl, label, settingsKey, allStylableAttributes) {
    const defaultNodeStylesEl = document.createElement("details");
    defaultNodeStylesEl.classList.add("setting-item");
    const defaultNodeStylesSummaryEl = document.createElement("summary");
    defaultNodeStylesSummaryEl.textContent = label;
    defaultNodeStylesEl.appendChild(defaultNodeStylesSummaryEl);
    for (const stylableAttribute of allStylableAttributes) {
      new import_obsidian2.Setting(defaultNodeStylesEl).setName(stylableAttribute.label).addDropdown(
        (dropdown) => {
          var _a;
          return dropdown.addOptions(Object.fromEntries(stylableAttribute.options.map((option) => [option.value, option.label]))).setValue((_a = this.settingsManager.getSetting(settingsKey)[stylableAttribute.datasetKey]) != null ? _a : "null").onChange(async (value) => {
            const newValue = this.settingsManager.getSetting(settingsKey);
            if (value === "null")
              delete newValue[stylableAttribute.datasetKey];
            else
              newValue[stylableAttribute.datasetKey] = value;
            await this.settingsManager.setSetting({
              [settingsKey]: newValue
            });
          });
        }
      );
    }
    containerEl.appendChild(defaultNodeStylesEl);
  }
};

// src/windows-manager.ts
var WindowsManager = class {
  constructor(plugin) {
    this.windows = [window];
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, window2) => this.windows.push(window2)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-close",
      (_win, window2) => this.windows = this.windows.filter((w) => w !== window2)
    ));
  }
};

// src/utils/canvas-helper.ts
var import_obsidian3 = require("obsidian");

// src/utils/bbox-helper.ts
var BBoxHelper = class {
  static combineBBoxes(bboxes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (let bbox of bboxes) {
      minX = Math.min(minX, bbox.minX);
      minY = Math.min(minY, bbox.minY);
      maxX = Math.max(maxX, bbox.maxX);
      maxY = Math.max(maxY, bbox.maxY);
    }
    return { minX, minY, maxX, maxY };
  }
  static scaleBBox(bbox, scale) {
    let diffX = (scale - 1) * (bbox.maxX - bbox.minX);
    let diffY = (scale - 1) * (bbox.maxY - bbox.minY);
    return {
      minX: bbox.minX - diffX / 2,
      maxX: bbox.maxX + diffX / 2,
      minY: bbox.minY - diffY / 2,
      maxY: bbox.maxY + diffY / 2
    };
  }
  static insideBBox(position, bbox, canTouchEdge) {
    var _a, _b, _c, _d;
    const providedBBox = {
      minX: (_a = position.minX) != null ? _a : position.x,
      minY: (_b = position.minY) != null ? _b : position.y,
      maxX: (_c = position.maxX) != null ? _c : position.x,
      maxY: (_d = position.maxY) != null ? _d : position.y
    };
    return canTouchEdge ? providedBBox.minX >= bbox.minX && providedBBox.maxX <= bbox.maxX && providedBBox.minY >= bbox.minY && providedBBox.maxY <= bbox.maxY : providedBBox.minX > bbox.minX && providedBBox.maxX < bbox.maxX && providedBBox.minY > bbox.minY && providedBBox.maxY < bbox.maxY;
  }
  static enlargeBBox(bbox, padding) {
    return {
      minX: bbox.minX - padding,
      minY: bbox.minY - padding,
      maxX: bbox.maxX + padding,
      maxY: bbox.maxY + padding
    };
  }
  static moveInDirection(position, side, distance) {
    switch (side) {
      case "top":
        return { x: position.x, y: position.y - distance };
      case "right":
        return { x: position.x + distance, y: position.y };
      case "bottom":
        return { x: position.x, y: position.y + distance };
      case "left":
        return { x: position.x - distance, y: position.y };
    }
  }
  static getCenterOfBBoxSide(bbox, side) {
    switch (side) {
      case "top":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY };
      case "right":
        return { x: bbox.maxX, y: (bbox.minY + bbox.maxY) / 2 };
      case "bottom":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.maxY };
      case "left":
        return { x: bbox.minX, y: (bbox.minY + bbox.maxY) / 2 };
    }
  }
  static getSideVector(side) {
    switch (side) {
      case "top":
        return { x: 0, y: 1 };
      case "right":
        return { x: 1, y: 0 };
      case "bottom":
        return { x: 0, y: -1 };
      case "left":
        return { x: -1, y: 0 };
      default:
        return { x: 0, y: 0 };
    }
  }
  static isHorizontal(side) {
    return side === "left" || side === "right";
  }
  static direction(side) {
    return side === "right" || side === "bottom" ? 1 : -1;
  }
};

// src/utils/canvas-helper.ts
var CanvasHelper = class {
  static canvasCommand(plugin, check, run) {
    return (checking) => {
      const canvas = plugin.getCurrentCanvas();
      if (checking)
        return canvas !== null && check(canvas);
      if (canvas)
        run(canvas);
      return true;
    };
  }
  static createQuickSettingsButton(menuOption) {
    const quickSetting = document.createElement("div");
    if (menuOption.id)
      quickSetting.id = menuOption.id;
    quickSetting.classList.add("canvas-control-item");
    (0, import_obsidian3.setIcon)(quickSetting, menuOption.icon);
    (0, import_obsidian3.setTooltip)(quickSetting, menuOption.label, { placement: "left" });
    quickSetting.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return quickSetting;
  }
  static addQuickSettingsButton(controlGroup, element) {
    var _a;
    if (element.id)
      (_a = controlGroup.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    controlGroup.appendChild(element);
  }
  static createCardMenuOption(canvas, menuOption, previewNodeSize, onPlaced) {
    const menuOptionElement = document.createElement("div");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("canvas-card-menu-button");
    menuOptionElement.classList.add("mod-draggable");
    (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", (_e) => {
      onPlaced(canvas, this.getCenterCoordinates(canvas, previewNodeSize()));
    });
    menuOptionElement.addEventListener("pointerdown", (e) => {
      canvas.dragTempNode(e, previewNodeSize(), (pos) => {
        canvas.deselectAll();
        onPlaced(canvas, pos);
      });
    });
    return menuOptionElement;
  }
  static addCardMenuOption(canvas, element) {
    var _a;
    if (element.id)
      (_a = canvas == null ? void 0 : canvas.cardMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    canvas == null ? void 0 : canvas.cardMenuEl.appendChild(element);
  }
  static createPopupMenuOption(menuOption) {
    const menuOptionElement = document.createElement("button");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("clickable-icon");
    (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return menuOptionElement;
  }
  static createExpandablePopupMenuOption(menuOption, subMenuOptions) {
    const menuOptionElement = this.createPopupMenuOption({
      ...menuOption,
      callback: () => {
        var _a, _b, _c;
        const submenuId = `${menuOption.id}-submenu`;
        if (menuOptionElement.classList.contains("is-active")) {
          menuOptionElement.classList.remove("is-active");
          (_b = (_a = menuOptionElement.parentElement) == null ? void 0 : _a.querySelector(`#${submenuId}`)) == null ? void 0 : _b.remove();
          return;
        }
        menuOptionElement.classList.add("is-active");
        const submenu = document.createElement("div");
        submenu.id = submenuId;
        submenu.classList.add("canvas-submenu");
        for (const subMenuOption of subMenuOptions) {
          const subMenuOptionElement = this.createPopupMenuOption(subMenuOption);
          submenu.appendChild(subMenuOptionElement);
        }
        (_c = menuOptionElement.parentElement) == null ? void 0 : _c.appendChild(submenu);
      }
    });
    return menuOptionElement;
  }
  static addPopupMenuOption(canvas, element, index = -1) {
    var _a, _b;
    const popupMenuEl = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuEl)
      return;
    if (element.id)
      (_b = popupMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _b.remove();
    const sisterElement = index >= 0 ? popupMenuEl.children[index] : popupMenuEl.children[popupMenuEl.children.length + index];
    popupMenuEl.insertAfter(element, sisterElement);
  }
  static getCenterCoordinates(canvas, nodeSize) {
    const viewBounds = canvas.getViewportBBox();
    return {
      x: (viewBounds.minX + viewBounds.maxX) / 2 - nodeSize.width / 2,
      y: (viewBounds.minY + viewBounds.maxY) / 2 - nodeSize.height / 2
    };
  }
  static getBBox(canvasNodes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (const node of canvasNodes) {
      const nodeData = node.getData ? node.getData() : node;
      minX = Math.min(minX, nodeData.x);
      minY = Math.min(minY, nodeData.y);
      maxX = Math.max(maxX, nodeData.x + nodeData.width);
      maxY = Math.max(maxY, nodeData.y + nodeData.height);
    }
    return { minX, minY, maxX, maxY };
  }
  static zoomToBBox(canvas, bbox) {
    const PADDING_CORRECTION_FACTOR = 1 / 1.1;
    const zoomedBBox = BBoxHelper.scaleBBox(bbox, PADDING_CORRECTION_FACTOR);
    canvas.zoomToBbox(zoomedBBox);
    const scaleFactor = Math.min(
      canvas.canvasRect.width / (bbox.maxX - bbox.minX),
      canvas.canvasRect.height / (bbox.maxY - bbox.minY)
    );
    canvas.tZoom = Math.log2(scaleFactor);
  }
  static createStyleDropdownMenu(canvas, stylableAttributes, currentStyleAttributes, setStyleAttribute) {
    var _a, _b;
    const STYLE_MENU_ID = "style-menu";
    const STYLE_MENU_DROPDOWN_ID = "style-menu-dropdown";
    const STYLE_MENU_DROPDOWN_SUBMENU_ID = "style-menu-dropdown-submenu";
    const popupMenuElement = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuElement)
      return;
    (_b = popupMenuElement.querySelector(`#${STYLE_MENU_ID}`)) == null ? void 0 : _b.remove();
    const styleMenuButtonElement = document.createElement("button");
    styleMenuButtonElement.id = STYLE_MENU_ID;
    styleMenuButtonElement.classList.add("clickable-icon");
    (0, import_obsidian3.setIcon)(styleMenuButtonElement, "paintbrush");
    (0, import_obsidian3.setTooltip)(styleMenuButtonElement, "Style", { placement: "top" });
    popupMenuElement.appendChild(styleMenuButtonElement);
    styleMenuButtonElement.addEventListener("click", () => {
      var _a2, _b2, _c;
      const isOpen = styleMenuButtonElement.classList.toggle("has-active-menu");
      if (!isOpen) {
        (_a2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_ID}`)) == null ? void 0 : _a2.remove();
        (_b2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _b2.remove();
        return;
      }
      const styleMenuDropdownElement = document.createElement("div");
      styleMenuDropdownElement.id = STYLE_MENU_DROPDOWN_ID;
      styleMenuDropdownElement.classList.add("menu");
      styleMenuDropdownElement.style.position = "absolute";
      styleMenuDropdownElement.style.maxHeight = "initial";
      styleMenuDropdownElement.style.top = `${popupMenuElement.getBoundingClientRect().height}px`;
      const canvasWrapperCenterX = canvas.wrapperEl.getBoundingClientRect().left + canvas.wrapperEl.getBoundingClientRect().width / 2;
      const leftPosition = styleMenuButtonElement.getBoundingClientRect().left - popupMenuElement.getBoundingClientRect().left;
      const rightPosition = popupMenuElement.getBoundingClientRect().right - styleMenuButtonElement.getBoundingClientRect().right;
      if (popupMenuElement.getBoundingClientRect().left + leftPosition < canvasWrapperCenterX)
        styleMenuDropdownElement.style.left = `${leftPosition}px`;
      else
        styleMenuDropdownElement.style.right = `${rightPosition}px`;
      for (const stylableAttribute of stylableAttributes) {
        const stylableAttributeElement = document.createElement("div");
        stylableAttributeElement.classList.add("menu-item");
        stylableAttributeElement.classList.add("tappable");
        const iconElement = document.createElement("div");
        iconElement.classList.add("menu-item-icon");
        const selectedStyle = (_c = stylableAttribute.options.find((option) => currentStyleAttributes[stylableAttribute.datasetKey] === option.value)) != null ? _c : stylableAttribute.options.find((value) => value.value === null);
        (0, import_obsidian3.setIcon)(iconElement, selectedStyle.icon);
        stylableAttributeElement.appendChild(iconElement);
        const labelElement = document.createElement("div");
        labelElement.classList.add("menu-item-title");
        labelElement.textContent = stylableAttribute.label;
        stylableAttributeElement.appendChild(labelElement);
        const expandIconElement = document.createElement("div");
        expandIconElement.classList.add("menu-item-icon");
        (0, import_obsidian3.setIcon)(expandIconElement, "chevron-right");
        stylableAttributeElement.appendChild(expandIconElement);
        styleMenuDropdownElement.appendChild(stylableAttributeElement);
        stylableAttributeElement.addEventListener("pointerenter", () => {
          stylableAttributeElement.classList.add("selected");
        });
        stylableAttributeElement.addEventListener("pointerleave", () => {
          stylableAttributeElement.classList.remove("selected");
        });
        stylableAttributeElement.addEventListener("click", () => {
          var _a3;
          (_a3 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _a3.remove();
          const styleMenuDropdownSubmenuElement = document.createElement("div");
          styleMenuDropdownSubmenuElement.id = STYLE_MENU_DROPDOWN_SUBMENU_ID;
          styleMenuDropdownSubmenuElement.classList.add("menu");
          styleMenuDropdownSubmenuElement.style.position = "absolute";
          styleMenuDropdownSubmenuElement.style.maxHeight = "initial";
          const topOffset = parseFloat(window.getComputedStyle(styleMenuDropdownElement).getPropertyValue("padding-top")) + (styleMenuDropdownElement.offsetHeight - styleMenuDropdownElement.clientHeight) / 2;
          styleMenuDropdownSubmenuElement.style.top = `${stylableAttributeElement.getBoundingClientRect().top - topOffset - popupMenuElement.getBoundingClientRect().top}px`;
          const leftPosition2 = styleMenuDropdownElement.getBoundingClientRect().right - popupMenuElement.getBoundingClientRect().left;
          const rightPosition2 = popupMenuElement.getBoundingClientRect().right - styleMenuDropdownElement.getBoundingClientRect().left;
          if (popupMenuElement.getBoundingClientRect().left + leftPosition2 < canvasWrapperCenterX)
            styleMenuDropdownSubmenuElement.style.left = `${leftPosition2}px`;
          else
            styleMenuDropdownSubmenuElement.style.right = `${rightPosition2}px`;
          for (const value of stylableAttribute.options) {
            const styleMenuDropdownSubmenuOptionElement = document.createElement("div");
            styleMenuDropdownSubmenuOptionElement.classList.add("menu-item");
            styleMenuDropdownSubmenuOptionElement.classList.add("tappable");
            const submenuIconElement = document.createElement("div");
            submenuIconElement.classList.add("menu-item-icon");
            (0, import_obsidian3.setIcon)(submenuIconElement, value.icon);
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuIconElement);
            const submenuLabelElement = document.createElement("div");
            submenuLabelElement.classList.add("menu-item-title");
            submenuLabelElement.textContent = value.label;
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuLabelElement);
            if (selectedStyle === value) {
              styleMenuDropdownSubmenuOptionElement.classList.add("mod-selected");
              const selectedIconElement = document.createElement("div");
              selectedIconElement.classList.add("menu-item-icon");
              selectedIconElement.classList.add("mod-selected");
              (0, import_obsidian3.setIcon)(selectedIconElement, "check");
              styleMenuDropdownSubmenuOptionElement.appendChild(selectedIconElement);
            }
            styleMenuDropdownSubmenuElement.appendChild(styleMenuDropdownSubmenuOptionElement);
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerenter", () => {
              styleMenuDropdownSubmenuOptionElement.classList.add("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerleave", () => {
              styleMenuDropdownSubmenuOptionElement.classList.remove("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("click", () => {
              setStyleAttribute(stylableAttribute, value.value);
              currentStyleAttributes[stylableAttribute.datasetKey] = value.value;
              styleMenuButtonElement.dispatchEvent(new Event("click"));
            });
          }
          popupMenuElement.appendChild(styleMenuDropdownSubmenuElement);
        });
      }
      popupMenuElement.appendChild(styleMenuDropdownElement);
    });
  }
};
CanvasHelper.GRID_SIZE = 20;

// src/core/canvas-extension.ts
var CanvasExtension = class {
  constructor(plugin) {
    this.plugin = plugin;
    const isEnabled = this.isEnabled();
    if (!(isEnabled === true || this.plugin.settings.getSetting(isEnabled)))
      return;
    this.init();
  }
};

// src/canvas-extensions/group-canvas-extension.ts
var GROUP_NODE_SIZE = { width: 300, height: 300 };
var GroupCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        CanvasHelper.addCardMenuOption(
          canvas,
          CanvasHelper.createCardMenuOption(
            canvas,
            {
              id: "create-group",
              label: "Drag to add group",
              icon: "group"
            },
            () => GROUP_NODE_SIZE,
            (canvas2, pos) => {
              canvas2.createGroupNode({
                pos,
                size: GROUP_NODE_SIZE
              });
            }
          )
        );
      }
    ));
  }
};

// src/canvas-extensions/presentation-canvas-extension.ts
var import_obsidian4 = require("obsidian");
var START_SLIDE_NAME = "Start Slide";
var DEFAULT_SLIDE_NAME = "New Slide";
var PresentationCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.savedViewport = null;
    this.isPresentationMode = false;
    this.visitedNodes = [];
    this.fullscreenModalObserver = null;
  }
  isEnabled() {
    return "presentationFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Wrap in slide").setIcon("gallery-vertical").onClick(() => this.addSlide(
            canvas,
            void 0,
            BBoxHelper.enlargeBBox(BBoxHelper.combineBBoxes(
              [...canvas.selection.values()].map((element) => element.getBBox())
            ), this.plugin.settings.getSetting("wrapInSlidePadding"))
          ))
        );
      }
    ));
    this.plugin.addCommand({
      id: "create-new-slide",
      name: "Create new slide",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode,
        (canvas) => this.addSlide(canvas)
      )
    });
    this.plugin.addCommand({
      id: "set-start-node",
      name: "Set start node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode && canvas.getSelectionData().nodes.length === 1,
        (canvas) => this.setStartNode(canvas, canvas.nodes.get(canvas.getSelectionData().nodes[0].id))
      )
    });
    this.plugin.addCommand({
      id: "start-presentation",
      name: "Start presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "continue-presentation",
      name: "Continue presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas, true)
      )
    });
    this.plugin.addCommand({
      id: "end-presentation",
      name: "End presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.endPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "previous-node",
      name: "Previous node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.previousNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "next-node",
      name: "Next node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.nextNode(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
  }
  onCanvasChanged(canvas) {
    CanvasHelper.addCardMenuOption(
      canvas,
      CanvasHelper.createCardMenuOption(
        canvas,
        {
          id: "new-slide",
          label: "Drag to add slide",
          icon: "gallery-vertical"
        },
        () => this.getDefaultSlideSize(),
        (canvas2, pos) => this.addSlide(canvas2, pos)
      )
    );
  }
  onPopupMenuCreated(canvas) {
    if (!this.plugin.settings.getSetting("showSetStartNodeInPopup"))
      return;
    const selectedNodesData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectedNodesData.length !== 1 || canvas.selection.size > 1)
      return;
    const selectedNode = canvas.nodes.get(selectedNodesData[0].id);
    if (!selectedNode)
      return;
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "start-node",
        label: "Set as start slide",
        icon: "play",
        callback: () => this.setStartNode(canvas, selectedNode)
      })
    );
  }
  onNodeMoved(_canvas, node) {
    const nodeData = node.getData();
    if (!nodeData.sideRatio)
      return;
    const nodeBBox = node.getBBox();
    const nodeSize = {
      width: nodeBBox.maxX - nodeBBox.minX,
      height: nodeBBox.maxY - nodeBBox.minY
    };
    const nodeAspectRatio = nodeSize.width / nodeSize.height;
    if (nodeAspectRatio < nodeData.sideRatio)
      nodeSize.width = nodeSize.height * nodeData.sideRatio;
    else
      nodeSize.height = nodeSize.width / nodeData.sideRatio;
    node.setData({
      ...nodeData,
      width: nodeSize.width,
      height: nodeSize.height
    });
  }
  getStartNode(canvas) {
    for (const [_, node] of canvas.nodes) {
      if (node.getData().isStartNode)
        return node;
    }
    return void 0;
  }
  setStartNode(canvas, node) {
    if (!node)
      return;
    const startNode = this.getStartNode(canvas);
    if (startNode)
      startNode.setData({ ...startNode.getData(), isStartNode: false });
    if (node !== startNode)
      node.setData({ ...node.getData(), isStartNode: true }, true);
  }
  getDefaultSlideSize() {
    const slideSizeString = this.plugin.settings.getSetting("defaultSlideSize");
    const slideSizeArray = slideSizeString.split("x").map((value) => parseInt(value));
    return { width: slideSizeArray[0], height: slideSizeArray[1] };
  }
  getSlideAspectRatio() {
    const slideSize = this.getDefaultSlideSize();
    return slideSize.width / slideSize.height;
  }
  addSlide(canvas, pos, bbox) {
    const isStartNode = this.getStartNode(canvas) == null;
    const slideSize = this.getDefaultSlideSize();
    const slideAspectRatio = this.getSlideAspectRatio();
    if (bbox) {
      const bboxWidth = bbox.maxX - bbox.minX;
      const bboxHeight = bbox.maxY - bbox.minY;
      if (bboxWidth / bboxHeight > slideAspectRatio) {
        slideSize.width = bboxWidth;
        slideSize.height = bboxWidth / slideAspectRatio;
      } else {
        slideSize.height = bboxHeight;
        slideSize.width = bboxHeight * slideAspectRatio;
      }
      pos = {
        x: bbox.minX,
        y: bbox.minY
      };
    }
    if (!pos)
      pos = CanvasHelper.getCenterCoordinates(canvas, this.getDefaultSlideSize());
    const groupNode = canvas.createGroupNode({
      pos,
      size: slideSize,
      label: isStartNode ? START_SLIDE_NAME : DEFAULT_SLIDE_NAME,
      focus: false
    });
    groupNode.setData({
      ...groupNode.getData(),
      sideRatio: slideAspectRatio,
      isStartNode: isStartNode ? true : void 0
    });
  }
  async animateNodeTransition(canvas, fromNode, toNode) {
    const useCustomZoomFunction = this.plugin.settings.getSetting("zoomToSlideWithoutPadding");
    const animationDurationMs = this.plugin.settings.getSetting("slideTransitionAnimationDuration") * 1e3;
    if (animationDurationMs > 0 && fromNode) {
      const animationIntensity = this.plugin.settings.getSetting("slideTransitionAnimationIntensity");
      const currentNodeBBoxEnlarged = BBoxHelper.scaleBBox(fromNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, currentNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(currentNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
      const nextNodeBBoxEnlarged = BBoxHelper.scaleBBox(toNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, nextNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(nextNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
    }
    let nodeBBox = toNode.getBBox();
    if (useCustomZoomFunction)
      CanvasHelper.zoomToBBox(canvas, nodeBBox);
    else
      canvas.zoomToBbox(nodeBBox);
  }
  async startPresentation(canvas, tryContinue = false) {
    if (!tryContinue || this.visitedNodes.length === 0) {
      const startNode = this.getStartNode(canvas);
      if (!startNode) {
        new import_obsidian4.Notice("No start node found. Please mark a node as a start node trough the popup menu.");
        return;
      }
      this.visitedNodes = [startNode];
    }
    this.savedViewport = {
      x: canvas.tx,
      y: canvas.ty,
      zoom: canvas.tZoom
    };
    canvas.wrapperEl.focus();
    canvas.wrapperEl.requestFullscreen();
    canvas.wrapperEl.classList.add("presentation-mode");
    canvas.setReadonly(true);
    canvas.wrapperEl.onkeydown = (e) => {
      if (this.plugin.settings.getSetting("useArrowKeysToChangeSlides")) {
        if (e.key === "ArrowRight")
          this.nextNode(canvas);
        else if (e.key === "ArrowLeft")
          this.previousNode(canvas);
      }
      if (this.plugin.settings.getSetting("usePgUpPgDownKeysToChangeSlides")) {
        if (e.key === "PageDown")
          this.nextNode(canvas);
        else if (e.key === "PageUp")
          this.previousNode(canvas);
      }
    };
    this.fullscreenModalObserver = new MutationObserver((mutationRecords) => {
      mutationRecords.forEach((mutationRecord) => {
        mutationRecord.addedNodes.forEach((node) => {
          var _a;
          document.body.removeChild(node);
          (_a = document.fullscreenElement) == null ? void 0 : _a.appendChild(node);
        });
      });
      const inputField = document.querySelector(".prompt-input");
      if (inputField)
        inputField.focus();
    });
    this.fullscreenModalObserver.observe(document.body, { childList: true });
    canvas.wrapperEl.onfullscreenchange = (_e) => {
      if (document.fullscreenElement)
        return;
      this.endPresentation(canvas);
    };
    this.isPresentationMode = true;
    await sleep(500);
    this.animateNodeTransition(canvas, void 0, this.visitedNodes.last());
  }
  endPresentation(canvas) {
    var _a;
    (_a = this.fullscreenModalObserver) == null ? void 0 : _a.disconnect();
    this.fullscreenModalObserver = null;
    canvas.wrapperEl.onkeydown = null;
    canvas.wrapperEl.onfullscreenchange = null;
    canvas.setReadonly(false);
    canvas.wrapperEl.classList.remove("presentation-mode");
    if (document.fullscreenElement)
      document.exitFullscreen();
    canvas.setViewport(this.savedViewport.x, this.savedViewport.y, this.savedViewport.zoom);
    this.isPresentationMode = false;
  }
  nextNode(canvas) {
    var _a;
    const fromNode = this.visitedNodes.last();
    if (!fromNode)
      return;
    const outgoingEdges = canvas.getEdgesForNode(fromNode).filter((edge) => edge.from.node === fromNode);
    let toNode = (_a = outgoingEdges.first()) == null ? void 0 : _a.to.node;
    if (outgoingEdges.length > 1) {
      const sortedEdges = outgoingEdges.sort((a, b) => {
        if (!a.label)
          return 1;
        if (!b.label)
          return -1;
        return a.label.localeCompare(b.label);
      });
      const traversedEdgesCount = this.visitedNodes.filter((visitedNode) => visitedNode == fromNode).length - 1;
      const nextEdge = sortedEdges[traversedEdgesCount];
      toNode = nextEdge.to.node;
    }
    if (toNode) {
      this.visitedNodes.push(toNode);
      this.animateNodeTransition(canvas, fromNode, toNode);
    } else {
      this.animateNodeTransition(canvas, fromNode, fromNode);
    }
  }
  previousNode(canvas) {
    const fromNode = this.visitedNodes.pop();
    if (!fromNode)
      return;
    let toNode = this.visitedNodes.last();
    if (!toNode) {
      toNode = fromNode;
      this.visitedNodes.push(fromNode);
    }
    this.animateNodeTransition(canvas, fromNode, toNode);
  }
};

// src/canvas-extensions/better-readonly-canvas-extension.ts
var BetterReadonlyCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "betterReadonlyEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas, _node) => this.updatePopupMenu(canvas)
    ));
    let movingToBBox = false;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ViewportChanged.Before,
      (canvas) => {
        var _a, _b, _c, _d, _e, _f;
        if (movingToBBox) {
          movingToBBox = false;
          this.updateLockedZoom(canvas);
          this.updateLockedPan(canvas);
          return;
        }
        if (!canvas.readonly)
          return;
        if (this.plugin.settings.getSetting("disableZoom")) {
          canvas.zoom = (_a = canvas.lockedZoom) != null ? _a : canvas.zoom;
          canvas.tZoom = (_b = canvas.lockedZoom) != null ? _b : canvas.tZoom;
        }
        if (this.plugin.settings.getSetting("disablePan")) {
          canvas.x = (_c = canvas.lockedX) != null ? _c : canvas.x;
          canvas.tx = (_d = canvas.lockedX) != null ? _d : canvas.tx;
          canvas.y = (_e = canvas.lockedY) != null ? _e : canvas.y;
          canvas.ty = (_f = canvas.lockedY) != null ? _f : canvas.ty;
        }
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ZoomToBbox.Before,
      () => movingToBBox = true
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ReadonlyChanged,
      (canvas, _readonly) => {
        this.updatePopupMenu(canvas);
        this.updateLockedZoom(canvas);
        this.updateLockedPan(canvas);
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.addQuickSettings(canvas)
    ));
  }
  addQuickSettings(canvas) {
    var _a;
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-node-popup",
        label: "Disable node popup",
        icon: "arrow-up-right-from-circle",
        callback: () => this.updatePopupMenu(canvas)
      }, "disableNodePopup")
    );
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-zoom",
        label: "Disable zoom",
        icon: "zoom-in",
        callback: () => this.updateLockedZoom(canvas)
      }, "disableZoom")
    );
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-pan",
        label: "Disable pan",
        icon: "move",
        callback: () => this.updateLockedPan(canvas)
      }, "disablePan")
    );
  }
  createToggle(menuOption, settingKey) {
    const toggle = CanvasHelper.createQuickSettingsButton({
      ...menuOption,
      callback: () => (async () => {
        var _a;
        const newValue = !this.plugin.settings.getSetting(settingKey);
        await this.plugin.settings.setSetting({ [settingKey]: newValue });
        toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
        (_a = menuOption.callback) == null ? void 0 : _a.call(this);
      })()
    });
    toggle.classList.add("show-while-readonly");
    toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
    return toggle;
  }
  updatePopupMenu(canvas) {
    const hidden = canvas.readonly && this.plugin.settings.getSetting("disableNodePopup");
    canvas.menu.menuEl.style.visibility = hidden ? "hidden" : "visible";
  }
  updateLockedZoom(canvas) {
    canvas.lockedZoom = canvas.tZoom;
  }
  updateLockedPan(canvas) {
    canvas.lockedX = canvas.tx;
    canvas.lockedY = canvas.ty;
  }
};

// src/utils/modal-helper.ts
var import_obsidian5 = require("obsidian");

// src/utils/path-helper.ts
var PathHelper = class {
  static extension(path) {
    return path.includes(".") ? path.split(".").pop() : void 0;
  }
};

// src/utils/modal-helper.ts
var FileNameModal = class extends import_obsidian5.SuggestModal {
  constructor(app, parentPath, fileExtension) {
    super(app);
    this.parentPath = parentPath;
    this.fileExtension = fileExtension;
  }
  getSuggestions(query) {
    const queryWithoutExtension = query.replace(new RegExp(`\\.${this.fileExtension}$`), "");
    if (queryWithoutExtension === "")
      return [];
    const queryWithExtension = queryWithoutExtension + "." + this.fileExtension;
    const suggestions = [`${this.parentPath}/${queryWithExtension}`, queryWithExtension].filter((s) => this.app.vault.getAbstractFileByPath(s) === null);
    return suggestions;
  }
  renderSuggestion(text, el) {
    el.setText(text);
  }
  onChooseSuggestion(_text, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (text) => {
        resolve(text);
      };
      this.open();
    });
  }
};
var FileSelectModal = class extends import_obsidian5.SuggestModal {
  constructor(app, extensionsRegex, suggestNewFile = false) {
    super(app);
    this.files = this.app.vault.getFiles().map((file) => file.path).filter((path) => {
      var _a;
      return (_a = PathHelper.extension(path)) == null ? void 0 : _a.match(extensionsRegex != null ? extensionsRegex : /.*/);
    });
    this.suggestNewFile = suggestNewFile;
    this.setPlaceholder("Type to search...");
    this.setInstructions([{
      command: "\u2191\u2193",
      purpose: "to navigate"
    }, {
      command: "\u21B5",
      purpose: "to open"
    }, {
      command: "shift \u21B5",
      purpose: "to create"
    }, {
      command: "esc",
      purpose: "to dismiss"
    }]);
    this.scope.register(["Shift"], "Enter", (e) => {
      this.onChooseSuggestion(this.inputEl.value, e);
      this.close();
    });
  }
  getSuggestions(query) {
    const suggestions = this.files.filter((path) => path.toLowerCase().includes(query.toLowerCase()));
    if (suggestions.length === 0 && this.suggestNewFile)
      suggestions.push(query);
    return suggestions;
  }
  renderSuggestion(path, el) {
    const simplifiedPath = path.replace(/\.md$/, "");
    el.setText(simplifiedPath);
  }
  onChooseSuggestion(_path, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (path, _evt) => {
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian5.TFile)
          return resolve(file);
        if (!this.suggestNewFile)
          return;
        if (PathHelper.extension(path) === void 0)
          path += ".md";
        const newFile = this.app.vault.create(path, "");
        resolve(newFile);
      };
      this.open();
    });
  }
};

// src/canvas-extensions/encapsulate-canvas-extension.ts
var ENCAPSULATED_FILE_NODE_SIZE = { width: 300, height: 300 };
var EncapsulateCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "canvasEncapsulationEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "encapsulate-selection",
      name: "Encapsulate selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && canvas.selection.size > 0,
        (canvas) => this.encapsulateSelection(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Encapsulate").setIcon("file-plus").onClick(() => this.encapsulateSelection(canvas))
        );
      }
    ));
  }
  async encapsulateSelection(canvas) {
    var _a;
    const selection = canvas.getSelectionData();
    const sourceFileFolder = (_a = canvas.view.file.parent) == null ? void 0 : _a.path;
    if (!sourceFileFolder)
      return;
    const targetFilePath = await new FileNameModal(
      this.plugin.app,
      sourceFileFolder,
      "canvas"
    ).awaitInput();
    const newFileData = { nodes: selection.nodes, edges: selection.edges };
    const file = await this.plugin.app.vault.create(targetFilePath, JSON.stringify(newFileData, null, 2));
    for (const nodeData of selection.nodes) {
      const node = canvas.nodes.get(nodeData.id);
      if (node)
        canvas.removeNode(node);
    }
    canvas.createFileNode({
      pos: {
        x: selection.center.x - ENCAPSULATED_FILE_NODE_SIZE.width / 2,
        y: selection.center.y - ENCAPSULATED_FILE_NODE_SIZE.height / 2
      },
      size: ENCAPSULATED_FILE_NODE_SIZE,
      file
    });
  }
};

// src/canvas-extensions/commands-canvas-extension.ts
var DIRECTIONS = ["up", "down", "left", "right"];
var CommandsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "commandsFeatureEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "create-text-node",
      name: "Create text node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createTextNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "create-file-node",
      name: "Create file node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createFileNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "select-all-edges",
      name: "Select all edges",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => true,
        (canvas) => canvas.updateSelection(
          () => canvas.selection = new Set(canvas.edges.values())
        )
      )
    });
    this.plugin.addCommand({
      id: "zoom-to-selection",
      name: "Zoom to selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => canvas.selection.size > 0,
        (canvas) => canvas.zoomToSelection()
      )
    });
    for (const direction of DIRECTIONS) {
      this.plugin.addCommand({
        id: `clone-node-${direction}`,
        name: `Clone node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => {
            var _a;
            return !canvas.readonly && canvas.selection.size === 1 && ((_a = canvas.selection.values().next().value) == null ? void 0 : _a.getData().type) === "text";
          },
          (canvas) => this.cloneNode(canvas, direction)
        )
      });
      this.plugin.addCommand({
        id: `expand-node-${direction}`,
        name: `Expand node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => !canvas.readonly && canvas.selection.size === 1,
          (canvas) => this.expandNode(canvas, direction)
        )
      });
    }
  }
  createTextNode(canvas) {
    const size = canvas.config.defaultTextNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    canvas.createTextNode({ pos, size });
  }
  async createFileNode(canvas) {
    const size = canvas.config.defaultFileNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
    canvas.createFileNode({ pos, size, file });
  }
  cloneNode(canvas, cloneDirection) {
    const sourceNode = canvas.selection.values().next().value;
    if (!sourceNode)
      return;
    const sourceNodeData = sourceNode.getData();
    const nodeMargin = this.plugin.settings.getSetting("cloneNodeMargin");
    const offset = {
      x: (sourceNode.width + nodeMargin) * (cloneDirection === "left" ? -1 : cloneDirection === "right" ? 1 : 0),
      y: (sourceNode.height + nodeMargin) * (cloneDirection === "up" ? -1 : cloneDirection === "down" ? 1 : 0)
    };
    const clonedNode = canvas.createTextNode({
      pos: {
        x: sourceNode.x + offset.x,
        y: sourceNode.y + offset.y
      },
      size: {
        width: sourceNode.width,
        height: sourceNode.height
      }
    });
    clonedNode.setData({
      ...clonedNode.getData(),
      color: sourceNodeData.color,
      shape: sourceNodeData.shape
    });
    if (this.plugin.settings.getSetting("zoomToClonedNode"))
      canvas.zoomToBbox(clonedNode.getBBox());
  }
  expandNode(canvas, expandDirection) {
    const node = canvas.selection.values().next().value;
    if (!node)
      return;
    const expandNodeStepSize = this.plugin.settings.getSetting("expandNodeStepSize");
    const expand = {
      x: expandDirection === "left" ? -1 : expandDirection === "right" ? 1 : 0,
      y: expandDirection === "up" ? -1 : expandDirection === "down" ? 1 : 0
    };
    node.setData({
      ...node.getData(),
      width: node.width + expand.x * expandNodeStepSize,
      height: node.height + expand.y * expandNodeStepSize
    });
  }
};

// src/canvas-extensions/portals-canvas-extension.ts
var import_obsidian6 = require("obsidian");
var PORTAL_PADDING = 50;
var MIN_OPEN_PORTAL_SIZE = { width: 200, height: 200 };
var PortalsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "portalsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.updatePopupMenu(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, node) => this.onNodeRemoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, startedDragging) => this.onDraggingStateChanged(canvas, startedDragging)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ContainingNodesRequested,
      (canvas, bbox, nodes) => this.onContainingNodesRequested(canvas, bbox, nodes)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionChanged,
      (canvas, oldSelection, updateSelection) => this.onSelectionChanged(canvas, oldSelection, updateSelection)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (canvas, data) => this.removePortalCanvasData(canvas, data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (canvas, data, setData) => {
        this.getCanvasDataWithPortals(canvas, data).then((newData) => {
          if (newData.nodes.length === data.nodes.length && newData.edges.length === data.edges.length)
            return;
          setData(newData);
        });
      }
    ));
  }
  updatePopupMenu(canvas) {
    if (canvas.readonly)
      return;
    const selectedFileNodes = canvas.getSelectionData().nodes.map((nodeData) => {
      var _a;
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        return null;
      if (nodeData.type !== "file")
        return null;
      if (((_a = node.file) == null ? void 0 : _a.extension) === "canvas")
        return node;
      if (nodeData.portalToFile)
        this.setPortalOpen(canvas, node, false);
      return null;
    }).filter((node) => node !== null);
    if (selectedFileNodes.length !== 1)
      return;
    const portalNode = selectedFileNodes[0];
    const portalNodeData = portalNode.getData();
    if (portalNodeData.portalToFile && portalNodeData.file !== portalNodeData.portalToFile) {
      this.setPortalOpen(canvas, portalNode, true);
    }
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "toggle-portal",
        label: portalNodeData.portalToFile ? "Close portal" : "Open portal",
        icon: portalNodeData.portalToFile ? "door-open" : "door-closed",
        callback: () => {
          this.setPortalOpen(canvas, portalNode, portalNodeData.portalToFile === void 0);
          this.updatePopupMenu(canvas);
        }
      })
    );
  }
  setPortalOpen(canvas, portalNode, open) {
    const portalNodeData = portalNode.getData();
    portalNode.setData({
      ...portalNodeData,
      portalToFile: open ? portalNodeData.file : void 0
    });
    canvas.setData(canvas.getData());
  }
  onNodeRemoved(canvas, node) {
    var _a, _b, _c, _d;
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    Object.keys((_b = (_a = nodeData.portalIdMaps) == null ? void 0 : _a.nodeIdMap) != null ? _b : {}).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node2) => node2 !== void 0).forEach((node2) => canvas.removeNode(node2));
    Object.keys((_d = (_c = nodeData.portalIdMaps) == null ? void 0 : _c.edgeIdMap) != null ? _d : {}).map((refEdgeId) => canvas.edges.get(refEdgeId)).filter((edge) => edge !== void 0).forEach((edge) => canvas.removeEdge(edge));
  }
  onContainingNodesRequested(_canvas, _bbox, nodes) {
    nodes.splice(0, nodes.length, ...nodes.filter((node) => node.getData().portalId === void 0));
  }
  onSelectionChanged(canvas, oldSelection, updateSelection) {
    updateSelection(() => {
      const updatedSelection = Array.from(canvas.selection).filter((node) => node.getData().portalId === void 0);
      canvas.selection = new Set(updatedSelection);
    });
    const previouslySelectedPortalNodesIds = Array.from(oldSelection).filter((node) => node.getData().portalToFile !== void 0).flatMap((node) => {
      const portalNodeData = node.getData();
      const nestedPortalsIds = this.getNestedPortalsIds(canvas, portalNodeData.id);
      return [portalNodeData.id, ...nestedPortalsIds];
    });
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === void 0 || !previouslySelectedPortalNodesIds.includes(nodeData.portalId))
        continue;
      node.updateZIndex();
    }
  }
  getNestedPortalsIds(canvas, portalId) {
    const nestedPortalsIds = [];
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === portalId) {
        nestedPortalsIds.push(nodeData.id);
        nestedPortalsIds.push(...this.getNestedPortalsIds(canvas, nodeData.id));
      }
    }
    return nestedPortalsIds;
  }
  onDraggingStateChanged(canvas, startedDragging) {
    var _a;
    if (!canvas.getSelectionData().nodes.some((node) => node.type === "file" && node.portalToFile))
      return;
    if (startedDragging) {
      const objectSnappingEnabled = canvas.options.snapToObjects;
      this.restoreObjectSnappingState = () => canvas.toggleObjectSnapping(objectSnappingEnabled);
      if (objectSnappingEnabled)
        canvas.toggleObjectSnapping(false);
    } else
      (_a = this.restoreObjectSnappingState) == null ? void 0 : _a.call(this);
  }
  onNodeMoved(canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    this.onOpenPortalMoved(canvas, node);
  }
  onOpenPortalMoved(canvas, portalNode) {
    var _a;
    let portalNodeData = portalNode.getData();
    const nestedNodesIdMap = (_a = portalNode.getData().portalIdMaps) == null ? void 0 : _a.nodeIdMap;
    if (!nestedNodesIdMap)
      return;
    const nestedNodes = Object.keys(nestedNodesIdMap).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node) => node !== void 0);
    const sourceBBox = CanvasHelper.getBBox(nestedNodes);
    const targetSize = this.getPortalSize(sourceBBox);
    if (portalNodeData.width !== targetSize.width || portalNodeData.height !== targetSize.height) {
      portalNode.setData({
        ...portalNodeData,
        width: targetSize.width,
        height: targetSize.height
      });
      return;
    }
    const portalOffset = {
      x: portalNodeData.x - sourceBBox.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceBBox.minY + PORTAL_PADDING
    };
    for (const nestedNode of nestedNodes) {
      const nestedNodeData = nestedNode.getData();
      nestedNode.setData({
        ...nestedNodeData,
        x: nestedNodeData.x + portalOffset.x,
        y: nestedNodeData.y + portalOffset.y
      });
    }
  }
  removePortalCanvasData(_canvas, data) {
    var _a, _b;
    data.edges = data.edges.filter((edgeData) => {
      var _a2, _b2;
      if (edgeData.portalId !== void 0)
        return false;
      const fromNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.fromNode);
      const toNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.toNode);
      if (!fromNodeData || !toNodeData)
        return true;
      if (fromNodeData.portalId === void 0 && toNodeData.portalId === void 0) {
        return true;
      } else if (fromNodeData.portalId !== void 0 && toNodeData.portalId !== void 0) {
        return false;
      } else {
        const fromPortalNodeData = fromNodeData.portalId !== void 0 ? fromNodeData : toNodeData;
        const notFromPortalNodeData = fromNodeData.portalId !== void 0 ? toNodeData : fromNodeData;
        notFromPortalNodeData.edgesToNodeFromPortal = (_a2 = notFromPortalNodeData.edgesToNodeFromPortal) != null ? _a2 : {};
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId] = (_b2 = notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId]) != null ? _b2 : [];
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId].push(edgeData);
        return false;
      }
    });
    data.nodes = data.nodes.filter((nodeData) => nodeData.portalId === void 0);
    for (const portalNodeData of data.nodes) {
      if (portalNodeData.type !== "file")
        continue;
      if (this.plugin.settings.getSetting("maintainClosedPortalSize")) {
        portalNodeData.width = (_a = portalNodeData.closedPortalWidth) != null ? _a : portalNodeData.width;
        portalNodeData.height = (_b = portalNodeData.closedPortalHeight) != null ? _b : portalNodeData.height;
      }
      delete portalNodeData.closedPortalWidth;
      delete portalNodeData.closedPortalHeight;
      delete portalNodeData.portalIdMaps;
    }
  }
  async getCanvasDataWithPortals(canvas, dataRef) {
    const data = JSON.parse(JSON.stringify(dataRef));
    const addedData = await Promise.all(data.nodes.map((nodeData) => this.tryOpenPortal(canvas, nodeData)));
    for (const newData of addedData) {
      data.nodes.push(...newData.nodes);
      data.edges.push(...newData.edges);
    }
    for (const originNodeData of data.nodes) {
      if (originNodeData.edgesToNodeFromPortal === void 0)
        continue;
      for (const [relativePortalId, edges] of Object.entries(originNodeData.edgesToNodeFromPortal)) {
        const idPrefix = originNodeData.portalId ? `${originNodeData.portalId}-` : "";
        const portalId = `${idPrefix}${relativePortalId}`;
        const targetPortalData = data.nodes.find((nodeData) => nodeData.id === portalId);
        if (!targetPortalData) {
          delete originNodeData.edgesToNodeFromPortal[portalId];
          continue;
        }
        if (targetPortalData.portalToFile) {
          data.edges.push(...edges.map((edge) => ({
            ...edge,
            portalId: originNodeData.portalId,
            fromNode: `${idPrefix}${edge.fromNode}`,
            toNode: `${idPrefix}${edge.toNode}`
          })));
          delete originNodeData.edgesToNodeFromPortal[portalId];
        } else if (this.plugin.settings.getSetting("showEdgesIntoDisabledPortals")) {
          data.edges.push(...edges.map((edge) => {
            const fromNodeId = `${idPrefix}${edge.fromNode}`;
            const fromNode = data.nodes.find((nodeData) => nodeData.id === fromNodeId);
            const toNodeId = `${idPrefix}${edge.toNode}`;
            return {
              ...edge,
              fromNode: fromNode ? fromNodeId : portalId,
              toNode: fromNode ? portalId : toNodeId,
              portalId
              // Mark it as temporary
            };
          }));
        }
      }
      if (Object.keys(originNodeData.edgesToNodeFromPortal).length === 0)
        delete originNodeData.edgesToNodeFromPortal;
    }
    return data;
  }
  async tryOpenPortal(canvas, portalNodeData) {
    var _a, _b;
    const addedData = { nodes: [], edges: [] };
    if (portalNodeData.type !== "file" || !portalNodeData.portalToFile)
      return addedData;
    portalNodeData.portalToFile = portalNodeData.file;
    if (portalNodeData.portalToFile === canvas.view.file.path) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFile = this.plugin.app.vault.getAbstractFileByPath(portalNodeData.file);
    if (!(portalFile instanceof import_obsidian6.TFile) || portalFile.extension !== "canvas") {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFileDataString = await this.plugin.app.vault.cachedRead(portalFile);
    if (portalFileDataString === "")
      return addedData;
    const portalFileData = JSON.parse(portalFileDataString);
    if (!portalFileData) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    portalNodeData.portalIdMaps = {
      nodeIdMap: {},
      edgeIdMap: {}
    };
    const sourceMinCoordinates = CanvasHelper.getBBox(portalFileData.nodes);
    const portalOffset = {
      x: portalNodeData.x - sourceMinCoordinates.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceMinCoordinates.minY + PORTAL_PADDING
    };
    for (const nodeDataFromPortal of portalFileData.nodes) {
      const refNodeId = `${portalNodeData.id}-${nodeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.nodeIdMap[refNodeId] = nodeDataFromPortal.id;
      const addedNode = {
        ...nodeDataFromPortal,
        id: refNodeId,
        x: nodeDataFromPortal.x + portalOffset.x,
        y: nodeDataFromPortal.y + portalOffset.y,
        portalId: portalNodeData.id
      };
      addedData.nodes.push(addedNode);
      const nestedNodes = await this.tryOpenPortal(canvas, addedNode);
      addedData.nodes.push(...nestedNodes.nodes);
      addedData.edges.push(...nestedNodes.edges);
    }
    for (const edgeDataFromPortal of portalFileData.edges) {
      const refEdgeId = `${portalNodeData.id}-${edgeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.edgeIdMap[refEdgeId] = edgeDataFromPortal.id;
      const fromRefNode = (_a = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.fromNode)) == null ? void 0 : _a[0];
      const toRefNode = (_b = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.toNode)) == null ? void 0 : _b[0];
      if (!fromRefNode || !toRefNode)
        continue;
      addedData.edges.push({
        ...edgeDataFromPortal,
        id: refEdgeId,
        fromNode: fromRefNode,
        toNode: toRefNode,
        portalId: portalNodeData.id
      });
    }
    const nestedNodesBBox = CanvasHelper.getBBox(addedData.nodes);
    const targetSize = this.getPortalSize(nestedNodesBBox);
    portalNodeData.closedPortalWidth = portalNodeData.width;
    portalNodeData.closedPortalHeight = portalNodeData.height;
    portalNodeData.width = targetSize.width;
    portalNodeData.height = targetSize.height;
    return addedData;
  }
  getPortalSize(sourceBBox) {
    const sourceSize = {
      width: sourceBBox.maxX - sourceBBox.minX,
      height: sourceBBox.maxY - sourceBBox.minY
    };
    const targetSize = {
      width: Math.max(sourceSize.width + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.width),
      height: Math.max(sourceSize.height + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.height)
    };
    if (!Number.isFinite(targetSize.width))
      targetSize.width = MIN_OPEN_PORTAL_SIZE.width;
    if (!Number.isFinite(targetSize.height))
      targetSize.height = MIN_OPEN_PORTAL_SIZE.height;
    return targetSize;
  }
};

// src/canvas-extensions/better-default-settings-canvas-extension.ts
var BetterDefaultSettingsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.modifyCanvasSettings(this.plugin.getCurrentCanvas());
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.modifyCanvasSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.modifyCanvasSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DoubleClick,
      (canvas, event, preventDefault) => this.onDoubleClick(canvas, event, preventDefault)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeCreated,
      (canvas, node) => this.applyDefaultNodeStyles(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCreated,
      (canvas, edge) => this.applyDefaultEdgeStyles(canvas, edge)
    ));
  }
  modifyCanvasSettings(canvas) {
    if (!canvas)
      return;
    canvas.config.defaultTextNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultTextNodeWidth"),
      height: this.plugin.settings.getSetting("defaultTextNodeHeight")
    };
    canvas.config.defaultFileNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultFileNodeWidth"),
      height: this.plugin.settings.getSetting("defaultFileNodeHeight")
    };
  }
  async onDoubleClick(canvas, event, preventDefault) {
    if (event.defaultPrevented || event.target !== canvas.wrapperEl || canvas.isDragging || canvas.readonly)
      return;
    preventDefault.value = true;
    let pos = canvas.posFromEvt(event);
    switch (this.plugin.settings.getSetting("nodeTypeOnDoubleClick")) {
      case "file":
        const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
        if (this.plugin.settings.getSetting("alignDoubleClickedNodeToGrid"))
          pos = {
            x: Math.round((pos.x - canvas.config.defaultFileNodeDimensions.width / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultFileNodeDimensions.width / 2,
            y: Math.round((pos.y - canvas.config.defaultFileNodeDimensions.height / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultFileNodeDimensions.height / 2
          };
        canvas.createFileNode({
          pos,
          position: "center",
          file
        });
        break;
      default:
        if (this.plugin.settings.getSetting("alignDoubleClickedNodeToGrid"))
          pos = {
            x: Math.round((pos.x - canvas.config.defaultTextNodeDimensions.width / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultTextNodeDimensions.width / 2,
            y: Math.round((pos.y - canvas.config.defaultTextNodeDimensions.height / 2) / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE + canvas.config.defaultTextNodeDimensions.height / 2
          };
        canvas.createTextNode({
          pos,
          position: "center"
        });
        break;
    }
  }
  applyDefaultNodeStyles(_canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "text")
      return;
    node.setData({
      ...nodeData,
      styleAttributes: {
        ...nodeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultTextNodeStyleAttributes")
      }
    });
  }
  applyDefaultEdgeStyles(_canvas, edge) {
    const edgeData = edge.getData();
    edge.setData({
      ...edgeData,
      styleAttributes: {
        ...edgeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultEdgeStyleAttributes")
      }
    });
  }
};

// src/canvas-extensions/color-palette-canvas-extension.ts
var DEFAULT_COLORS_COUNT = 6;
var CUSTOM_COLORS_MOD_STYLES_ID = "mod-custom-colors";
var ColorPaletteCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.observer = null;
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, _window) => this.updateCustomColorModStyleClasses()
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "css-change",
      () => this.updateCustomColorModStyleClasses()
    ));
    this.updateCustomColorModStyleClasses();
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.patchColorSelection(canvas)
    ));
    this.plugin.register(() => {
      var _a;
      return (_a = this.observer) == null ? void 0 : _a.disconnect();
    });
  }
  updateCustomColorModStyleClasses() {
    var _a;
    const customCss = this.getCustomColors().map((colorId) => `
      .mod-canvas-color-${colorId} {
        --canvas-color: var(--canvas-color-${colorId});
      }
    `).join("");
    for (const win of this.plugin.windowsManager.windows) {
      const doc = win.document;
      (_a = doc.getElementById(CUSTOM_COLORS_MOD_STYLES_ID)) == null ? void 0 : _a.remove();
      const customColorModStyle = doc.createElement("style");
      customColorModStyle.id = CUSTOM_COLORS_MOD_STYLES_ID;
      doc.head.appendChild(customColorModStyle);
      customColorModStyle.textContent = customCss;
    }
  }
  patchColorSelection(canvas) {
    if (this.observer)
      this.observer.disconnect();
    this.observer = new MutationObserver((mutations) => {
      const colorMenuOpened = mutations.some(
        (mutation) => Object.values(mutation.addedNodes).some(
          (node) => node instanceof HTMLElement && node.classList.contains("canvas-submenu") && Object.values(node.childNodes).some(
            (node2) => node2 instanceof HTMLElement && node2.classList.contains("canvas-color-picker-item")
          )
        )
      );
      if (!colorMenuOpened)
        return;
      const submenu = canvas.menu.menuEl.querySelector(".canvas-submenu");
      if (!submenu)
        return;
      const currentNodeColor = canvas.getSelectionData().nodes.map((node) => node.color).last();
      for (const colorId of this.getCustomColors()) {
        const customColorMenuItem = this.createColorMenuItem(canvas, colorId);
        if (currentNodeColor === colorId)
          customColorMenuItem.classList.add("is-active");
        submenu.insertBefore(customColorMenuItem, submenu.lastChild);
      }
    });
    this.observer.observe(canvas.menu.menuEl, { childList: true });
  }
  createColorMenuItem(canvas, colorId) {
    const menuItem = document.createElement("div");
    menuItem.classList.add("canvas-color-picker-item");
    menuItem.classList.add(`mod-canvas-color-${colorId}`);
    menuItem.addEventListener("click", () => {
      menuItem.classList.add("is-active");
      for (const item of canvas.selection) {
        item.setColor(colorId);
      }
      canvas.requestSave();
    });
    return menuItem;
  }
  getCustomColors() {
    const colors = [];
    while (true) {
      const colorId = (DEFAULT_COLORS_COUNT + colors.length + 1).toString();
      if (!getComputedStyle(document.body).getPropertyValue(`--canvas-color-${colorId}`))
        break;
      colors.push(colorId);
    }
    return colors;
  }
};

// src/canvas-extensions/collapsible-groups-canvas-extension.ts
var import_obsidian7 = require("obsidian");
var COLLAPSE_BUTTON_ID = "group-collapse-button";
var CollapsibleGroupsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "collapsibleGroupsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (canvas, node) => this.onNodeChanged(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeBBoxRequested,
      (canvas, node, bbox) => this.onNodeBBoxRequested(canvas, node, bbox)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (_canvas, data) => this.expandCollapsedNodes(data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (_canvas, data, _setData) => this.collapseNodes(data)
    ));
  }
  onNodeChanged(canvas, groupNode) {
    var _a, _b;
    const groupNodeData = groupNode.getData();
    if (groupNodeData.type !== "group")
      return;
    (_a = groupNode.nodeEl) == null ? void 0 : _a.querySelectorAll(`#${COLLAPSE_BUTTON_ID}`).forEach((el) => el.remove());
    const collapseButton = document.createElement("span");
    collapseButton.id = COLLAPSE_BUTTON_ID;
    (0, import_obsidian7.setIcon)(collapseButton, groupNodeData.isCollapsed ? "plus-circle" : "minus-circle");
    collapseButton.onclick = () => {
      this.setCollapsed(canvas, groupNode, groupNode.getData().isCollapsed ? void 0 : true);
    };
    (_b = groupNode.labelEl) == null ? void 0 : _b.insertAdjacentElement("afterend", collapseButton);
  }
  setCollapsed(canvas, groupNode, collapsed) {
    groupNode.setData({ ...groupNode.getData(), isCollapsed: collapsed });
    canvas.setData(canvas.getData());
  }
  onNodeBBoxRequested(_canvas, node, bbox) {
    var _a, _b;
    const nodeData = node.getData();
    if (nodeData.type !== "group" || !nodeData.isCollapsed)
      return;
    bbox.maxX = bbox.minX + ((_b = (_a = node.nodeEl) == null ? void 0 : _a.getBoundingClientRect().width) != null ? _b : 0);
    bbox.maxY = bbox.minY;
  }
  expandCollapsedNodes(data) {
    data.nodes = data.nodes.flatMap((groupNodeData) => {
      const collapsedData = groupNodeData.collapsedData;
      if (collapsedData === void 0)
        return [groupNodeData];
      groupNodeData.collapsedData = void 0;
      data.edges.push(...collapsedData.edges);
      return [groupNodeData, ...collapsedData.nodes.map((nodeData) => ({
        ...nodeData,
        // Restore the relative position of the node to the group
        x: nodeData.x + groupNodeData.x,
        y: nodeData.y + groupNodeData.y
      }))];
    });
  }
  collapseNodes(data) {
    data.nodes.forEach((groupNodeData) => {
      if (!groupNodeData.isCollapsed)
        return;
      const groupNodeBBox = CanvasHelper.getBBox([groupNodeData]);
      const containedNodesData = data.nodes.filter(
        (nodeData) => nodeData.id !== groupNodeData.id && BBoxHelper.insideBBox(CanvasHelper.getBBox([nodeData]), groupNodeBBox, false)
      );
      const containedEdgesData = data.edges.filter((edgeData) => {
        return containedNodesData.some((nodeData) => nodeData.id === edgeData.fromNode) || containedNodesData.some((nodeData) => nodeData.id === edgeData.toNode);
      });
      data.nodes = data.nodes.filter((nodeData) => !containedNodesData.includes(nodeData));
      data.edges = data.edges.filter((edgeData) => !containedEdgesData.includes(edgeData));
      groupNodeData.collapsedData = {
        nodes: containedNodesData.map((nodeData) => ({
          ...nodeData,
          // Store the relative position of the node to the group
          x: nodeData.x - groupNodeData.x,
          y: nodeData.y - groupNodeData.y
        })),
        edges: containedEdgesData
      };
    });
  }
};

// src/canvas-extensions/properties-canvas-extension.ts
var import_obsidian8 = require("obsidian");
var PropertiesCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.previousCssclasses = [];
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
  }
  onCanvasChanged(canvas) {
    var _a;
    this.updateCssClasses(canvas);
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addQuickSettingsButton(
      settingsContainer,
      CanvasHelper.createQuickSettingsButton({
        id: "properties",
        label: "Properties",
        icon: "settings-2",
        callback: () => this.openPropertiesDialog(canvas)
      })
    );
  }
  updateCssClasses(canvas) {
    var _a, _b;
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.remove(cssclass);
    });
    this.previousCssclasses = ((_b = (_a = canvas.metadata) == null ? void 0 : _a.properties) == null ? void 0 : _b.cssclasses) || [];
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.add(cssclass);
    });
  }
  async openPropertiesDialog(canvas) {
    await new PropertiesModal(this.plugin.app, canvas).awaitDialog();
    this.updateCssClasses(canvas);
  }
};
var PropertiesModal = class extends import_obsidian8.Modal {
  constructor(app, canvas) {
    super(app);
    this.canvas = canvas;
  }
  onOpen() {
    new import_obsidian8.Setting(this.contentEl).setHeading().setName("Properties");
    new import_obsidian8.Setting(this.contentEl).setClass("properties-field").setName("cssclasses").setTooltip("Add classes to the canvas wrapper element. Separate multiple classes with spaces.").addText(
      (text) => {
        var _a, _b;
        return text.setValue((_b = (_a = this.canvas.metadata.properties) == null ? void 0 : _a.cssclasses) == null ? void 0 : _b.join(" ")).onChange((value) => {
          var _a2, _b2;
          this.canvas.metadata.properties = (_b2 = (_a2 = this.canvas.metadata) == null ? void 0 : _a2.properties) != null ? _b2 : {};
          this.canvas.metadata.properties.cssclasses = value.split(" ");
        });
      }
    );
  }
  onClose() {
  }
  awaitDialog() {
    return new Promise((resolve) => {
      this.onClose = () => {
        this.contentEl.empty();
        resolve();
      };
      this.open();
    });
  }
};

// src/canvas-extensions/advanced-styles/node-styles.ts
var NodeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "nodeStylingFeatureEnabled";
  }
  init() {
    this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectionNodeData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectionNodeData.length === 0 || selectionNodeData.length !== canvas.selection.size)
      return;
    const selectedNodeTypes = new Set(selectionNodeData.map((node) => node.type));
    const availableNodeStyles = this.allNodeStyles.filter((style) => !style.nodeTypes || style.nodeTypes.some((type) => selectedNodeTypes.has(type)));
    CanvasHelper.createStyleDropdownMenu(
      canvas,
      availableNodeStyles,
      (_a = selectionNodeData[0].styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectionNodeData = canvas.getSelectionData().nodes;
    for (const nodeData of selectionNodeData) {
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        continue;
      if (attribute.nodeTypes && !attribute.nodeTypes.includes(nodeData.type))
        continue;
      node.setData({
        ...nodeData,
        styleAttributes: {
          ...nodeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/edge-pathfinding-method.ts
var EdgePathfindingMethod = class {
};

// src/utils/svg-path-helper.ts
var SvgPathHelper = class {
  static pathArrayToSvgPath(positions, rounded = false) {
    const tension = 0.2;
    let newPositions = [...positions];
    if (rounded && positions.length > 2) {
      newPositions = [positions[0]];
      for (let i = 1; i < positions.length - 2; i++) {
        const p1 = positions[i];
        const p2 = positions[i + 1];
        const p3 = positions[i + 2];
        const t1 = (1 - tension) / 2;
        const t2 = 1 - t1;
        const x = t2 * t2 * t2 * p1.x + 3 * t2 * t2 * t1 * p2.x + 3 * t2 * t1 * t1 * p3.x + t1 * t1 * t1 * p2.x;
        const y = t2 * t2 * t2 * p1.y + 3 * t2 * t2 * t1 * p2.y + 3 * t2 * t1 * t1 * p3.y + t1 * t1 * t1 * p2.y;
        newPositions.push({ x, y });
      }
      const lastPoint = positions[positions.length - 1];
      newPositions.push(lastPoint);
    }
    for (let i = 0; i < newPositions.length - 2; i++) {
      const p1 = newPositions[i];
      const p2 = newPositions[i + 1];
      const p3 = newPositions[i + 2];
      const currentDirection = {
        x: p2.x - p1.x,
        y: p2.y - p1.y
      };
      const nextDirection = {
        x: p3.x - p2.x,
        y: p3.y - p2.y
      };
      if (currentDirection.x !== nextDirection.x && currentDirection.y !== nextDirection.y)
        continue;
      newPositions.splice(i + 1, 1);
      i--;
    }
    return newPositions.map(
      (position, index) => `${index === 0 ? "M" : "L"} ${position.x} ${position.y}`
    ).join(" ");
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-direct.ts
var EdgePathfindingDirect = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, _fromBBoxSidePos, _fromSide, toPos, _toBBoxSidePos, _toSide, _isDragging) {
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath([fromPos, toPos], false),
      center: {
        x: (fromPos.x + toPos.x) / 2,
        y: (fromPos.y + toPos.y) / 2
      },
      rotateArrows: true
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-square.ts
var EdgePathfindingSquare = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, fromBBoxSidePos, fromSide, toPos, toBBoxSidePos, toSide, _isDragging) {
    let pathArray = [];
    let center = { x: 0, y: 0 };
    if (fromSide === toSide) {
      const direction = BBoxHelper.direction(fromSide);
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: fromBBoxSidePos.y },
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          { x: toBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          toPos
        ];
      }
      center = {
        x: (pathArray[1].x + pathArray[2].x) / 2,
        y: (pathArray[1].y + pathArray[2].y) / 2
      };
    } else if (BBoxHelper.isHorizontal(fromSide) === BBoxHelper.isHorizontal(toSide)) {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: fromBBoxSidePos.y },
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          toPos
        ];
      }
      center = {
        x: (fromBBoxSidePos.x + toBBoxSidePos.x) / 2,
        y: (fromBBoxSidePos.y + toBBoxSidePos.y) / 2
      };
    } else {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: toBBoxSidePos.y },
          toPos
        ];
      }
      center = {
        x: pathArray[1].x,
        y: pathArray[1].y
      };
    }
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath(pathArray, false),
      center,
      rotateArrows: false
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-a-star.ts
var DIRECTIONS2 = [
  { dx: 1, dy: 0 },
  { dx: -1, dy: 0 },
  { dx: 0, dy: 1 },
  { dx: 0, dy: -1 },
  { dx: 1, dy: 1 },
  { dx: -1, dy: 1 },
  { dx: 1, dy: -1 },
  { dx: -1, dy: -1 }
];
var DIAGONAL_COST = Math.sqrt(2);
var Node = class {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.gCost = 0;
    this.hCost = 0;
    this.fCost = 0;
    this.parent = null;
  }
  // Only check for x and y, not gCost, hCost, fCost, or parent
  inList(nodes) {
    return nodes.some((n) => n.x === this.x && n.y === this.y);
  }
};
var EdgePathfindingAStar = class extends EdgePathfindingMethod {
  getPath(plugin, canvas, fromPos, _fromBBoxSidePos, fromSide, toPos, _toBBoxSidePos, toSide, isDragging) {
    if (isDragging && !plugin.settings.getSetting("edgeStylePathfinderPathLiveUpdate"))
      return null;
    const nodeBBoxes = [...canvas.nodes.values()].filter((node) => {
      const nodeData = node.getData();
      const isGroup = nodeData.type === "group";
      const isOpenPortal = nodeData.portalToFile !== void 0;
      return !isGroup && !isOpenPortal;
    }).map((node) => node.getBBox());
    const fromPosWithMargin = BBoxHelper.moveInDirection(fromPos, fromSide, 10);
    const toPosWithMargin = BBoxHelper.moveInDirection(toPos, toSide, 10);
    const gridResolution = plugin.settings.getSetting("edgeStylePathfinderGridResolution");
    const pathArray = this.aStarAlgorithm(fromPosWithMargin, fromSide, toPosWithMargin, toSide, nodeBBoxes, gridResolution);
    if (!pathArray)
      return null;
    pathArray.splice(0, 0, fromPos);
    pathArray.splice(pathArray.length, 0, toPos);
    const roundedPath = plugin.settings.getSetting("edgeStylePathfinderPathRounded");
    const svgPath = SvgPathHelper.pathArrayToSvgPath(pathArray, roundedPath);
    return {
      svgPath,
      center: pathArray[Math.floor(pathArray.length / 2)],
      rotateArrows: false
    };
  }
  aStarAlgorithm(fromPos, fromSide, toPos, toSide, obstacles, gridResolution) {
    const start = new Node(
      Math.floor(fromPos.x / gridResolution) * gridResolution,
      Math.floor(fromPos.y / gridResolution) * gridResolution
    );
    if (fromSide === "right" && fromPos.x !== start.x)
      start.x += gridResolution;
    if (fromSide === "bottom" && fromPos.y !== start.y)
      start.y += gridResolution;
    const end = new Node(
      Math.floor(toPos.x / gridResolution) * gridResolution,
      Math.floor(toPos.y / gridResolution) * gridResolution
    );
    if (toSide === "right" && toPos.x !== end.x)
      end.x += gridResolution;
    if (toSide === "bottom" && toPos.y !== end.y)
      end.y += gridResolution;
    if (this.isInsideObstacle(start, obstacles) || this.isInsideObstacle(end, obstacles))
      return null;
    const openSet = [start];
    const closedSet = [];
    while (openSet.length > 0) {
      let current = null;
      let lowestFCost = Infinity;
      for (const node of openSet) {
        if (node.fCost < lowestFCost) {
          current = node;
          lowestFCost = node.fCost;
        }
      }
      if (!current)
        return null;
      openSet.splice(openSet.indexOf(current), 1);
      closedSet.push(current);
      if (current.x === end.x && current.y === end.y) {
        return [fromPos, ...this.reconstructPath(current), toPos].map((node) => ({ x: node.x, y: node.y }));
      }
      if (!(current.x === start.x && current.y === start.y) && this.isTouchingObstacle(current, obstacles))
        continue;
      for (const neighbor of this.getPossibleNeighbors(current, obstacles, gridResolution)) {
        if (neighbor.inList(closedSet))
          continue;
        const tentativeGCost = current.gCost + this.getMovementCost({
          dx: neighbor.x - current.x,
          dy: neighbor.y - current.y
        });
        if (!neighbor.inList(openSet) || tentativeGCost < neighbor.gCost) {
          neighbor.parent = current;
          neighbor.gCost = tentativeGCost;
          neighbor.hCost = this.heuristic(neighbor, end);
          neighbor.fCost = neighbor.gCost + neighbor.hCost;
          openSet.push(neighbor);
        }
      }
    }
    return null;
  }
  // Manhattan distance
  heuristic(node, end) {
    return Math.abs(node.x - end.x) + Math.abs(node.y - end.y);
  }
  // Define a function to check if a position isn't inside any obstacle
  isTouchingObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, true));
  }
  isInsideObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, false));
  }
  // Define a function to calculate movement cost based on direction
  getMovementCost(direction) {
    return direction.dx !== 0 && direction.dy !== 0 ? DIAGONAL_COST : 1;
  }
  getPossibleNeighbors(node, obstacles, gridResolution) {
    const neighbors = [];
    for (const direction of DIRECTIONS2) {
      const neighbor = new Node(
        node.x + direction.dx * gridResolution,
        node.y + direction.dy * gridResolution
      );
      neighbor.gCost = node.gCost + this.getMovementCost(direction);
      if (this.isInsideObstacle(neighbor, obstacles))
        continue;
      neighbors.push(neighbor);
    }
    return neighbors;
  }
  reconstructPath(node) {
    const path = [];
    while (node) {
      path.push(node);
      node = node.parent;
    }
    return path.reverse();
  }
};

// src/canvas-extensions/advanced-styles/edge-styles.ts
var EDGE_PATHFINDING_METHODS = {
  "direct": EdgePathfindingDirect,
  "square": EdgePathfindingSquare,
  "a-star": EdgePathfindingAStar
};
var EdgeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "edgesStylingFeatureEnabled";
  }
  init() {
    this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (canvas, edge) => this.onEdgeChanged(canvas, edge)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCenterRequested,
      (canvas, edge, center) => this.onEdgeCenterRequested(canvas, edge, center)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, isDragging) => {
        if (isDragging)
          return;
        this.updateAllEdges(canvas);
      }
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    if (canvas.readonly || selectedEdges.length === 0 || selectedEdges.length !== canvas.selection.size)
      return;
    CanvasHelper.createStyleDropdownMenu(
      canvas,
      this.allEdgeStyleAttributes,
      (_a = selectedEdges[0].getData().styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    for (const edge of selectedEdges) {
      const edgeData = edge.getData();
      edge.setData({
        ...edgeData,
        styleAttributes: {
          ...edgeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
  updateAllEdges(canvas) {
    for (const edge of canvas.edges.values()) {
      this.onEdgeChanged(canvas, edge);
    }
  }
  onEdgeChanged(canvas, edge) {
    var _a, _b, _c, _d, _e, _f, _g;
    const edgeData = edge.getData();
    if (!edge.bezier)
      return;
    edge.center = void 0;
    edge.updatePath();
    const pathfindingMethod = (_a = edgeData.styleAttributes) == null ? void 0 : _a.pathfindingMethod;
    if (pathfindingMethod) {
      const fromBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.from.node.getBBox(), edge.from.side);
      const fromPos = edge.from.end === "none" ? fromBBoxSidePos : edge.bezier.from;
      const toBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.to.node.getBBox(), edge.to.side);
      const toPos = edge.to.end === "none" ? toBBoxSidePos : edge.bezier.to;
      const path = new EDGE_PATHFINDING_METHODS[pathfindingMethod]().getPath(this.plugin, canvas, fromPos, fromBBoxSidePos, edge.from.side, toPos, toBBoxSidePos, edge.to.side, canvas.isDragging);
      if (!path)
        return;
      edge.center = path.center;
      edge.path.interaction.setAttr("d", path == null ? void 0 : path.svgPath);
      edge.path.display.setAttr("d", path == null ? void 0 : path.svgPath);
    }
    (_b = edge.labelElement) == null ? void 0 : _b.render();
    const arrowPolygonPoints = this.getArrowPolygonPoints((_c = edgeData.styleAttributes) == null ? void 0 : _c.arrow);
    if ((_d = edge.fromLineEnd) == null ? void 0 : _d.el)
      (_e = edge.fromLineEnd.el.querySelector("polygon")) == null ? void 0 : _e.setAttribute("points", arrowPolygonPoints);
    if ((_f = edge.toLineEnd) == null ? void 0 : _f.el)
      (_g = edge.toLineEnd.el.querySelector("polygon")) == null ? void 0 : _g.setAttribute("points", arrowPolygonPoints);
    if (this.plugin.settings.getSetting("edgeStyleDirectRotateArrow")) {
      this.rotateArrows(edge, pathfindingMethod);
    }
  }
  onEdgeCenterRequested(_canvas, edge, center) {
    var _a, _b, _c, _d;
    center.x = (_b = (_a = edge.center) == null ? void 0 : _a.x) != null ? _b : center.x;
    center.y = (_d = (_c = edge.center) == null ? void 0 : _c.y) != null ? _d : center.y;
  }
  getArrowPolygonPoints(arrowStyle) {
    if (arrowStyle === "halved-triangle")
      return `-2,0 7.5,12 -2,12`;
    else if (arrowStyle === "thin-triangle")
      return `0,0 7,10 0,0 0,10 0,0 -7,10`;
    else if (arrowStyle === "diamond" || arrowStyle === "diamond-outline")
      return `0,0 5,10 0,20 -5,10`;
    else if (arrowStyle === "circle" || arrowStyle === "circle-outline")
      return `0 0, 4.95 1.8, 7.5 6.45, 6.6 11.7, 2.7 15, -2.7 15, -6.6 11.7, -7.5 6.45, -4.95 1.8`;
    else
      return `0,0 6.5,10.4 -6.5,10.4`;
  }
  rotateArrows(edge, pathRouteType) {
    var _a, _b, _c, _d;
    if (pathRouteType !== "direct") {
      if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
        edge.fromLineEnd.el.style.translate = "";
      if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
        edge.toLineEnd.el.style.translate = "";
      return;
    }
    const setArrowRotation = (element, side, rotation) => {
      element.style.transform = element.style.transform.replace(/rotate\([-\d]+(deg|rad)\)/g, `rotate(${rotation}rad)`);
      const offset = BBoxHelper.getSideVector(side);
      element.style.translate = `${offset.x * 7}px ${offset.y * -7}px`;
    };
    const edgeRotation = Math.atan2(edge.bezier.to.y - edge.bezier.from.y, edge.bezier.to.x - edge.bezier.from.x) - Math.PI / 2;
    if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
      setArrowRotation(edge.fromLineEnd.el, edge.from.side, edgeRotation);
    if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
      setArrowRotation(edge.toLineEnd.el, edge.to.side, edgeRotation - Math.PI);
  }
};

// src/canvas-extensions/dataset-exposers/node-exposer.ts
function getExposedNodeData(settings) {
  const exposedData = [];
  if (settings.getSetting("nodeStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  if (settings.getSetting("collapsibleGroupsFeatureEnabled"))
    exposedData.push("isCollapsed");
  if (settings.getSetting("presentationFeatureEnabled"))
    exposedData.push("isStartNode");
  if (settings.getSetting("portalsFeatureEnabled"))
    exposedData.push("portalToFile", "portalId");
  return exposedData;
}
var NodeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value)
              delete node.nodeEl.dataset[key];
            else
              node.nodeEl.dataset[key] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/node-interaction-exposer.ts
var TARGET_NODE_DATASET_PREFIX = "target";
var NodeInteractionExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeInteraction,
      (canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        const interactionEl = canvas.nodeInteractionLayer.interactionEl;
        if (!interactionEl)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            const modifiedKey = TARGET_NODE_DATASET_PREFIX + key.toString().charAt(0).toUpperCase() + key.toString().slice(1);
            if (!value)
              delete interactionEl.dataset[modifiedKey];
            else
              interactionEl.dataset[modifiedKey] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/edge-exposer.ts
function getExposedEdgeData(settings) {
  const exposedData = [];
  if (settings.getSetting("edgesStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  return exposedData;
}
var EdgeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, edge) => {
        var _a, _b, _c, _d;
        const edgeData = edge == null ? void 0 : edge.getData();
        if (!edgeData)
          return;
        for (const exposedDataKey of getExposedEdgeData(this.plugin.settings)) {
          const datasetPairs = edgeData[exposedDataKey] instanceof Object ? Object.entries(edgeData[exposedDataKey]) : [[exposedDataKey, edgeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value) {
              delete edge.path.display.dataset[key];
              if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
                delete edge.fromLineEnd.el.dataset[key];
              if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
                delete edge.toLineEnd.el.dataset[key];
            } else {
              edge.path.display.dataset[key] = value;
              if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
                edge.fromLineEnd.el.dataset[key] = value;
              if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
                edge.toLineEnd.el.dataset[key] = value;
            }
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/canvas-wrapper-exposer.ts
var EXPOSED_SETTINGS = [
  "performanceOptimizationEnabled",
  "collapsibleGroupsFeatureEnabled",
  "collapsedGroupPreviewOnDrag"
];
var CanvasWrapperExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.updateExposedSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.updateExposedSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, dragging) => {
        if (dragging)
          canvas.wrapperEl.dataset.isDragging = "true";
        else
          delete canvas.wrapperEl.dataset.isDragging;
      }
    ));
  }
  updateExposedSettings(canvas) {
    if (!canvas)
      return;
    for (const setting of EXPOSED_SETTINGS) {
      canvas.wrapperEl.dataset[setting] = this.plugin.settings.getSetting(setting).toString();
    }
  }
};

// src/utils/migration-helper.ts
var MigrationHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async migrate() {
    this.migrateNodeAndEdgeStyles();
  }
  migrateNodeAndEdgeStyles() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        for (const node of canvas.nodes.values()) {
          const nodeData = node.getData();
          const newStyleAttributes = {};
          if (nodeData.isSticker)
            newStyleAttributes["border"] = "invisible";
          if (nodeData.borderStyle)
            newStyleAttributes["border"] = nodeData.borderStyle;
          if (nodeData.shape) {
            newStyleAttributes.textAlign = "center";
            newStyleAttributes.shape = nodeData.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "centered-rectangle")
              delete newStyleAttributes.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "oval")
              newStyleAttributes.shape = "pill";
          }
          delete nodeData.isSticker;
          delete nodeData.borderStyle;
          delete nodeData.shape;
          node.setData({
            ...nodeData,
            styleAttributes: {
              ...nodeData.styleAttributes,
              ...newStyleAttributes
            }
          });
        }
        for (const edge of canvas.edges.values()) {
          const edgeData = edge.getData();
          const newStyleAttributes = {};
          if (edgeData.edgeStyle)
            newStyleAttributes.edge = edgeData.edgeStyle;
          if (edgeData.edgePathRoute)
            newStyleAttributes.pathfindingMethod = edgeData.edgePathRoute;
          delete edgeData.edgeStyle;
          delete edgeData.edgePathRoute;
        }
      }
    ));
  }
};

// src/main.ts
var CANVAS_EXTENSIONS = [
  // Dataset Exposers
  CanvasWrapperExposerExtension,
  NodeExposerExtension,
  EdgeExposerExtension,
  NodeInteractionExposerExtension,
  // Advanced Styles
  NodeStylesExtension,
  EdgeStylesExtension,
  // Basic Extensions
  BetterDefaultSettingsCanvasExtension,
  CommandsCanvasExtension,
  PropertiesCanvasExtension,
  BetterReadonlyCanvasExtension,
  GroupCanvasExtension,
  // More Advanced Extensions
  CollapsibleGroupsCanvasExtension,
  EncapsulateCanvasExtension,
  ColorPaletteCanvasExtension,
  PresentationCanvasExtension,
  PortalsCanvasExtension
];
var AdvancedCanvasPlugin = class extends import_obsidian9.Plugin {
  async onload() {
    this.migrationHelper = new MigrationHelper(this);
    await this.migrationHelper.migrate();
    IconsHelper.addIcons();
    this.settings = new SettingsManager(this);
    await this.settings.loadSettings();
    this.settings.addSettingsTab();
    this.windowsManager = new WindowsManager(this);
    this.canvasPatcher = new CanvasPatcher(this);
    this.canvasExtensions = CANVAS_EXTENSIONS.map((Extension) => new Extension(this));
  }
  onunload() {
  }
  getCurrentCanvasView() {
    const canvasView = this.app.workspace.getActiveViewOfType(import_obsidian9.ItemView);
    if ((canvasView == null ? void 0 : canvasView.getViewType()) !== "canvas")
      return null;
    return canvasView;
  }
  getCurrentCanvas() {
    var _a;
    return ((_a = this.getCurrentCanvasView()) == null ? void 0 : _a.canvas) || null;
  }
  createFileSnapshot(path, content) {
    var _a;
    const fileRecoveryPlugin = (_a = this.app.internalPlugins.plugins["file-recovery"]) == null ? void 0 : _a.instance;
    if (!fileRecoveryPlugin)
      return;
    fileRecoveryPlugin.forceAdd(path, content);
  }
  // this.app.plugins.plugins["advanced-canvas"].enableDebugMode()
  enableDebugMode() {
    if (this.debugHelper)
      return;
    this.debugHelper = new DebugHelper(this);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy91dGlscy9wYXRjaC1oZWxwZXIudHMiLCAic3JjL2NvcmUvZXZlbnRzLnRzIiwgIm5vZGVfbW9kdWxlcy90aW55LWpzb25jL2Rpc3QvaW5kZXguanMiLCAic3JjL2NvcmUvY2FudmFzLXBhdGNoZXIudHMiLCAic3JjL3V0aWxzL2ljb25zLWhlbHBlci50cyIsICJzcmMvdXRpbHMvZGVidWctaGVscGVyLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZy50cyIsICJzcmMvd2luZG93cy1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy9jYW52YXMtaGVscGVyLnRzIiwgInNyYy91dGlscy9iYm94LWhlbHBlci50cyIsICJzcmMvY29yZS9jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9ncm91cC1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9wcmVzZW50YXRpb24tY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLXJlYWRvbmx5LWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL3V0aWxzL21vZGFsLWhlbHBlci50cyIsICJzcmMvdXRpbHMvcGF0aC1oZWxwZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2VuY2Fwc3VsYXRlLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2NvbW1hbmRzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL3BvcnRhbHMtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLWRlZmF1bHQtc2V0dGluZ3MtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvY29sb3ItcGFsZXR0ZS1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9jb2xsYXBzaWJsZS1ncm91cHMtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvcHJvcGVydGllcy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvbm9kZS1zdHlsZXMudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvZWRnZS1wYXRoZmluZGluZy1tZXRob2QudHMiLCAic3JjL3V0aWxzL3N2Zy1wYXRoLWhlbHBlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1kaXJlY3QudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctc3F1YXJlLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLWEtc3Rhci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2Utc3R5bGVzLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtZXhwb3Nlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9ub2RlLWludGVyYWN0aW9uLWV4cG9zZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvZWRnZS1leHBvc2VyLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL2NhbnZhcy13cmFwcGVyLWV4cG9zZXIudHMiLCAic3JjL3V0aWxzL21pZ3JhdGlvbi1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEl0ZW1WaWV3LCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbidcclxuaW1wb3J0IENhbnZhc1BhdGNoZXIgZnJvbSAnLi9jb3JlL2NhbnZhcy1wYXRjaGVyJ1xyXG5pbXBvcnQgeyBDYW52YXMsIENhbnZhc1ZpZXcgfSBmcm9tICcuL0B0eXBlcy9DYW52YXMnXHJcblxyXG4vLyBVdGlsc1xyXG5pbXBvcnQgSWNvbnNIZWxwZXIgZnJvbSAnLi91dGlscy9pY29ucy1oZWxwZXInXHJcbmltcG9ydCBEZWJ1Z0hlbHBlciBmcm9tICcuL3V0aWxzL2RlYnVnLWhlbHBlcidcclxuXHJcbi8vIE1hbmFnZXJzXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSAnLi9zZXR0aW5ncydcclxuaW1wb3J0IFdpbmRvd3NNYW5hZ2VyIGZyb20gJy4vd2luZG93cy1tYW5hZ2VyJ1xyXG5cclxuLy8gQ2FudmFzIEV4dGVuc2lvbnNcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NvcmUvY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEdyb3VwQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZ3JvdXAtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFByZXNlbnRhdGlvbkNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL3ByZXNlbnRhdGlvbi1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItcmVhZG9ubHktY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZW5jYXBzdWxhdGUtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IENvbW1hbmRzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29tbWFuZHMtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFBvcnRhbHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wb3J0YWxzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItZGVmYXVsdC1zZXR0aW5ncy1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29sb3ItcGFsZXR0ZS1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9jb2xsYXBzaWJsZS1ncm91cHMtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFByb3BlcnRpZXNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wcm9wZXJ0aWVzLWNhbnZhcy1leHRlbnNpb24nXHJcblxyXG4vLyBBZHZhbmNlZCBTdHlsZXNcclxuaW1wb3J0IE5vZGVTdHlsZXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvbm9kZS1zdHlsZXMnXHJcbmltcG9ydCBFZGdlU3R5bGVzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2Utc3R5bGVzJ1xyXG5cclxuLy8gRGF0YXNldCBFeHBvc2Vyc1xyXG5pbXBvcnQgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvbm9kZS1pbnRlcmFjdGlvbi1leHBvc2VyJ1xyXG5pbXBvcnQgTm9kZUV4cG9zZXJFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtZXhwb3NlcidcclxuaW1wb3J0IEVkZ2VFeHBvc2VyRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9lZGdlLWV4cG9zZXInXHJcbmltcG9ydCBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvY2FudmFzLXdyYXBwZXItZXhwb3NlcidcclxuaW1wb3J0IE1pZ3JhdGlvbkhlbHBlciBmcm9tICcuL3V0aWxzL21pZ3JhdGlvbi1oZWxwZXInXHJcblxyXG5jb25zdCBDQU5WQVNfRVhURU5TSU9OUzogdHlwZW9mIENhbnZhc0V4dGVuc2lvbltdID0gW1xyXG4gIC8vIERhdGFzZXQgRXhwb3NlcnNcclxuICBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlRXhwb3NlckV4dGVuc2lvbixcclxuICBFZGdlRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlSW50ZXJhY3Rpb25FeHBvc2VyRXh0ZW5zaW9uLFxyXG5cclxuICAvLyBBZHZhbmNlZCBTdHlsZXNcclxuICBOb2RlU3R5bGVzRXh0ZW5zaW9uLFxyXG4gIEVkZ2VTdHlsZXNFeHRlbnNpb24sXHJcblxyXG4gIC8vIEJhc2ljIEV4dGVuc2lvbnNcclxuICBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24sXHJcbiAgQ29tbWFuZHNDYW52YXNFeHRlbnNpb24sXHJcbiAgUHJvcGVydGllc0NhbnZhc0V4dGVuc2lvbixcclxuICBCZXR0ZXJSZWFkb25seUNhbnZhc0V4dGVuc2lvbixcclxuICBHcm91cENhbnZhc0V4dGVuc2lvbixcclxuXHJcbiAgLy8gTW9yZSBBZHZhbmNlZCBFeHRlbnNpb25zXHJcbiAgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24sXHJcbiAgRW5jYXBzdWxhdGVDYW52YXNFeHRlbnNpb24sXHJcbiAgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIFByZXNlbnRhdGlvbkNhbnZhc0V4dGVuc2lvbixcclxuICBQb3J0YWxzQ2FudmFzRXh0ZW5zaW9uXHJcbl1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkdmFuY2VkQ2FudmFzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICBtaWdyYXRpb25IZWxwZXI6IE1pZ3JhdGlvbkhlbHBlclxyXG4gIGRlYnVnSGVscGVyOiBEZWJ1Z0hlbHBlclxyXG5cclxuICBzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyXHJcbiAgd2luZG93c01hbmFnZXI6IFdpbmRvd3NNYW5hZ2VyXHJcblxyXG4gIGNhbnZhc1BhdGNoZXI6IENhbnZhc1BhdGNoZXJcclxuICBjYW52YXNFeHRlbnNpb25zOiBDYW52YXNFeHRlbnNpb25bXVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcbiAgICB0aGlzLm1pZ3JhdGlvbkhlbHBlciA9IG5ldyBNaWdyYXRpb25IZWxwZXIodGhpcylcclxuICAgIGF3YWl0IHRoaXMubWlncmF0aW9uSGVscGVyLm1pZ3JhdGUoKVxyXG5cclxuICAgIEljb25zSGVscGVyLmFkZEljb25zKClcclxuICAgIFxyXG4gICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBTZXR0aW5nc01hbmFnZXIodGhpcylcclxuICAgIGF3YWl0IHRoaXMuc2V0dGluZ3MubG9hZFNldHRpbmdzKClcclxuICAgIHRoaXMuc2V0dGluZ3MuYWRkU2V0dGluZ3NUYWIoKVxyXG5cclxuICAgIHRoaXMud2luZG93c01hbmFnZXIgPSBuZXcgV2luZG93c01hbmFnZXIodGhpcylcclxuXHJcbiAgICB0aGlzLmNhbnZhc1BhdGNoZXIgPSBuZXcgQ2FudmFzUGF0Y2hlcih0aGlzKVxyXG4gICAgdGhpcy5jYW52YXNFeHRlbnNpb25zID0gQ0FOVkFTX0VYVEVOU0lPTlMubWFwKChFeHRlbnNpb246IGFueSkgPT4gbmV3IEV4dGVuc2lvbih0aGlzKSlcclxuXHR9XHJcblxyXG4gIG9udW5sb2FkKCkge31cclxuXHJcbiAgZ2V0Q3VycmVudENhbnZhc1ZpZXcoKTogQ2FudmFzVmlldyB8IG51bGwge1xyXG4gICAgY29uc3QgY2FudmFzVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KVxyXG4gICAgaWYgKGNhbnZhc1ZpZXc/LmdldFZpZXdUeXBlKCkgIT09ICdjYW52YXMnKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIGNhbnZhc1ZpZXcgYXMgQ2FudmFzVmlld1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudENhbnZhcygpOiBDYW52YXMgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRDYW52YXNWaWV3KCk/LmNhbnZhcyB8fCBudWxsXHJcbiAgfVxyXG5cclxuICBjcmVhdGVGaWxlU25hcHNob3QocGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGZpbGVSZWNvdmVyeVBsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zWydmaWxlLXJlY292ZXJ5J10/Lmluc3RhbmNlXHJcbiAgICBpZiAoIWZpbGVSZWNvdmVyeVBsdWdpbikgcmV0dXJuXHJcblxyXG4gICAgZmlsZVJlY292ZXJ5UGx1Z2luLmZvcmNlQWRkKHBhdGgsIGNvbnRlbnQpXHJcbiAgfVxyXG5cclxuICAvLyB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJhZHZhbmNlZC1jYW52YXNcIl0uZW5hYmxlRGVidWdNb2RlKClcclxuICBlbmFibGVEZWJ1Z01vZGUoKSB7XHJcbiAgICBpZiAodGhpcy5kZWJ1Z0hlbHBlcikgcmV0dXJuXHJcbiAgICB0aGlzLmRlYnVnSGVscGVyID0gbmV3IERlYnVnSGVscGVyKHRoaXMpXHJcbiAgfVxyXG59IiwgImV4cG9ydCBmdW5jdGlvbiBhcm91bmQob2JqLCBmYWN0b3JpZXMpIHtcclxuICAgIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoa2V5ID0+IGFyb3VuZDEob2JqLCBrZXksIGZhY3Rvcmllc1trZXldKSk7XHJcbiAgICByZXR1cm4gcmVtb3ZlcnMubGVuZ3RoID09PSAxID8gcmVtb3ZlcnNbMF0gOiBmdW5jdGlvbiAoKSB7IHJlbW92ZXJzLmZvckVhY2gociA9PiByKCkpOyB9O1xyXG59XHJcbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcclxuICAgIGNvbnN0IG9yaWdpbmFsID0gb2JqW21ldGhvZF0sIGhhZE93biA9IG9iai5oYXNPd25Qcm9wZXJ0eShtZXRob2QpO1xyXG4gICAgbGV0IGN1cnJlbnQgPSBjcmVhdGVXcmFwcGVyKG9yaWdpbmFsKTtcclxuICAgIC8vIExldCBvdXIgd3JhcHBlciBpbmhlcml0IHN0YXRpYyBwcm9wcyBmcm9tIHRoZSB3cmFwcGluZyBtZXRob2QsXHJcbiAgICAvLyBhbmQgdGhlIHdyYXBwaW5nIG1ldGhvZCwgcHJvcHMgZnJvbSB0aGUgb3JpZ2luYWwgbWV0aG9kXHJcbiAgICBpZiAob3JpZ2luYWwpXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIG9yaWdpbmFsKTtcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBjdXJyZW50KTtcclxuICAgIG9ialttZXRob2RdID0gd3JhcHBlcjtcclxuICAgIC8vIFJldHVybiBhIGNhbGxiYWNrIHRvIGFsbG93IHNhZmUgcmVtb3ZhbFxyXG4gICAgcmV0dXJuIHJlbW92ZTtcclxuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYmVlbiBkZWFjdGl2YXRlZCBhbmQgYXJlIG5vIGxvbmdlciB3cmFwcGVkLCByZW1vdmUgb3Vyc2VsdmVzXHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsICYmIG9ialttZXRob2RdID09PSB3cmFwcGVyKVxyXG4gICAgICAgICAgICByZW1vdmUoKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgICAvLyBJZiBubyBvdGhlciBwYXRjaGVzLCBqdXN0IGRvIGEgZGlyZWN0IHJlbW92YWxcclxuICAgICAgICBpZiAob2JqW21ldGhvZF0gPT09IHdyYXBwZXIpIHtcclxuICAgICAgICAgICAgaWYgKGhhZE93bilcclxuICAgICAgICAgICAgICAgIG9ialttZXRob2RdID0gb3JpZ2luYWw7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbbWV0aG9kXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gRWxzZSBwYXNzIGZ1dHVyZSBjYWxscyB0aHJvdWdoLCBhbmQgcmVtb3ZlIHdyYXBwZXIgZnJvbSB0aGUgcHJvdG90eXBlIGNoYWluXHJcbiAgICAgICAgY3VycmVudCA9IG9yaWdpbmFsO1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBvcmlnaW5hbCB8fCBGdW5jdGlvbik7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xyXG4gICAgY2hlY2tba2V5XSA9IGtleTtcclxuICAgIHJldHVybiBjaGVjaztcclxuICAgIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xyXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYiwgY2IpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xyXG4gICAgbGV0IGxhc3RSdW4gPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xyXG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgICAgIGFmdGVyKGxhc3RSdW4sICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzeW5jRnVuY3Rpb24uYXBwbHkodGhpcywgYXJncykudGhlbihyZXMsIHJlaik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4geyBhZnRlcihsYXN0UnVuLCByZXMpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxufVxyXG4iLCAiaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0Y2hIZWxwZXIge1xyXG4gIHN0YXRpYyB0cnlQYXRjaFdvcmtzcGFjZVByb3RvdHlwZTxUPihwbHVnaW46IFBsdWdpbiwgZ2V0VGFyZ2V0OiAoKSA9PiBUfHVuZGVmaW5lZCwgZnVuY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IChuZXh0OiBhbnkpID0+ICguLi5hcmdzOiBhbnkpID0+IGFueSB9KTogUHJvbWlzZTxUPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgdHJ5UGF0Y2ggPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0VGFyZ2V0KClcclxuICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGxcclxuXHJcbiAgICAgICAgY29uc3QgdW5pbnN0YWxsZXIgPSBhcm91bmQodGFyZ2V0LmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZnVuY3Rpb25zKVxyXG4gICAgICAgIHBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGxlcilcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSB0cnlQYXRjaCgpXHJcbiAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbGlzdGVuZXIgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0cnlQYXRjaCgpXHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgIHBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZihsaXN0ZW5lcilcclxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHBsdWdpbi5yZWdpc3RlckV2ZW50KGxpc3RlbmVyKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwYXRjaE9iamVjdFByb3RvdHlwZTxUPihwbHVnaW46IFBsdWdpbiwgdGFyZ2V0OiBULCBmdW5jdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKG5leHQ6IGFueSkgPT4gKC4uLmFyZ3M6IGFueSkgPT4gYW55IH0pOiB2b2lkIHtcclxuICAgIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKCh0YXJnZXQgYXMgYW55KS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGZ1bmN0aW9ucylcclxuICAgIHBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGxlcilcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwYXRjaE9iamVjdEluc3RhbmNlPFQ+KHBsdWdpbjogUGx1Z2luLCB0YXJnZXQ6IFQsIGZ1bmN0aW9uczogeyBba2V5OiBzdHJpbmddOiAobmV4dDogYW55KSA9PiAoLi4uYXJnczogYW55KSA9PiBhbnkgfSk6IHZvaWQge1xyXG4gICAgY29uc3QgdW5pbnN0YWxsZXIgPSBhcm91bmQodGFyZ2V0IGFzIGFueSwgZnVuY3Rpb25zKVxyXG4gICAgcGx1Z2luLnJlZ2lzdGVyKHVuaW5zdGFsbGVyKVxyXG4gIH1cclxufSIsICJjb25zdCBQTFVHSU5fRVZFTlRfUFJFRklYID0gJ2FkdmFuY2VkLWNhbnZhcydcclxuXHJcbmV4cG9ydCBjb25zdCBDYW52YXNFdmVudCA9IHtcclxuICBDYW52YXNDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtY2hhbmdlZGAsXHJcbiAgVmlld3BvcnRDaGFuZ2VkOiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnZpZXdwb3J0LWNoYW5nZWQ6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp2aWV3cG9ydC1jaGFuZ2VkOmFmdGVyYFxyXG4gIH0sXHJcbiAgTm9kZU1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLW1vdmVkYCxcclxuICBEb3VibGVDbGljazogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZG91YmxlLWNsaWNrYCxcclxuICBEcmFnZ2luZ1N0YXRlQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZHJhZ2dpbmctc3RhdGUtY2hhbmdlZGAsXHJcbiAgTm9kZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtY3JlYXRlZGAsXHJcbiAgRWRnZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtY3JlYXRlZGAsXHJcbiAgTm9kZUFkZGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWFkZGVkYCxcclxuICBFZGdlQWRkZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtYWRkZWRgLFxyXG4gIE5vZGVSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLXJlbW92ZWRgLFxyXG4gIEVkZ2VSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLXJlbW92ZWRgLFxyXG4gIE5vZGVDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWNoYW5nZWRgLFxyXG4gIEVkZ2VDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNoYW5nZWRgLFxyXG4gIE5vZGVCQm94UmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWJib3gtcmVxdWVzdGVkYCxcclxuICBFZGdlQ2VudGVyUmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNlbnRlci1yZXF1ZXN0ZWRgLFxyXG4gIENvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y29udGFpbmluZy1ub2Rlcy1yZXF1ZXN0ZWRgLFxyXG4gIFNlbGVjdGlvbkNoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnNlbGVjdGlvbi1jaGFuZ2VkYCxcclxuICBab29tVG9CYm94OiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Onpvb20tdG8tYmJveDpiZWZvcmVgLFxyXG4gICAgQWZ0ZXI6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Onpvb20tdG8tYmJveDphZnRlcmBcclxuICB9LFxyXG4gIFBvcHVwTWVudUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnBvcHVwLW1lbnUtY3JlYXRlZGAsXHJcbiAgTm9kZUludGVyYWN0aW9uOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWludGVyYWN0aW9uYCxcclxuICBVbmRvOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp1bmRvYCxcclxuICBSZWRvOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpyZWRvYCxcclxuICBSZWFkb25seUNoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnJlYWRvbmx5LWNoYW5nZWRgLFxyXG4gIERhdGFSZXF1ZXN0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmRhdGEtcmVxdWVzdGVkYCxcclxuICBMb2FkRGF0YTogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bG9hZC1kYXRhYCxcclxuICBDYW52YXNTYXZlZDoge1xyXG4gICAgQmVmb3JlOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtc2F2ZWQ6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtc2F2ZWQ6YWZ0ZXJgXHJcbiAgfVxyXG59IiwgIi8qIEhFTFBFUlMgKi9cclxuY29uc3Qgc3RyaW5nT3JDb21tZW50UmUgPSAvKFwiKD86XFxcXD9bXl0pKj9cIil8KFxcL1xcLy4qKXwoXFwvXFwqW15dKj9cXCpcXC8pL2c7XHJcbmNvbnN0IHN0cmluZ09yVHJhaWxpbmdDb21tYVJlID0gLyhcIig/OlxcXFw/W15dKSo/XCIpfCgsXFxzKikoPz1dfH0pL2c7XHJcbi8qIE1BSU4gKi9cclxuY29uc3QgSlNPTkMgPSB7XHJcbiAgICBwYXJzZTogKHRleHQpID0+IHtcclxuICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQpOyAvLyBUbyBiZSBleHRyYSBzYWZlXHJcbiAgICAgICAgdHJ5IHsgLy8gRmFzdCBwYXRoIGZvciB2YWxpZCBKU09OXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCB7IC8vIFNsb3cgcGF0aCBmb3IgSlNPTkMgYW5kIGludmFsaWQgaW5wdXRzXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQucmVwbGFjZShzdHJpbmdPckNvbW1lbnRSZSwgJyQxJykucmVwbGFjZShzdHJpbmdPclRyYWlsaW5nQ29tbWFSZSwgJyQxJykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyogRVhQT1JUICovXHJcbmV4cG9ydCBkZWZhdWx0IEpTT05DO1xyXG4iLCAiaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRGF0YSwgQ2FudmFzRWRnZSwgQ2FudmFzRWRnZURhdGEsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhLCBDYW52YXNWaWV3IH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IFBhdGNoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvcGF0Y2gtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwiLi9ldmVudHNcIlxyXG5pbXBvcnQgeyBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgSlNPTkMgZnJvbSBcInRpbnktanNvbmNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzUGF0Y2hlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gICAgdGhpcy5hcHBseVBhdGNoZXMoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhcHBseVBhdGNoZXMoKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjYW52YXMgdmlldyBvciB3YWl0IGZvciBpdCB0byBiZSBjcmVhdGVkXHJcbiAgICBjb25zdCBjYW52YXNWaWV3ID0gKFxyXG4gICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FudmFzJyk/LmZpcnN0KCk/LnZpZXcgPz9cclxuICAgICAgYXdhaXQgbmV3IFByb21pc2U8Q2FudmFzVmlldz4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgdW5pbnN0YWxsID0gYXJvdW5kKHRoaXMucGx1Z2luLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2lucy5jYW52YXMudmlld3MsIHtcclxuICAgICAgICAgIGNhbnZhczogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuXHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgICAgICAgICB1bmluc3RhbGwoKSAvLyBVbmluc3RhbGwgdGhlIHBhdGNoXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGwpXHJcbiAgICAgIH0pXHJcbiAgICApIGFzIENhbnZhc1ZpZXdcclxuICAgIFxyXG4gICAgLy8gUGF0Y2ggY2FudmFzIHZpZXdcclxuICAgIFBhdGNoSGVscGVyLnBhdGNoT2JqZWN0UHJvdG90eXBlKHRoaXMucGx1Z2luLCBjYW52YXNWaWV3LCB7XHJcbiAgICAgIGdldFZpZXdEYXRhOiAoX25leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLl9hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBjYW52YXNEYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgY2FudmFzRGF0YS5tZXRhZGF0YSA9IHRoaXMuY2FudmFzLm1ldGFkYXRhID8/IHt9XHJcblxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjYW52YXNEYXRhLCBudWxsLCAyKVxyXG4gICAgICB9LFxyXG4gICAgICBzZXRWaWV3RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGpzb246IHN0cmluZywgLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgbGV0IHZhbGlkSnNvbiA9IGpzb24gIT09ICcnID8ganNvbiA6ICd7fSdcclxuICAgICAgICBsZXQgcGFyc2VkSnNvblxyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgU3ludGF4RXJyb3JcclxuICAgICAgICB0cnkgeyBwYXJzZWRKc29uID0gSlNPTi5wYXJzZSh2YWxpZEpzb24pIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgLy8gSW52YWxpZCBKU09OXHJcbiAgICAgICAgICB0aGF0LnBsdWdpbi5jcmVhdGVGaWxlU25hcHNob3QodGhpcy5maWxlLnBhdGgsIGpzb24pXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFRyeSB0byBwYXJzZSBpdCB3aXRoIHRyYWlsaW5nIGNvbW1hc1xyXG4gICAgICAgICAgcGFyc2VkSnNvbiA9IEpTT05DLnBhcnNlKHZhbGlkSnNvbilcclxuICAgICAgICAgIHZhbGlkSnNvbiA9IEpTT04uc3RyaW5naWZ5KHBhcnNlZEpzb24sIG51bGwsIDIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgdmFsaWRKc29uLCAuLi5hcmdzKVxyXG5cclxuICAgICAgICB0cnkgeyB0aGlzLmNhbnZhcy5tZXRhZGF0YSA9IHBhcnNlZEpzb24ubWV0YWRhdGEgfVxyXG4gICAgICAgIGNhdGNoIChfZSkgeyB0aGlzLmNhbnZhcy5tZXRhZGF0YSA9IHt9IH1cclxuXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCwgdGhpcy5jYW52YXMpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBjYW52YXNcclxuICAgIFBhdGNoSGVscGVyLnBhdGNoT2JqZWN0UHJvdG90eXBlKHRoaXMucGx1Z2luLCBjYW52YXNWaWV3LmNhbnZhcywge1xyXG4gICAgICBtYXJrVmlld3BvcnRDaGFuZ2VkOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuVmlld3BvcnRDaGFuZ2VkLkJlZm9yZSwgdGhpcylcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5WaWV3cG9ydENoYW5nZWQuQWZ0ZXIsIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBtYXJrTW92ZWQ6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIG5vZGUpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZU1vdmVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgb25Eb3VibGVDbGljazogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJldmVudERlZmF1bHQgPSB7IHZhbHVlOiBmYWxzZSB9XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRG91YmxlQ2xpY2ssIHRoaXMsIGV2ZW50LCBwcmV2ZW50RGVmYXVsdClcclxuICAgICAgICBpZiAoIXByZXZlbnREZWZhdWx0LnZhbHVlKSBuZXh0LmNhbGwodGhpcywgZXZlbnQpXHJcbiAgICAgIH0sXHJcbiAgICAgIHNldERyYWdnaW5nOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZHJhZ2dpbmc6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgZHJhZ2dpbmcpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRHJhZ2dpbmdTdGF0ZUNoYW5nZWQsIHRoaXMsIGRyYWdnaW5nKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q29udGFpbmluZ05vZGVzOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoYmJveDogQkJveCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBiYm94KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZCwgdGhpcywgYmJveCwgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgdXBkYXRlU2VsZWN0aW9uOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAodXBkYXRlOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkU2VsZWN0aW9uID0gbmV3IFNldCh0aGlzLnNlbGVjdGlvbilcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgdXBkYXRlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlNlbGVjdGlvbkNoYW5nZWQsIHRoaXMsIG9sZFNlbGVjdGlvbiwgKCh1cGRhdGU6ICgpID0+IHZvaWQpID0+IG5leHQuY2FsbCh0aGlzLCB1cGRhdGUpKSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZVRleHROb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUZpbGVOb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUZpbGVOb2RlczogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZTogQ2FudmFzTm9kZSkgPT4gdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpKVxyXG4gICAgICAgIHJldHVybiBub2Rlc1xyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVHcm91cE5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlTGlua05vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgYWRkTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICB0aGF0LnBhdGNoTm9kZShub2RlKVxyXG4gICAgICAgIHJldHVybiBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgfSxcclxuICAgICAgYWRkRWRnZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgICAgICB0aGF0LnBhdGNoRWRnZShlZGdlKVxyXG4gICAgICAgIGlmICghdGhpcy52aWV3cG9ydENoYW5nZWQpIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDcmVhdGVkLCB0aGlzLCBlZGdlKVxyXG4gICAgICAgIHJldHVybiBuZXh0LmNhbGwodGhpcywgZWRnZSlcclxuICAgICAgfSxcclxuICAgICAgcmVtb3ZlTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbW92ZUVkZ2U6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGVkZ2UpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZVJlbW92ZWQsIHRoaXMsIGVkZ2UpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICB6b29tVG9CYm94OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoYmJveDogQkJveCkge1xyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQmVmb3JlLCB0aGlzLCBiYm94KVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBiYm94KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQWZ0ZXIsIHRoaXMsIGJib3gpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBzZXRSZWFkb25seTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKHJlYWRvbmx5OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIHJlYWRvbmx5KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlJlYWRvbmx5Q2hhbmdlZCwgdGhpcywgcmVhZG9ubHkpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICB1bmRvOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhpcy5pbXBvcnREYXRhKHRoaXMuZ2V0RGF0YSgpLCB0cnVlKSAvLyBGb3JjZSB1cGRhdGUgdGhlIGNhbnZhcyBkYXRhXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuVW5kbywgdGhpcylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlZG86IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGlzLmltcG9ydERhdGEodGhpcy5nZXREYXRhKCksIHRydWUpIC8vIEZvcmNlIHVwZGF0ZSB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5SZWRvLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgLypzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSwqL1xyXG4gICAgICBnZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCwgdGhpcywgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgaW1wb3J0RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGRhdGE6IENhbnZhc0RhdGEsIGNsZWFyQ2FudmFzPzogYm9vbGVhbiwgc2lsZW50PzogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEZpbGVQYXRoID0gdGhpcy52aWV3LmZpbGUucGF0aFxyXG4gICAgICAgIGNvbnN0IHNldERhdGEgPSAoZGF0YTogQ2FudmFzRGF0YSkgPT4ge1xyXG4gICAgICAgICAgLy8gU2tpcCBpZiB0aGUgY2FudmFzIGdvdCB1bmxvYWRlZCBvciB0aGUgZmlsZSBjaGFuZ2VkXHJcbiAgICAgICAgICBpZiAoIXRoaXMudmlldy5maWxlIHx8IHRoaXMudmlldy5maWxlLnBhdGggIT09IHRhcmdldEZpbGVQYXRoKSByZXR1cm5cclxuXHJcbiAgICAgICAgICB0aGlzLmltcG9ydERhdGEoZGF0YSwgdHJ1ZSwgdHJ1ZSlcclxuICAgICAgICAgIHRoYXQuZW1pdEV2ZW50c0ZvclVua25vd25EYXRhQ2hhbmdlcyh0aGlzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaWxlbnQpIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkxvYWREYXRhLCB0aGlzLCBkYXRhLCBzZXREYXRhKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBkYXRhLCBjbGVhckNhbnZhcylcclxuICAgICAgICB0aGF0LmVtaXRFdmVudHNGb3JVbmtub3duRGF0YUNoYW5nZXModGhpcylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlcXVlc3RTYXZlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzU2F2ZWQuQmVmb3JlLCB0aGlzKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkNhbnZhc1NhdmVkLkFmdGVyLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBjYW52YXMgcG9wdXAgbWVudVxyXG4gICAgUGF0Y2hIZWxwZXIucGF0Y2hPYmplY3RQcm90b3R5cGUodGhpcy5wbHVnaW4sIGNhbnZhc1ZpZXcuY2FudmFzLm1lbnUsIHtcclxuICAgICAgcmVuZGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCwgdGhpcy5jYW52YXMpXHJcbiAgICAgICAgbmV4dC5jYWxsKHRoaXMpIC8vIFJlLUNlbnRlciB0aGUgcG9wdXAgbWVudVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBpbnRlcmFjdGlvbiBsYXllclxyXG4gICAgUGF0Y2hIZWxwZXIucGF0Y2hPYmplY3RQcm90b3R5cGUodGhpcy5wbHVnaW4sIGNhbnZhc1ZpZXcuY2FudmFzLm5vZGVJbnRlcmFjdGlvbkxheWVyLCB7XHJcbiAgICAgIHNldFRhcmdldDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlSW50ZXJhY3Rpb24sIHRoaXMuY2FudmFzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBDYW52YXMgaXMgbm93IHBhdGNoZWQgLSB1cGRhdGUgYWxsIG9wZW4gY2FudmFzIHZpZXdzXHJcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuICAgICAgaWYgKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpICE9PSAnY2FudmFzJykgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBjYW52YXNWaWV3ID0gbGVhZi52aWV3IGFzIENhbnZhc1ZpZXdcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICBjYW52YXNWaWV3LmxlYWYucmVidWlsZFZpZXcoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGF0Y2hOb2RlKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgUGF0Y2hIZWxwZXIucGF0Y2hPYmplY3RJbnN0YW5jZSh0aGlzLnBsdWdpbiwgbm9kZSwge1xyXG4gICAgICBzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzTm9kZURhdGEsIGFkZEhpc3Rvcnk/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChub2RlLmluaXRpYWxpemVkICYmICFub2RlLmlzRGlydHkpIHtcclxuICAgICAgICAgIG5vZGUuaXNEaXJ0eSA9IHRydWVcclxuICAgICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLCB0aGlzLmNhbnZhcywgbm9kZSlcclxuICAgICAgICAgIGRlbGV0ZSBub2RlLmlzRGlydHlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNhdmUgdGhlIGRhdGEgdG8gdGhlIGZpbGVcclxuICAgICAgICB0aGlzLmNhbnZhcy5kYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgdGhpcy5jYW52YXMudmlldy5yZXF1ZXN0U2F2ZSgpXHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB0aGUgdW5kbyBzdGFja1xyXG4gICAgICAgIGlmIChhZGRIaXN0b3J5KSB0aGlzLmNhbnZhcy5wdXNoSGlzdG9yeSh0aGlzLmNhbnZhcy5nZXREYXRhKCkpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0QkJveDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVCQm94UmVxdWVzdGVkLCB0aGlzLmNhbnZhcywgbm9kZSwgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKG5vZGUsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUFkZGVkLCBub2RlLmNhbnZhcywgbm9kZSlcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsIG5vZGUuY2FudmFzLCBub2RlKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGF0Y2hFZGdlKGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgUGF0Y2hIZWxwZXIucGF0Y2hPYmplY3RJbnN0YW5jZSh0aGlzLnBsdWdpbiwgZWRnZSwge1xyXG4gICAgICBzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzRWRnZURhdGEsIGFkZEhpc3Rvcnk/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChlZGdlLmluaXRpYWxpemVkICYmICFlZGdlLmlzRGlydHkpIHtcclxuICAgICAgICAgIGVkZ2UuaXNEaXJ0eSA9IHRydWVcclxuICAgICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLCB0aGlzLmNhbnZhcywgZWRnZSlcclxuICAgICAgICAgIGRlbGV0ZSBlZGdlLmlzRGlydHlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNhdmUgdGhlIGRhdGEgdG8gdGhlIGZpbGVcclxuICAgICAgICB0aGlzLmNhbnZhcy5kYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgdGhpcy5jYW52YXMudmlldy5yZXF1ZXN0U2F2ZSgpXHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB0aGUgdW5kbyBzdGFja1xyXG4gICAgICAgIGlmIChhZGRIaXN0b3J5KSB0aGlzLmNhbnZhcy5wdXNoSGlzdG9yeSh0aGlzLmNhbnZhcy5nZXREYXRhKCkpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVuZGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsIHRoaXMuY2FudmFzLCBlZGdlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q2VudGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNlbnRlclJlcXVlc3RlZCwgdGhpcy5jYW52YXMsIGVkZ2UsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChlZGdlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VBZGRlZCwgZWRnZS5jYW52YXMsIGVkZ2UpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHJ1bkFmdGVySW5pdGlhbGl6ZWQoY2FudmFzRWxlbWVudDogQ2FudmFzRWxlbWVudCwgb25SZWFkeTogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKGNhbnZhc0VsZW1lbnQuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgb25SZWFkeSgpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgLy8gUGF0Y2ggQ2FudmFzRWxlbWVudCBvYmplY3RcclxuICAgIGNvbnN0IHVuaW5zdGFsbCA9IGFyb3VuZChjYW52YXNFbGVtZW50LCB7XHJcbiAgICAgIGluaXRpYWxpemU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuXHJcbiAgICAgICAgb25SZWFkeSgpXHJcbiAgICAgICAgdW5pbnN0YWxsKCkgLy8gVW5pbnN0YWxsIHRoZSBwYXRjaFxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhhdC5wbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbWl0RXZlbnRzRm9yVW5rbm93bkRhdGFDaGFuZ2VzKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICAvLyBJZiBub2RlIGRhdGEgY2hhbmdlZFxyXG4gICAgY2FudmFzLm5vZGVzLmZvckVhY2goKG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChub2RlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLCBub2RlLmNhbnZhcywgbm9kZSlcclxuICAgIH0pKVxyXG5cclxuICAgIC8vIElmIGVkZ2UgZGF0YSBjaGFuZ2VkXHJcbiAgICBjYW52YXMuZWRnZXMuZm9yRWFjaCgoZWRnZTogQ2FudmFzRWRnZSkgPT4gdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKGVkZ2UsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsIGVkZ2UuY2FudmFzLCBlZGdlKVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyaWdnZXJXb3Jrc3BhY2VFdmVudChldmVudDogc3RyaW5nLCAuLi5hcmdzOiBhbnkpIHtcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihldmVudCwgLi4uYXJncylcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgYWRkSWNvbiB9IGZyb20gXCJvYnNpZGlhblwiXHJcblxyXG5jb25zdCBDVVNUT01fSUNPTlMgPSB7XHJcbiAgJ3NoYXBlLXBpbGwnOiBgPHJlY3Qgcng9XCIzMS4yNVwiIGhlaWdodD1cIjYyLjVcIiB3aWR0aD1cIjkzLjc1XCIgeT1cIjE4Ljc1XCIgeD1cIjMuMTI1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcGFyYWxsZWxvZ3JhbSc6IGA8cmVjdCB0cmFuc2Zvcm09XCJza2V3WCgtMjApXCIgcng9XCI1XCIgaGVpZ2h0PVwiNTBcIiB3aWR0aD1cIjcwXCIgeT1cIjI1XCIgeD1cIjM1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcHJlZGVmaW5lZC1wcm9jZXNzJzogYFxyXG4gICAgPGcgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgdHJhbnNmb3JtPVwibWF0cml4KDQuMTY2NjY3LDAsMCw0LjE2NjY2NywwLDApXCI+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDQuOTk5Njg3IDMgTCAxOS4wMDAzMTIgMyBDIDIwLjEwNDY4OCAzIDIxIDMuODk1MzEyIDIxIDQuOTk5Njg3IEwgMjEgMTkuMDAwMzEyIEMgMjEgMjAuMTA0Njg4IDIwLjEwNDY4OCAyMSAxOS4wMDAzMTIgMjEgTCA0Ljk5OTY4NyAyMSBDIDMuODk1MzEyIDIxIDMgMjAuMTA0Njg4IDMgMTkuMDAwMzEyIEwgMyA0Ljk5OTY4NyBDIDMgMy44OTUzMTIgMy44OTUzMTIgMyA0Ljk5OTY4NyAzIFogTSA0Ljk5OTY4NyAzIFwiLz5cclxuICAgICAgPHBhdGggZD1cIk0gNyAzIEwgNyAyMSBcIi8+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDE3IDMgTCAxNyAyMSBcIi8+XHJcbiAgICA8L2c+XHJcbiAgYCxcclxuICAnc2hhcGUtZG9jdW1lbnQnOiBgPHBhdGggdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAsIDUpXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIGQ9XCJNODMuNzUgMjVDODUuODIgMjUgODcuNSAyNi42OCA4Ny41IDI4Ljc1TDg3LjUgNjQuMzc1UTY4Ljc1IDU0LjI1IDUwIDY0LjM3NSAzMS4yNSA3NC41IDEyLjUgNjQuMzc1TDEyLjUgMzAuNjI1IDEyLjUgMjguNzVDMTIuNSAyNi42OCAxNC4xOCAyNSAxNi4yNSAyNVpcIi8+YCxcclxuICAnc2hhcGUtZGF0YWJhc2UnOiBgXHJcbiAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMjAsIDIwKVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIj5cclxuICAgICAgPHBhdGggZD1cIk0gMSA1MSBMIDEgMTEgQyAxIDUuNDggMTQuNDMgMSAzMSAxIEMgNDcuNTcgMSA2MSA1LjQ4IDYxIDExIEwgNjEgNTEgQyA2MSA1Ni41MiA0Ny41NyA2MSAzMSA2MSBDIDE0LjQzIDYxIDEgNTYuNTIgMSA1MSBaXCIvPlxyXG4gICAgICA8cGF0aCBkPVwiTSAxIDExIEMgMSAxNi41MiAxNC40MyAyMSAzMSAyMSBDIDQ3LjU3IDIxIDYxIDE2LjUyIDYxIDExXCIvPlxyXG4gICAgPC9nPlxyXG4gIGAsXHJcbiAgXHJcbiAgJ2JvcmRlci1zb2xpZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgZD1cIk05MS42NjY3IDQ1LjgzMzN2NC4xNjY3YzAgMi4wODMzLTIuMDgzMyA0LjE2NjctNC4xNjY3IDQuMTY2N0gxMi41Yy0yLjA4MzMgMC00LjE2NjctMi4wODMzLTQuMTY2Ny00LjE2Njd2LTQuMTY2N1wiLz5gLFxyXG4gICdib3JkZXItZGFzaGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2UtZGFzaGFycmF5PVwiMTMuN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuICAnYm9yZGVyLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjguN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuXHJcbiAgJ3BhdGgtc29saWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCI4LjhcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLXNob3J0LWRhc2hlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCIxNVwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGgtbG9uZy1kYXNoZWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBzdHJva2UtZGFzaGFycmF5PVwiMjNcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG5cclxuICAnYXJyb3ctdHJpYW5nbGUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNIDE1IDEwIEwgODUgNTAgTCAxNSA5MCBaXCIvPmAsXHJcbiAgJ2Fycm93LXRyaWFuZ2xlLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSAxNSAxMCBMIDg1IDUwIEwgMTUgOTAgWlwiLz5gLFxyXG4gICdhcnJvdy10aGluLXRyaWFuZ2xlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgZD1cIk0gMTUgMTAgTCA4NSA1MCBMIDE1IDkwXCIvPmAsXHJcbiAgJ2Fycm93LWhhbHZlZC10cmlhbmdsZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gMTUgNTAgTCA4NSA1MCBMIDE1IDkwIFpcIi8+YCxcclxuICAnYXJyb3ctZGlhbW9uZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gNTAgMCBMIDEwMCA1MCBMIDUwIDEwMCBMIDAgNTAgWlwiLz5gLFxyXG4gICdhcnJvdy1kaWFtb25kLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSA1MCAwIEwgMTAwIDUwIEwgNTAgMTAwIEwgMCA1MCBaXCIvPmAsXHJcbiAgJ2Fycm93LWNpcmNsZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCI0NVwiLz5gLFxyXG4gICdhcnJvdy1jaXJjbGUtb3V0bGluZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiNDVcIi8+YCxcclxuXHJcbiAgJ3BhdGhmaW5kaW5nLW1ldGhvZC1iZXppZXInOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoZmluZGluZy1tZXRob2Qtc3F1YXJlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZD1cIk03Mi45MTY3IDc5LjE2NjcgNzIuOTE2NyA1MCAyNy4wODMzIDUwIDI3LjA4MzMgMjAuODMzM1wiLz5gLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uc0hlbHBlciB7XHJcbiAgc3RhdGljIGFkZEljb25zKCkge1xyXG4gICAgZm9yIChjb25zdCBbaWQsIHN2Z10gb2YgT2JqZWN0LmVudHJpZXMoQ1VTVE9NX0lDT05TKSkge1xyXG4gICAgICBhZGRJY29uKGlkLCBzdmcpXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCIuLi9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1Z0hlbHBlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUFkZGVkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUyIE5vZGVBZGRlZCcpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiBjb25zb2xlLmNvdW50KCdcdUQ4M0RcdURGRTEgTm9kZUNoYW5nZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VBZGRlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgX2VkZ2U6IENhbnZhc05vZGUpID0+IGNvbnNvbGUuY291bnQoJ1x1RDgzRFx1REZFMiBFZGdlQWRkZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfZWRnZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUxIEVkZ2VDaGFuZ2VkJylcclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwiLi9tYWluXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIEJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCIuL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9zdHlsZS1jb25maWdcIlxyXG5cclxuY29uc3QgTk9ERV9UWVBFU19PTl9ET1VCTEVfQ0xJQ0sgPSB7XHJcbiAgJ3RleHQnOiAnVGV4dCcsXHJcbiAgJ2ZpbGUnOiAnRmlsZSdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIHtcclxuICBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IHN0cmluZ1xyXG4gIGFsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQ6IGJvb2xlYW5cclxuICBkZWZhdWx0VGV4dE5vZGVXaWR0aDogbnVtYmVyXHJcbiAgZGVmYXVsdFRleHROb2RlSGVpZ2h0OiBudW1iZXJcclxuICBkZWZhdWx0RmlsZU5vZGVXaWR0aDogbnVtYmVyXHJcbiAgZGVmYXVsdEZpbGVOb2RlSGVpZ2h0OiBudW1iZXJcclxuXHJcbiAgcGVyZm9ybWFuY2VPcHRpbWl6YXRpb25FbmFibGVkOiBib29sZWFuXHJcblxyXG4gIG5vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcbiAgZGVmYXVsdFRleHROb2RlU3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcblxyXG4gIGVkZ2VzU3R5bGluZ0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlczogU3R5bGVBdHRyaWJ1dGVbXVxyXG4gIGRlZmF1bHRFZGdlU3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XHJcbiAgZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3c6IGJvb2xlYW5cclxuICBlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb246IG51bWJlclxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZTogYm9vbGVhblxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZDogYm9vbGVhblxyXG5cclxuICBjb21tYW5kc0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgem9vbVRvQ2xvbmVkTm9kZTogYm9vbGVhblxyXG4gIGNsb25lTm9kZU1hcmdpbjogbnVtYmVyXHJcbiAgZXhwYW5kTm9kZVN0ZXBTaXplOiBudW1iZXJcclxuXHJcbiAgYmV0dGVyUmVhZG9ubHlFbmFibGVkOiBib29sZWFuXHJcbiAgZGlzYWJsZU5vZGVQb3B1cDogYm9vbGVhblxyXG4gIGRpc2FibGVab29tOiBib29sZWFuXHJcbiAgZGlzYWJsZVBhbjogYm9vbGVhblxyXG5cclxuICBjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnOiBib29sZWFuXHJcblxyXG4gIHByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgc2hvd1NldFN0YXJ0Tm9kZUluUG9wdXA6IGJvb2xlYW5cclxuICBkZWZhdWx0U2xpZGVTaXplOiBzdHJpbmdcclxuICB3cmFwSW5TbGlkZVBhZGRpbmc6IG51bWJlclxyXG4gIHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiBib29sZWFuXHJcbiAgdXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlczogYm9vbGVhblxyXG4gIHpvb21Ub1NsaWRlV2l0aG91dFBhZGRpbmc6IGJvb2xlYW5cclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogbnVtYmVyXHJcbiAgc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5OiBudW1iZXJcclxuXHJcbiAgY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQ6IGJvb2xlYW5cclxuXHJcbiAgcG9ydGFsc0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgbWFpbnRhaW5DbG9zZWRQb3J0YWxTaXplOiBib29sZWFuXHJcbiAgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGFydGlhbDxBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPiA9IHtcclxuICBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IE9iamVjdC5rZXlzKE5PREVfVFlQRVNfT05fRE9VQkxFX0NMSUNLKS5maXJzdCgpLFxyXG4gIGFsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQ6IHRydWUsXHJcbiAgZGVmYXVsdFRleHROb2RlV2lkdGg6IDI2MCxcclxuICBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IDYwLFxyXG4gIGRlZmF1bHRGaWxlTm9kZVdpZHRoOiA0MDAsXHJcbiAgZGVmYXVsdEZpbGVOb2RlSGVpZ2h0OiA0MDAsXHJcblxyXG4gIHBlcmZvcm1hbmNlT3B0aW1pemF0aW9uRW5hYmxlZDogZmFsc2UsXHJcblxyXG4gIG5vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlczogW10sXHJcbiAgZGVmYXVsdFRleHROb2RlU3R5bGVBdHRyaWJ1dGVzOiB7fSxcclxuXHJcbiAgZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlczogW10sXHJcbiAgZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IHt9LFxyXG4gIGVkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93OiBmYWxzZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb246IDEwLFxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZTogdHJ1ZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IHRydWUsXHJcblxyXG4gIGNvbW1hbmRzRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgem9vbVRvQ2xvbmVkTm9kZTogdHJ1ZSxcclxuICBjbG9uZU5vZGVNYXJnaW46IDIwLFxyXG4gIGV4cGFuZE5vZGVTdGVwU2l6ZTogMjAsXHJcblxyXG4gIGJldHRlclJlYWRvbmx5RW5hYmxlZDogdHJ1ZSxcclxuICBkaXNhYmxlTm9kZVBvcHVwOiBmYWxzZSxcclxuICBkaXNhYmxlWm9vbTogZmFsc2UsXHJcbiAgZGlzYWJsZVBhbjogZmFsc2UsXHJcblxyXG4gIGNvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnOiB0cnVlLFxyXG5cclxuICBwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBzaG93U2V0U3RhcnROb2RlSW5Qb3B1cDogZmFsc2UsXHJcbiAgZGVmYXVsdFNsaWRlU2l6ZTogJzEyMDB4Njc1JyxcclxuICB3cmFwSW5TbGlkZVBhZGRpbmc6IDIwLFxyXG4gIHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiB0cnVlLFxyXG4gIHVzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXM6IHRydWUsXHJcbiAgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogdHJ1ZSxcclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogMC41LFxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eTogMS4yNSxcclxuXHJcbiAgY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQ6IHRydWUsXHJcblxyXG4gIHBvcnRhbHNGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IHRydWUsXHJcbiAgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xyXG4gIHN0YXRpYyBTRVRUSU5HU19DSEFOR0VEX0VWRU5UID0gJ2FkdmFuY2VkLWNhbnZhczpzZXR0aW5ncy1jaGFuZ2VkJ1xyXG5cclxuICBwcml2YXRlIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuICBwcml2YXRlIHNldHRpbmdzOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzXHJcbiAgcHJpdmF0ZSBzZXR0aW5nc1RhYjogQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSlcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpXHJcbiAgfVxyXG5cclxuICBnZXRTZXR0aW5nPFQgZXh0ZW5kcyBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPihrZXk6IFQpOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzW1RdIHtcclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzW2tleV1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFNldHRpbmcoZGF0YTogUGFydGlhbDxBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPikge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5zZXR0aW5ncywgZGF0YSlcclxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFkZFNldHRpbmdzVGFiKCkge1xyXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdUYWIodGhpcy5wbHVnaW4sIHRoaXMpXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXJcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgIHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbilcclxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyXHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcclxuICAgIGNvbnRhaW5lckVsLmVtcHR5KClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0Q2xhc3MoJ2FjLXNldHRpbmdzLWhlYWRpbmcnKVxyXG4gICAgICAuc2V0TmFtZShcIkdlbmVyYWxcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJOb2RlIHR5cGUgb24gZG91YmxlIGNsaWNrXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHR5cGUgb2Ygbm9kZSB0aGF0IHdpbGwgYmUgY3JlYXRlZCB3aGVuIGRvdWJsZSBjbGlja2luZyBvbiB0aGUgY2FudmFzLlwiKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9ucyhOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDSylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdub2RlVHlwZU9uRG91YmxlQ2xpY2snKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IHZhbHVlIH0pKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJBbGlnbiBub2RlLCBjcmVhdGVkIGJ5IGRvdWJsZSBjbGljaywgdG8gZ3JpZFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgYSBub2RlIGNyZWF0ZWQgYnkgZG91YmxlIGNsaWNraW5nIHdpbGwgYmUgYWxpZ25lZCB0byB0aGUgZ3JpZC5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2FsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBhbGlnbkRvdWJsZUNsaWNrZWROb2RlVG9HcmlkOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG4gICAgXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IHRleHQgbm9kZSB3aWR0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IHdpZHRoIG9mIGEgdGV4dCBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdFRleHROb2RlV2lkdGgnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRUZXh0Tm9kZVdpZHRoOiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcbiAgICBcclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgdGV4dCBub2RlIGhlaWdodFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IGhlaWdodCBvZiBhIHRleHQgbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZUhlaWdodCcpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdFRleHROb2RlSGVpZ2h0OiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCBmaWxlIG5vZGUgd2lkdGhcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCB3aWR0aCBvZiBhIGZpbGUgbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2RlZmF1bHRGaWxlTm9kZVdpZHRoJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0RmlsZU5vZGVXaWR0aDogTWF0aC5tYXgoMSwgcGFyc2VJbnQodmFsdWUpKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgZmlsZSBub2RlIGhlaWdodFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IGhlaWdodCBvZiBhIGZpbGUgbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2RlZmF1bHRGaWxlTm9kZUhlaWdodCcpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdEZpbGVOb2RlSGVpZ2h0OiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXCIsXHJcbiAgICAgIFwiT3B0aW1pemUgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZSBjYW52YXMgKFNpZGUgZWZmZWN0IGlzIHNvbWUgYW1vdW50IG9mIGJsdXJyaW5lc3MpLlwiLFxyXG4gICAgICAncGVyZm9ybWFuY2VPcHRpbWl6YXRpb25FbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIk5vZGUgc3R5bGluZ1wiLFxyXG4gICAgICBcIlN0eWxlIHlvdXIgbm9kZXMgd2l0aCBkaWZmZXJlbnQgc2hhcGVzIGFuZCBib3JkZXJzLlwiLFxyXG4gICAgICAnbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDdXN0b20gbm9kZSBzdHlsZSBzZXR0aW5nc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIkFkZCBjdXN0b20gc3R5bGUgc2V0dGluZ3MgZm9yIG5vZGVzLiAoR28gdG8gR2l0SHViIGZvciBtb3JlIGluZm9ybWF0aW9uKVwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIk9wZW4gVHV0b3JpYWxcIilcclxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9naXRodWIuY29tL0RldmVsb3Blci1NaWtlL29ic2lkaWFuLWFkdmFuY2VkLWNhbnZhcy9ibG9iL21haW4vUkVBRE1FLm1kI2N1c3RvbS1zdHlsZXNcIikpXHJcbiAgICAgIClcclxuXHJcbiAgICBjb25zdCBhbGxOb2RlU3R5bGVBdHRyaWJ1dGVzID0gWyAuLi5CVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlcycpIF1cclxuICAgICAgLmZpbHRlcigoc2V0dGluZykgPT4gc2V0dGluZy5ub2RlVHlwZXMgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5nLm5vZGVUeXBlcz8uaW5jbHVkZXMoJ3RleHQnKSlcclxuICAgIHRoaXMuY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWwsICdEZWZhdWx0IHRleHQgbm9kZSBzdHlsZSBhdHRyaWJ1dGVzJywgJ2RlZmF1bHRUZXh0Tm9kZVN0eWxlQXR0cmlidXRlcycsIGFsbE5vZGVTdHlsZUF0dHJpYnV0ZXMpXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiRWRnZXMgc3R5bGluZ1wiLFxyXG4gICAgICBcIlN0eWxlIHlvdXIgZWRnZXMgd2l0aCBkaWZmZXJlbnQgcGF0aCBzdHlsZXMuXCIsXHJcbiAgICAgICdlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDdXN0b20gZWRnZSBzdHlsZSBzZXR0aW5nc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIkFkZCBjdXN0b20gc3R5bGUgc2V0dGluZ3MgZm9yIGVkZ2VzLiAoR28gdG8gR2l0SHViIGZvciBtb3JlIGluZm9ybWF0aW9uKVwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIk9wZW4gVHV0b3JpYWxcIilcclxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9naXRodWIuY29tL0RldmVsb3Blci1NaWtlL29ic2lkaWFuLWFkdmFuY2VkLWNhbnZhcy9ibG9iL21haW4vUkVBRE1FLm1kI2N1c3RvbS1zdHlsZXNcIikpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZURlZmF1bHRTdHlsZXNTZWN0aW9uKGNvbnRhaW5lckVsLCAnRGVmYXVsdCBlZGdlIHN0eWxlIGF0dHJpYnV0ZXMnLCAnZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXMnLCBbIC4uLkJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzJykgXSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJSb3RhdGUgYXJyb3cgaWYgcGF0aGZpbmRpbmcgbWV0aG9kIGlzIFxcXCJEaXJlY3RcXFwiXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgYXJyb3cgd2lsbCBiZSByb3RhdGVkIHRvIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGVkZ2UgaWYgdGhlIHBhdGhmaW5kaW5nIG1ldGhvZCBpcyBzZXQgdG8gXFxcIkRpcmVjdFxcXCIuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVEaXJlY3RSb3RhdGVBcnJvdycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGVkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93OiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkEqIGdyaWQgcmVzb2x1dGlvblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSByZXNvbHV0aW9uIG9mIHRoZSBncmlkIHdoZW4gdXNpbmcgdGhlIEEqIHBhdGggc3R5bGUuIFRoZSBsb3dlciB0aGUgdmFsdWUsIHRoZSBtb3JlIHByZWNpc2UgdGhlIHBhdGggd2lsbCBiZS4gQnV0IGl0IHdpbGwgYWxzbyB0YWtlIGxvbmdlciB0byBjYWxjdWxhdGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb24nKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGVkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbjogTWF0aC5tYXgoNSwgcGFyc2VJbnQodmFsdWUpKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkxpdmUgdXBkYXRlIEEqIHBhdGhcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBBKiBwYXRoIHN0eWxlIHdpbGwgYmUgdXBkYXRlZCBsaXZlIHdoaWxlIGRyYWdnaW5nIHRoZSBlZGdlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkEqIHJvdW5kZWQgcGF0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIEEqIHBhdGggc3R5bGUgd2lsbCBiZSByb3VuZGVkLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhSb3VuZGVkJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhSb3VuZGVkOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkV4dGVuZGVkIGNvbW1hbmRzXCIsXHJcbiAgICAgIFwiQWRkIG1vcmUgY29tbWFuZHMgdG8gdGhlIGNhbnZhcy5cIixcclxuICAgICAgJ2NvbW1hbmRzRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiWm9vbSB0byBjbG9uZWQgbm9kZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIGNhbnZhcyB3aWxsIHpvb20gdG8gdGhlIGNsb25lZCBub2RlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnem9vbVRvQ2xvbmVkTm9kZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHpvb21Ub0Nsb25lZE5vZGU6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ2xvbmUgbm9kZSBtYXJnaW5cIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgbWFyZ2luIGJldHdlZW4gdGhlIGNsb25lZCBub2RlIGFuZCB0aGUgc291cmNlIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdjbG9uZU5vZGVNYXJnaW4nKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGNsb25lTm9kZU1hcmdpbjogcGFyc2VJbnQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRXhwYW5kIG5vZGUgc3RlcCBzaXplXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHN0ZXAgc2l6ZSBmb3IgZXhwYW5kaW5nIHRoZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZXhwYW5kTm9kZVN0ZXBTaXplJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBleHBhbmROb2RlU3RlcFNpemU6IHBhcnNlSW50KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkJldHRlciByZWFkb25seVwiLFxyXG4gICAgICBcIkltcHJvdmUgdGhlIHJlYWRvbmx5IG1vZGUuXCIsXHJcbiAgICAgICdiZXR0ZXJSZWFkb25seUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiQ29sbGFwc2libGUgZ3JvdXBzXCIsXHJcbiAgICAgIFwiR3JvdXAgbm9kZXMgY2FuIGJlIGNvbGxhcHNlZCBhbmQgZXhwYW5kZWQgdG8ga2VlcCB0aGUgY2FudmFzIG9yZ2FuaXplZC5cIixcclxuICAgICAgJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ29sbGFwc2VkIGdyb3VwIHByZXZpZXcgb24gZHJhZ1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgYSBncm91cCB0aGF0IGlzIGNvbGxhcHNlZCBzaG93IGl0cyBib3JkZXIgd2hpbGUgZHJhZ2dpbmcgYSBub2RlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIlByZXNlbnRhdGlvbnNcIixcclxuICAgICAgXCJDcmVhdGUgYSBwcmVzZW50YXRpb24gZnJvbSB5b3VyIGNhbnZhcy5cIixcclxuICAgICAgJ3ByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgLnNldE5hbWUoXCJTaG93IFxcXCJTZXQgU3RhcnQgTm9kZVxcXCIgaW4gbm9kZSBwb3B1cFwiKVxyXG4gICAgLnNldERlc2MoXCJJZiB0dXJuZWQgb2ZmLCB5b3UgY2FuIHN0aWxsIHNldCB0aGUgc3RhcnQgbm9kZSB1c2luZyB0aGUgY29ycmVzcG9uZGluZyBjb21tYW5kLlwiKVxyXG4gICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICB0b2dnbGVcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2hvd1NldFN0YXJ0Tm9kZUluUG9wdXAnKSlcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgc2hvd1NldFN0YXJ0Tm9kZUluUG9wdXA6IHZhbHVlIH0pKVxyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgc2xpZGUgcmF0aW9cIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCByYXRpbyBvZiB0aGUgc2xpZGUuIEZvciBleGFtcGxlLCAxNjo5IGlzIDEyMDB4Njc1IGFuZCAzOjIgaXMgMTM1MHg5MDAuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0U2xpZGVTaXplJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdFNsaWRlU2l6ZTogdmFsdWUucmVwbGFjZSgnICcsICcnKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIldyYXAgaW4gc2xpZGUgcGFkZGluZ1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBwYWRkaW5nIG9mIHRoZSBzbGlkZSB3aGVuIHdyYXBwaW5nIHRoZSBjYW52YXMgaW4gYSBzbGlkZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3dyYXBJblNsaWRlUGFkZGluZycpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgd3JhcEluU2xpZGVQYWRkaW5nOiBwYXJzZUludCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2UgYXJyb3cga2V5cyB0byBjaGFuZ2Ugc2xpZGVzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB5b3UgY2FuIHVzZSB0aGUgYXJyb3cga2V5cyB0byBjaGFuZ2Ugc2xpZGVzIGluIHByZXNlbnRhdGlvbiBtb2RlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygndXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXMnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB1c2VBcnJvd0tleXNUb0NoYW5nZVNsaWRlczogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2UgUGdVcC9QZ0Rvd24ga2V5cyB0byBjaGFuZ2Ugc2xpZGVzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB5b3UgY2FuIHVzZSB0aGUgUGdVcC9QZ0Rvd24ga2V5cyB0byBjaGFuZ2Ugc2xpZGVzIGluIHByZXNlbnRhdGlvbiBtb2RlIChNYWtlcyB0aGUgcHJlc2VudGF0aW9uIG1vZGUgY29tcGF0aWJsZSB3aXRoIG1vc3QgcHJlc2VudGF0aW9uIHJlbW90ZXMpLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygndXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlcycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHVzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXM6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiWm9vbSB0byBzbGlkZSB3aXRob3V0IHBhZGRpbmdcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBjYW52YXMgd2lsbCB6b29tIHRvIHRoZSBzbGlkZSB3aXRob3V0IHBhZGRpbmcuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTbGlkZSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBkdXJhdGlvblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkdXJhdGlvbiBvZiB0aGUgc2xpZGUgdHJhbnNpdGlvbiBhbmltYXRpb24gaW4gc2Vjb25kcy4gU2V0IHRvIDAgdG8gZGlzYWJsZSB0aGUgYW5pbWF0aW9uLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uRHVyYXRpb24nKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uOiBwYXJzZUZsb2F0KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uIGludGVuc2l0eVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBpbnRlbnNpdHkgb2YgdGhlIHNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uLiBUaGUgaGlnaGVyIHRoZSB2YWx1ZSwgdGhlIG1vcmUgdGhlIGNhbnZhcyB3aWxsIHpvb20gb3V0IGJlZm9yZSB6b29taW5nIGluIG9uIHRoZSBuZXh0IHNsaWRlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHk6IHBhcnNlRmxvYXQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiQ2FudmFzIGVuY2Fwc3VsYXRpb25cIixcclxuICAgICAgXCJFbmNhcHN1bGF0ZSBhIHNlbGVjdGlvbiBvZiBub2RlcyBhbmQgZWRnZXMgaW50byBhIG5ldyBjYW52YXMuXCIsXHJcbiAgICAgICdjYW52YXNFbmNhcHN1bGF0aW9uRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJQb3J0YWxzXCIsXHJcbiAgICAgIFwiQ3JlYXRlIHBvcnRhbHMgdG8gb3RoZXIgY2FudmFzZXMuXCIsXHJcbiAgICAgICdwb3J0YWxzRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTWFpbnRhaW4gY2xvc2VkIHBvcnRhbCBzaXplXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBjbG9zaW5nIGEgcG9ydGFsIHdpbGwgY2hhbmdlIHRoZSBzaXplIG9mIHRoZSBwb3J0YWwgdG8gdGhlIG9yaWdpbmFsLCBjbG9zZWQgc2l6ZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ21haW50YWluQ2xvc2VkUG9ydGFsU2l6ZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IG1haW50YWluQ2xvc2VkUG9ydGFsU2l6ZTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTaG93IGVkZ2VzIGludG8gZGlzYWJsZWQgcG9ydGFsc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgZWRnZXMgaW50byBkaXNhYmxlZCBwb3J0YWxzIHdpbGwgYmUgc2hvd24gYnkgYW4gZWRnZSB0byB0aGUgcG9ydGFsIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBjb25zdCBrb2ZpQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXHJcbiAgICBrb2ZpQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tvZmktYnV0dG9uJylcclxuICAgIGtvZmlCdXR0b24uaHJlZiA9ICdodHRwczovL2tvLWZpLmNvbS9YOFgyN0lBMDgnXHJcbiAgICBrb2ZpQnV0dG9uLnRhcmdldCA9ICdfYmxhbmsnXHJcblxyXG4gICAgY29uc3Qga29maUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgIGtvZmlJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUJOY0FBQUdWQ0FNQUFBRHFuZWZXQUFBQTNsQk1WRVVBQUFELy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy85ZlgvN096djcrLy80dUgvMmRuLzJkamYzOS8vemMzL3ljai93OFAvd01EUHo4Ly91YmovdDdmL3I2Ly9xcXEvdjcvL282UC9uWnovbTV2L2xwYi9rWkN2cjYvL2lvbi9oNGYvaG9iL2hvWC9oSVAvZ0gvL2ZYei9mSHYvZVhpZm41Ly9kWFQvY1hIL2JtNy9ibTMvYTJ2L2Ftbi9hV2ovYUdmL1ptWC9aR1QvWTJML1lXSC9ZR0NQajQvL1gxOS9mMzl2YjI5ZlgxOVBUMDgvUHo4dkx5OGZIeDhQRHc4QUFBQkhxbGJLQUFBQUVIUlNUbE1BRUNBd1FGQmdjSUNRb0xEQTBPRHdWT0NveUFBQUx0cEpSRUZVZU5yczNWdHZtOG9heG5Hd01jYVl3NnVpeUtwRXBJNGkxVkl1dGtUVWkwcFJaR01NWnI3L0Y5clpLOTByVG5Nd3pBRm04UE83WDZsVzdmdzd3eHh3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQXdCeXU1L2tCS0xEd1BHL3VBTUNZWm90Z0hSTW9sa2JSS3ZDOW1RTUF3NW90MXdtQlZra1VMRDNYQVlBaExGWm9tZ0RodWkwd2RnUFFhNzVLQ1FhV3JKZWVBd0JhdUQ0ZXFJMG1DdEEyQU9WbUFZWnFJMXN2TVNjRlVHZ1dFaGdnV1dIWUJxQ0d1eUl3UlJvdUhBQ1FoUmxvWjBnYmdCVTg3T3N3VUxyQzZRUUFURUVuSjFsaTN5NEFCbXVURTJJVkFhQTNETlpNbC9nWXRBSDA0V0lmcmdYU0ZYYTFBWFEyeHpLb0pVS1VEYUFibjhBYUVSNjBBWFFRRU5nRVpRTzRDT2VtcklPeUFTQnIweFBoT1JzQXNqWTVXRUVBUU5ZbUp3MndudzBBV1p1YXhIY0E0RzlMQXF0Rk9CSVBnSDFyazRQSktBQk9HVXhPZ2owZkFLOWNaRzBhMWhpeUFmeGZSREFOS2U3VUJjRHBxY2tKTVdRRGVEWW5tQkE4WlFOd0hCZTM0MDdNQ2tNMnVIcTRIbmR5RXV4bGd5dm5FVXhQNEFCY00xejdQVWtSNXFKd3hYQithcUpTTEIvQTFjS08zT2xhT2dEWENZc0dFNGF0YkhDZFpnUVRGdVBDU2JoR3VIUnQybEpzK0lEcmcrSGE1T0crU1ZESzlid2dXRVhQNkV3YVJlc2c4RHpuSWd6WEFEdlp3Qml1dDF4RkNWMlFSTUZpNW96TEpaaSswQUdRNGk2Q0tLWHVrdEQvc20ybTN1UEJ5cXF1V3c3QzZoZGxXVzVaVHIxZ1dSUUdOUFBEaEFRa3E3a3prb1FFWk1XUmcxcHRmU3kzT2VrU0kyd2daTEZLNklWRmFmT3B2ODBCd3pSdG1tckg2RXNJR3d6RjljT1VaQ1ZMMXhuYW12cktTbFJOdCthd3plZ1RDQnNNWkhFaGFrSnY3WjU1eXlDTW9waitGYitzbzg1SDNlVEJUaHdHYWh0OURHRUQvV2FyaEJTS1BNZVorMkZFWDBqV2dlZU9jK0s5NURDWTlsaGs5QjdDQnJvdDFxUmFuRklYOGNvYi9vS2lpc093UGtnYndnWjYrUW1OS1EwWGcwNURzNGJEOEk0Rm5idkdzSGwrRUVaUlNpK2lhQjBzUFV2L1Y0em5CZ21OTGwzTmhwdUcxaHhHMFZZNXlaTVBtK2N0Z245NTNzd1p3SHdaeHA4OWpsbmk2S3R5eTVUTUVIbERySVppRWpxdXBpQWxJc0dpTGNNb3BYZmlkYkJ3dGE3SUpaZW1MSGhaNm9SbW9HOGx2aU9HK3RoeEdGTmJia2lCc0gvVGd1alNpUmwzeEcwR2FZaGJnUlh4SWpKTDVHbC9YVXZPWVd6Vmh1U0ZPdUlTTFdmS24vS1l2Zk56ZXR5UXpMTjJOWjhOeFpyQjErd3BtKzkwTlE5VDZtenRPOHJNUXVvbkRWQTJTUXN6WHdlUUxwMitJdW9JRzllNnNLWnNDNmNUUDVLSWkzelZVTFlodVdzeVZlUTYvYVRVV1liRFV4MVlVclowcnVzSmNock9IRm51aXNTa3VEOXphb00xb2RlcXpha2pETmNNVTJZa0pYSDFyWXNGN25qN0RDTHMrNWpPa3pYaDE2b3RxQnNNMTR6VEZpUWwwcmd1bGk0ZGNmT1l6dUJtNEVITXpYOHZlcWhoMlFCN1BBeFU1eVJqZFdFaUtDV2VPNElDa2hYaDlWdVRtb01Lckl1dXFUTmM0dEdQK1pOUlgrdlhmT1dJbU1Va0w4VkczWDRDc2tMc0tsNE94ZDQxUTUwWWlVdm5Bb00xblVPMjg2QmlMdm9ISHEwSmhJMDZPM0F3MFNHVCtab0lQR3JSdVRqNVdWRHhsaHFOWFBNZnJmMHJVdHMxN01rMWw4eVFMZFQ4cUNXVTJ6OTFqZGVXbkVIVzNnc1ZiL1BJT0pqcVFBcTM1eTVKcGNnVi93VkQySVl3dDJIRjRFeWc5blFvNDUrcFM1QlIxZEx2S214eUVwVE9OTDhpTzNhRmY4RVFObVR0QXd1bFhTdjVKd29DQlRMR3lvTnczOW9kQ1lyMFpvMG9uWS96QzRhd1RUTnJsTTZHNkZwTm9GREd5dU9KQ3pobUpDWjBYcmtScVpmT3gva0ZROWdtbVRXaVdPVnhnNXAvakJHb3R0a2VUc1BOUmVPWjg0Y1hrdzdwZkxSZnNMVURYM0J0ekJwUm9Hby8zdWRkT3hGb3NTbU92SjkyUzRMQ2hlczRNejhpVFdKM3RISER5b0dKcklTZW1TbnNHcWFoZzl0V0xlOWpSNGFLM2RHbVE3amZZM3Bab3doZHMxeS9VVnRGaGxxUGxUVktjYjNIWjZ3NVpmQ2VqNjdaYnJNNzhjN3FqTXdValBid09zSGFnZFZuUWorVW9Hc1RzSzE1VjQycFlmUEd5UnBPVkgxbVFUWUwwTFVwMkZTMmh5MTFSN3NoQjVkN1RHV0h4NnZVUmRjbVlWTlpIcmJJK1pCUDJxV1lpVTVvemVDUEpibzJFWnZLN3JBdHg4a2FkckZOYk0zZ1JZS3VUY2JtYUhQWVVsY3dhL0x3MHVSSlBWejdoNCt1VFFkckxBN2JlcXlzVWVMQUJNNFp2QkdoYTFPeWErME5teWVZTlhsTEI4NlkrNTdRSG1ibzJwUmtSMzdHcXRzSTRuR3locVVEcmJQUURmdWZiVm15WnhrTlpvbXVUY3UydGZYa2dUOU8xdkMrQXgyejBIeGJWdlhwZlJHcVhVNURpSFYyclNRWTFyc2htMFVmVERKTzFqQmdVN3dXbXUrcWhuK2hyYmFrM3d4ZG01cXpJWnRWOTMzNjQyUU5UOWpPZUNRbEs2cVdYOVpXRzlKc2lhNU5UbGJ6QzlxY3pCT1BrelVzaVo2SlNGelc1eDRHM1dWYm8yc1R0T01YbkRJeWp6ZE8xbkJoa1lxQk1xc0UzZ0dwRWJvMlJmbUpmKzFJNWduSHlocEZEdnhQUW9LS2h2ZDJ5dWtyN0Y4a3drUFhwaWlyTFZ3N2NBV3pKbS9tZ1BqZmZYSGlaK1F2Y1dabDNmSno5YUhJcUo4bHVqWk5GZjlhVHNaWmpwTTFyQnhJRGRkWXpRVzFPYjIzT2JUOEkwZEdmWVRvMmtUdHJIdkVGbytWTllvZEVQdkx6dzVjWEp2UjMwcEZyMVdMMGJXcEtxemJuaHVTbkExN2xsTmZtSWdLRDlmWWljdW82SzJzVm5ZRUVGMmJMTmJ5cjJ4cFNyTGkyUElYeDRKNndVUlVkTGgyNEpJMjlNWlIzUkhBT2JvMldYbmJheFlnTDl1V2RYM2l2QkU0TVNNbEsxdCs1bFJRRDFnUkZkdTdsdFZjVmtYbkNvVWJ5ajEwYmJyeWRzaVpLRHZ5YzZjeW80SHNXdG0zMURqWGJrNTk1UTJYMXRLNUU3L2dSSjB0MGJVSit6cHNqRlQ1ZUYyc0xXa0lXUzM1TUFiWFN6cE9LUExWa3BmVHF5Mi9hRXRkQmVqYStOaWhidmpINm1lSHNtQVpDU2tFL3ZrVFV2S1BOQnZTTGo4cHVHZ3VjQzV4UFM4SXdpaUs2YTAwaXFKVnNQVHNMcU9iNnNoYXYxQlYvS0lEZFlLdW1XQjc0aDIwZGJuTkZJZXRKRVd5V3U0b3FvNGhhVU05ckozUHpmMWdIZE5sYVJRR25xVXJxNzdHckhYOUJqWXFMdytNMExWeFpVZmVYVlBtc2dPcGMrMkdsTWdhdVRQMmVtYmFCK291K1N4cFlVejlwRkd3c0M5dXNicXNDWGVOZDBDZG9HdWp5eHJleituUU0wYVYvcVdEZXJRTndOdFcwZk5ENXgwdmlGSVNsSVMrVlcyYlNYOXA1YnUyUWRjbXBPYjlOWVd5THlFakJjclJ6dGdYYXBiUDN1MTNtdm5ybENRbEszdmV1cnlrWG1xdW9XdU1kNUJSRitqYTJFb3VwQzB6Nm16VDZuM2JRYzYveGtpWFFzdCtwM2tRa3lKcjM0N0xlR1BxNDhCSDZ4cWpMdEMxa1dVdDUvckx0dFViblpwL3JTRk5Db1g3blFMbnhXeVZrRHFXcEcxR2ZUQ3VEa1BYcHFqazR0cUN1anJvSExBeHNTK2p2SUpmbEZOSEwxMXpsekZwRUpvK0lmV3BoK3pFMWRtZ2ExUFVjQmtObzI2eVJtTjBxcEhlZ0ZWd2xmdWRWbzdqaGFSTEVoaTlqTENtSGc1Y25ST2hheE9VY1FFaXR5bm5HZ2RzYllkdnJ3WUZWL3F5MU5oUFNLdlE0STI3S1hYSHVFSUhkRzJLR0pkMXlxbVRVdHVBTGU4MDIxQ3U0SjJRUVdKRDM2TXdXMUVQTmRjeERUV3hheTI2Sm9oeGVUdnE1S1Jyd0ZZSWZCdmxGZHkrcmhFbEJwWnRGbElmVzY1UVRhL002NXBGVitnYmhuRUZxa3p5ajhwSlJpblFYbWtGdDdKclJHbmdPaVp4UStybnhBVmNQdTZDcmswSjR3SUVUM2hYT2g3cmQreGFTV29WM05hdUdUWm1DMUxxaDNHRml2NC9tanBCMThiRnVBREJNNWliVnNQanIzRzZWbkNMdTJaUTJieUUrcXE1T2hXOWthRnJVOEg0Z0dFck5XUm4rSzcxeTFwRFJvbzhaM3p1aW5yYnFGNExQY2U1cXBWMWRHMWNqQThZdHF4VnZ3OWo4SzY5eTVwMUw2ZDVFYnJPeU9ZSjlYZmczVFZWV2JCbnUvSllkOXBWWHF2Y3Q3TkcxOGJEK0pCaEs5Uy93bVdFcmhYOExVdmZUWk11blZFdFNjU0pkMVFYR1ozTGkwUERYN1ZWUnU4Y1ZDNUFCZWphZUJnZk5Hd241VmR1RE55MXZsazdrY0hpdVRNYU55UVJlZGVxTWZvSUt3NzFzODllMzU0ck94ZUhybzJMcVYwMHY2UlF2bkl3ZU5jT3ZJK0NqQlk0STNGakVsTHlUa29TYzFJM0RTVWZYUnNQNHdvMW1mZ1haMGRpaHU1YXhmdW95WEFqRGRubU1ZbHA5UDVyd2hUdTcvYlF0ZkV3cnRLUkxpbFZyeHNPM0xXcTd3aldlSUV6dkhsS2dyU08xaTUvdmdmcWJvYXVqVVNrYTVLZmU5WXFub2dPMjdXS1Qya1craUtlT2E4TXp4clRQa2l1bEMxdU8ramFlQmovV0ZXK090WW5kY3QvaHd0SkZEQlExeWFhTmFKMDRmeWY0Vm1qa25lUWs0emk4ODFJVytvaHNyZHIzMi8vK0s3NHgvNjh2Ly8xKzluOS9mM3RMZW5FT2o1SFlMdXFWVEx6MmloZU9SeXNhNVBOMnJPVk15QTNKV0hIQVhZTVprWERQM0FzcUplVmhWMjcrWEgvNjNIL3h1UHYrenY1dk4zY1BUenUvL2I0OFBNNzZkQ2hhK2Z5UTZ0Z0VsQ3JuWWdPMWJVcFo0MG9kcDBYNXE2RS9xTVo1a3FxakoxUFV1cjZzR1BVbDI5WjEyN3VmdTAvOWZ0ZW9rQS9IcDcybjNsNitFSEtkZXZhdWFLUjNyaFlxRjBSSGFocjA4NGFVVHAzQmhLUkJJc09lTXh0NnRyTno4ZjlKV0lGK3ZGdytRZC9KN1g2ZDQySW5XUm5vcTNTRmRGaHVqYjFyRDN6blVHc1NFSm16d0dQMUxHbmF6OWVSMnBxQy9UdC9tbmZ4ZTg3VWtta2EwUzdWbUt6eDFlQnlFakFVRjJyK3A2OXNFN2dER0JCTWhpL3FDVXpySzNwMnQzVHZydkhIZ1c2ZWRoMzlxU3liR0pkbzAwdHRYY3hWenpFMGQrMXE4Z2FVZWhvTjB0SkJyTm5KN1J2U2RlZXE5YlAwLzAzdXVpbGFyMDgzWkpDVEtoTk82bXJlVTVLbjR6bzc5cVZaSTBvY28xK3VQYjJDbkREOTNhNVZuVHQ5bkV2NEo0dWVLbGFYNzl2U0EzaHJoRnJKWjR0SFZUdTlORGZ0YXZKbXY1bDBTWEpLYTE1cmhrN0ZuVHQyMy8yWXA1KzBOZnU5MEora2hMaVhhTzhGYi9FSWxlNVFxKzlhMWVVTmFMWU5YWG5HbEczVDVxUkVYd0x1dmI5ZFFxcWRteDEreVR6WStWSmRJM3lWbnhOcWxYNGI2M3VydlhPV21QQm1kQ1J3clltR1ZaMXpUVy9hM2Q3S2ZmMGlXKy85aEp1U1o1NDF5NkVyYVl2VlFvZnNHbnVXditzWldRMWpXSHpTSXBOWFFzZDQ3djJzSmYwK0owKzhtTXY1eWRKaytvYTVjSkg5TFlLSDdEcDdscldYRlhXaUdMWDBFVURtN3JtbWQ2MTUwR1Z2RHQ2NitXUm5hd0hraVhYTlNwRU4zMW5DaCt3NmV6YU5XWk5YOWdXSk1laXJzV080VjM3OXJoWDRlRWJ2ZlZkNE9lcUQ1dGsxK2dndWp1eVViZFhYR1BYcmpOcjJzS1drQnlMdXVhYjNyWEh2UnFQTi9SS1lBNnFKMnl5WGFOR2NPV2dWUGVCNmV0YS82d2RKNUUxb3NqTXAydjJkTTB6dkdzUGUyVyswNnY3L2Q2SXNFbDNMUmVjaURKMW04WDFkZTBsYTFONHBWNXZvWWxQMXl6cTJ0cnNydDN2RmZwQmYzeFRXTXVmSkVPNmExUUtUa1RWSGU3VDFiVnJ6cHFPQzlubUpNdWlycEZyY3RkdTkwcmRFWkhBSXp1TjJ6M2t1NWExWXQrdlJ0bkNnYWF1R1owMTlxeDhzV09NNWFTZTd5Z1draXlidXJZMHVHdmY5b3JkMFV2V2xMb2hjZkpkbzBMc1d1K0RzbStsbnE2Wm1iVU5LdzhmMzhsZTErV09rVXB6UjYyVVpOblV0ZGpncnYzYXEzYW5QbXY3M3lST3VtdkN0NmtWeWo0eExWM3JuN1VENlpXeHNtNzVCYWRxbDVNaXFldW81Sk0wbTdwR00yTzdkcnRYNzA0Z2Exb2ZzY2wzclJTNlRTMVhOdXJSMGJYK1dTdElwN3hzZUZmdHNkaVFDckhpSTFUU2h1N2FocFgvWUJuMXR6UzJhMDk3RFhUODBCc1NKOSsxamRnWFRIaEJWTDVybG1WdFc3VzhwMmEzSVhtaG80NUxBc2JzMnFZOG5mOTladFRUMnRTdTNlMXQ4VURpNUx0R05mOVlLZlJmMFRrTlhiTXNhL21oNVVLYUlpTlovbEJuRFl6cldsYnh2eHd5NnNmVXJqM3RyWEZMNHVTN3RoTzZEcndTbUwxS2Q4MjJyQlVObDFEbEpDZWRqYmthbWhkbC9iZFRoNkRYbnp1VWpMcll0dnlkbGxFdm5wbGRzMmU0SnJkMElOKzFqZERDUVNudzU4cDF6YmFzWldYTEpkVUZTWW1WbjZFU21BYXExVmFNTGptbytKd0RNN3YydUxmSUxRbVQ3eHFkUkthVVRQU0VxUDZ1WlkwQnQwaHVxcFlyY0NwSXh1cS83TjJCanR5MkZZVmhwSENDTkFpUzR5VWN3cWpjaEFocUZVRnFWSzZCdUhFZGllSkk0bjMvRjZwaE83WGo3c3hvZUM4cFV1TC9BTHZPenVpTFJGS2sxTEVHdUMzcktWNlR4c1VjRVJlMmJNOXRlVHlVMUhNRUpPYWFDMWxqMnpBK3NyaXU2VmlzOGUvVjBzdjJZSXZodFdhbXFQbnU2cmdLSDdadnNuVHQyVkJVanhDUWxHdDkwSS9JMWJYR3gyVXQvZTNLWkJEY041OTlOS2Y1NFBNdnYvenE2NUMrdVlrMVQ3RnpPSnVSK3JRL1MrYmFQbWNOR0d2WVpGd3pRZjkzOHdFTFBUaXVsY09hV1VpNGswWklINTVFLy9UNW43LytGb3hTc2NaZlJyMUlIZUwzSUpGciszME1IWVpYQ0VqS05jVlk2SkhPdFZKWVV5ZVN6L2NJN2NGbm4zLzFEZEtsUEtXb0Mvc3VkVmpkRnhtNjl0TlFXSThRa0pCcmtIUnRCalowcmZGYm45RFNlb3JTSEVyd3QwamJpWkxrOWVYYk5mNU85VjltNk5yTG9iQ2VJaUFwMTJhNk54ZUVVVExYK0t3cFNLZE9GSzBlSldRb1VRNzMxZEtWR3F6dHF3eGRHMHJyWldUWGdoNHBTM050YzlhTXA0aE5KZXptTzFHcU5PN0p5ZTF2OEhWMDEzWS92UGFtNGx6ckU3dFdBR3VXNHVZTmNrOVRzdm9yczFtc2NaSThYU3ZwWllQM1BTbk5OVVAzMTBSeUxYdldQanlESHZoWnRDZXhRb1JTZERXc0trL1hpcHMyR0lhbmUzSE5KSENOejVwVEVFN1BGRmF1bS9ybVBHdnd0ckRSdlFacnk4KzFGME54UGF1dXNWeHJ2Q2dQZWE3YXl2OGt3Sm5TWllKY00xaFZYTmVPTWgwNkRDK3JheGV6ZWJObVBMMnB3a2FjK0s1MSszWnRLTERxMnNWczFxeDFsSzZsUWI0Uko3NXJ0cnEydnVyYWZlbkVybFhXZnM5bkRCdTlxN3BXWFh2ZlhXR3VJYkZyRE5hdS9xU2lXTXNhTm5wWGRhMjY5cjRuMWJWQWpSclBmTEd3bENYMi84dG5POGEyME51cWE5VzFTSzd4djR5MmpPZlFsc3RhSVRPaFJVd2VUSlF1VlYwcm9MZXVGZlRldThuRXRZNjJaVTE3K3FRancyWXBXUXVxYXdWVVhidVl6WlExTmROOUhYV0JycUZrdWVwYUNXM25Xbk1PZ1FKYzY5ajdSeGUwd1A0UFdjU3BtQUUyVTEwcklYSFgrRDhpZjljNjlqUmlPYzlkbjlhQ1g4Ri9rQW5WdFJLU2RvMy9WV3l5ZDIxejFscmFMcStSWVdxaE5Ka0R1bGJZNlFhTUhYTmpua2VGM1BjcEVtWXQyejJ2enpRalNtV01zRGtjMExVQzN3L2Q4SDJENlF3RXlIeGZ5YzFadzBTQlRaTzF0aldtczNhYzVuME5zZGtrcHFzanVsYmdmaDRidWtiM04yWHUydmFzOVJUUU1uWWFuOVQwemxOQWViNTM0Skt3ZGtUWEN0eC9UWHcvRC9aUGNFSDNLa3NxMXpxQjZ5RDV5clc1MXpoVE15NDdlUkpGVDVHYkZBN3BXb0g3NVlxN3hsYWxSODduN0NWbmpmOFU2bDJEaTVuVFBwNUVZUmFLbUxmQU1WMTdNaFRYVDV1NU5vWDlCRXJzV25hc2RiZGVqUXBYMDI0WFQ2SkFGMDAyN3pTTzZscUJDejErM01vMVJXZFNRUi9abU1DMTlLeng1MEt0d3FyMGlXNXBRcTQxZHZJazNldzZCUnpYdGZJV2VqeE82Tm9xSXBhdzMydGp1WllaYXhodjRrZGpkV1lwZjNWdVRIZU83RnA1RTZLUWRvMzdHT3JDT0d3VHVOWWxQYUdGZjZDYzcrT3RsRmhRVXRVMW5tdFBoOEo2SWU0YTkvcnN3cjVCSnBacm9hd2hUaWRhM2F4eFk4WVhQM1ZRWGJ2bzJsRU9SbjRxN2hyM2NVcUgzZWFwNks2Tk9iQm00djRUMUx5RFBTYXJhK2RkTzhyRXdlT05YRk0rOFBuRzA3MTV4SGJOWlRHc1BzWGVHc250OG9hdHV2WTJpNE1Nc0wzR1JxNVpDcHZYMUF4SVdLNDV1aW1ES0puWXJBRnVqemRzMWJXM1dlQVlLM09mYitTYTlvSHpiRzBRaDN6WFhCNG5BWnlpc3dhNEhkNndWZGVZbjlpam9haCtrSGVOZDMzNndHRzVQcTVyanJGTmwyQ2F3Wm84YkI3RlZGMWp1b1pYUTBHOWhyaHJtdmM0NVhDNW1lN1BSSFhOSmQzMGdpOU9WOFN2dWFYcW1wQnJoMWpwOFV6ZU5lYVNlUlA0a2dKaXV1WW9KQVBwbEU4MEdUc1gvZnA3ZGUyOGE4ZDRFSDIwald1bjROV2ViY0FWeG5iTjVYTFlacC9xRVZqNXN0OFNyYTVkY0czL2UwdSt4Q2F1alJjVUNYeENjaEZkY3hUWUJPSG1aSjZhb2crbnFxNmR2N3lPTUNQNnd5YXVkWFErRlhqcVVCZlBOWmZOMFUxTndqYzM3YjVtRHFwcmI3TUE5cjgwOXpVaXVNWml6WVZlMlRyYXhldUprWUZrWThwN3FIbFhNd2ZWTmI1cno0WkMrakdHYXh6V1NBZGUyVDdUSGZHOWdtQkx5bDlwYUUwbnJFdjNwNFVDbThZVzFUVXAxL1kvYy9BYUc3ZzIwb1ZjNkpYdE1uV05ac2pWcEwyRGNyUW1oUlYxRS9GYXJLcXViZTBhbmc5RjlDT1N1NlltdXBRT3ZiSzdYRjJqRVdLTmFlY3FsQmNhekdzbTR1ZmI2cHFZYTd2ZURmd1ZvcmpHMkFiSGhlOEJrcTFyMUVLcUpmR0lucFVaemV0SUpxZXFheEt1N1gycHh4TWtkazA1N2puaTUxaWNNejV4MG12SXBCbTNhL0Z1MkpaMGg5L05xcnJHZG0zM04yd3ZnTFN1OVo2N0txS2pNNDBadTBZelpPcVNUOEJhZ2FXNWp1U2FWWFdON2RyZWI5anVFTWUxNEhPQ2x2Qzl4NXFjWGFNUklwMFloa2E4WWV0WFk4enZWRjNqdTdidktkR25RRHJYVkxjSWZPNzZ2SWhadTBZdEpQTHBsNU01cmpXTko5SDY2dHE2L0FYWDlyeUc3U1dRekxYR2VicmVHSDZWdWN4ZDh4cjg5QWJML3h2dTc1eElOcStxYTZ1YUlybDJOK1RkSFpERU5XUDZtVEYyc3U2cHFNbmNOWnJCcjl2aWRjMlpycWR4TmtQU3VlcWFnR3U3ZlV2MENZQklydGwzVFcraTlma20vS3V6SUhmWGFBUzdjWXZ0TlhyZVUvYUpwUE9xdXNaMWJiOVRCeitCbnlISk9zWWc5cGkvYTlTQzI3VEZrWjZhOVhLL0l2bTY2aHJYdGQxT0hid0FMM25YUnM0M1J4ZmdtbS9BekcreWE5RE1XVExYa255bjZ0cTJydUdISWROZTNZR1Z2R3VPcytaZ1JnR3UwYXpBU2pGdUN1TSsvUzVKLzd5K3VpYmcyaDVmRTMzTlpFM2V0Wm4xeGVtS2NJMWMvRCszZ25ndFhlL1N4U1dmcXE3SnVMYTNJMXdlZzVXOGE3UGluTXZuVlJtdVVSZDdCSCtHZklxdTF5UjF6VlRYdG5idDdyZmhsb3BpRFNZbGEzRDhxVVo1MTVhRVEyeVdjVWNZZVlETlZOZU81Um9lRHdIbHZEbFJCTmRteGZ0bGVqUFhIS1owUTJ3bnhtTDh5SzhjMk9yYXdWekRYNGZWRmNhYWxHdU9lZGR3d2xhdU9VQjU4ZjlXaGhFR0ViTFZ0ZXBhOXN0em4wSXNrM0RCcW8zMWJlU0NiSklOc2MyTUVmWElIN09ycmgzT05meDl5S2puNENUdm11K3dKdTBqN1RkbW1hd0JmYW9oTnJvZVl0UXdGckRaT2grNlc5Znd6MkZGNWJFbTRkcmNzSi9CekVhdVdienZsR2lJamNFTEk5NHY3a2krcGE1ZmszSnRMOHZZZUt6SnV6WXE5aEtIQ2F3c2Y4MkdXdWlXM0E1ZG0xTytSK1dxYTVtNGhsK0d0ZVY4bm9HMGE0c1JlQkl5WUdYWnJBRk5raDNFR3Q1UVpkd0ppNFR2dlZOYlhjdkZ0WWZyWUN2aTdhbVBTbk96QmpYSHUwV3hQTlpDaHRpb1FVaUdNUzI1bldzZFNiZlVmWXF5Y1EwUGZ4MHVWQ2hybUNtOHFSRlpRR1UyY2ExajNaVXM2aml1WVNiaHV1cGFQcTdoN3RWd3RsSlpRMCtoTGEzTWRvb1RtRm5PcFJVNnhIWTZrR3VHWkp2clB1Q3lyaFVPV3dUV29IeWdhcDNVdUpKR2V0ZThZZS9pM3gvSE5WaVN6RGZWTldIWHlvYnRFU0xVVTBCemh4dlNQdXBBdVdWY1dZeHhwT1k0cnNHUllHMDlqNHIzcVUyUTdydmZoZ3NWOHE0Nyt6dDdNcmdsTmJPMmhKWjN6VGNTZjRsRkhjYzFTZGk2ZWk1eUJOZktoVTJHTmY3bGJMWGtOZFdCblJWaURXcStqZmNEdVlaUjdpRzB1aGJEdFZKaFk3RW05WjMxenNpeU9ZR2ZaVnhadkNHMkE3bUdkaUdCVGdyVnRUaXVsUW5iWTBUTVRIUzlaYkpHL0c1UUl5Q1dhMHNqZDdCNWN5RFhvS3duWnBNQnFtdDV1dllwYkR0Z0RZRHUzVFJOL3lmWm01eTF0alVHZ2JuNFY3RVZmTGZUUlQwdlRqUGVNSXErVEJIWGE5M0NRSzNYUUhVdFc5ZitDTnMrV0l1V1M3RG50V1d3eGh4aW0vYnpmdWlFZFRVbUtBVUExYldjWGZzWXRzb2FnelZxSUpFTllDMW9UUXIvaHBPOVpyVzRGKzcvVUhVdGE5Yyt3RlpaNDdEV1F5VExZSTE5WEtZcFl2ODFVMTNMeDdVdnNuWHRkOWdxYTVkU3B6UlhrcFZrRFJnakRyRk5zWFpjNUdQdGtILzdjTzFCdnE2OWUvT2dzbllwTmJORWtIZnRwR0pzQlREdC9Yd0R3YXBydWJ1R3UxOHJheGRybGxRWHNHWHNaWmg0aU0xeGZseUI1MkI5VW5VdGU5Znc4SmZLMm9VNm4rejZ0UXpXRWcreFdjWmJESndXdXBwQi9sWFgxcmhXQW15bHNqWW12SHd0ZzdYRVEyd2RYVzJCZkpxdTF5RC9xbXVyWE1zZnRrSlpVeE52Q0YvZXRSc1puU0lOc1JtNm5rWkFiRTRKQlZSZFcvZDl5eDIyUWxsclBWM0phOGhsNWRlWnFVaERiRXB3dnd2WlliMFpCVlJkVytsYTNyQ1Z5Wm9hR1E4OW1iZ0dFMmxMTWIvSkFOdXk1cmNXVUhVdGpXdDQrSy9LMmllWmhYRkxrbzFyc0hSTFhzczk0SHBJMTlBK2xubFUxMUs1QnZ5anNuYm1abzNCV21yWCtFTnNzK0MvdFlWd0krMWpPclM2bHM0MS9GeForMUM3QkV4TjV1bWE4blJMbzl3U2toT0VXK2g2Q2dWVVhVdm5HbjZ1ckwxUFR4VENXcDZ1eFJsaTB5UTVJeXBuNllJU09wcHJka3ZYOEhObDdmMGphQkJydWJxR1BzWVEyNUorckd1aWZid2RXbDFMNnhyK05najNxanpXbFBXQnJHWHJHazRSaHRnY3BaNDUwTFNpRGlWVVhVdnFHcjdQLzV4UVJnelYxckNXcjJ0cWtSOWk2NUlyNDJoRkdpVlVYVXZyR3I0L05HdktlZ3BuTFYvWDBNZ1BzU2xLUE5xbGFUZkRhOVcxMUs3aCsrT3lwcTBuRG1zWnV4WmppRzNtbjNRbC96QTlvb2lxYTZsZHcxOE95cHB4M05lTmNuYnQxaUUySlVTbFZ4REswSnBhRkZGMUxibHIrTzYzNDdHbStvVi8wSGZXcnQwNHhPYWtubTFIQ0RXdlloUmxWRjBMY0kwUDI4RllhMDkwUTc3Ri9XWHRHaHBQSkd2M09pa05ST3FKZHJQS283cTJpV3Y0N2o4RHQrZkZzTlk2TDNRY2NkNnVvUXM0VEo3eHo1WGR5RW43UFQyR1Z0ZTIyWHZsN3Q5YzFsQkVxdnNZTmU1bG1ybHIrRzk3OTZMcktwS2RBYmk0Mk1hWXkrb2hDc2tJcVVVNmtuT1JrakJSRWltdHhNSVlUTDMvQzgzWnUzZWYyV2VQTVFWMWdjTC85d0IwSCtQOXU2cldxcXBHOFQ4MDUrWm1vaDNmVURVVXVmWTdNdXluLzlsK3JKVjF4eWRyYU5qYWN5M3JGUDlUVzI1cUVIWGxmRVBWVU9TYVJLN0pCdHVXWXkwNzF5MmZvYS9vaWJYbm12SWx0a3A4U2l1L01YUTdUYm5JdGUvSXZQL1lacXpsWlgyNzgzbTZncDVaZmE0cFgyTHI1YWUwNG5tOGpSdVJrV3V5dWJiVUx2aC9vVlhLeTZxK3RWekNOYU9uMXA5cnFwZllhdUVIeWRZTU5sVTFRSzVKNTVyNVlQdUZGcFdYZFYxWDVlOHU5VGR0Mi9KUjh1MGRGdVNhNGlXMm5BdTZTZjQvYjZ0cXNKVmNjK3pNTmZyRnVsaXJPaTVCOG81MUMzS05jclZMYkEwWDFHUnlzYmFkb3p3MmxHdk0wbHlqbisyS3RhRWJDYXdZckVubG1yYXJrZ3Q2S3RmZUgxUDBmSHZETmVUYUIxckl6emJGV3NWdEhxeko1SnErcTVMdm1hb0Z1eTZuR2NxZWIzQzRobHo3UUV2NWUzc094NjI0SnZlU2hOaVJhOVJOaTNSVkF6YmVsN04yVDIxeHVJWmNrODQxK2MyaWxzUmF3ZlhvYXhKa1NhNU5YR0s3cUt1d1htbWE3TWE1UmNPMXlDY2h5TFh2YURsLys2c1ZzVVlkMTZMSnlReER1YVo2aVMzcmRUVUFmcjV0MzRKcjNwTTlZeVFFdWZZZExlZ1AveXVVYXYrM2JLeFZYSWUySkZOTTVacnFKYlphUncvZ2x6dkIxbjl0YUxSbkRMazJxRnBkcnIzdnFiTGdYS0tiOWFsbUx0ZW9WYm5FZHA4NHJjOUlRTjd3MzFsd1FGSG9NWVpjZTZKY1k2N1JUMzlhZmF3UlYrNStKcE5NNWxxbWNvbXQ1Rnhwc3MxSU5kNW50SmpUM21FTXVUWnN0YmxHOU85cmo3WEM5ckVhbWN3MUtsVXVzVFY4cXVaTXc3S3E1Vk5kYUJucGI2R0dYSHRteGJsRy83VHlVeVJMKzFQTlpLNVJyWENKTGV2NVpIMXp6dWlCdkxyeHoxYTg0VDBPRHg3N0JyazJZczI1UnIrcyt3Q1BrcXZUTnptWlp6TFhGQyt4bmZrc1hWT1hCWDFYbnVlZXROTG5ORVc2RDhJb2lsS2FKWTZpS0FoMlBudURYTE05MStqbk5jZWF3bHk3WHpKU1llVzVsdlVLYnhTOWNnbDkrdzJYVWRFa0lWTUJ1YmFOWEJ2Y2V2QnZwSTM1WEd0S2ttUkpyazM4eE83MFROYnhCVFUwall0Y001NXI2K3pPK1FpMi96ZTZKZFI4cnJWVlJ2SXN5VFc2S0J3VEZUMDNSSDVIZmNTUWE4aTF6LzdtMTdYR0dsVmNWbmZKU1FWcmNvMXVYRjAvZjhVTmtUOWxmSWRjUTY3OTZBKy9yalRXcU9aU1dvV2haazJ1WlhlRkp4WmQrVUxPTkUzQ2tHdkl0UzkrK2svZFcwTE41OXE5VVR2OXRDYlhxT0FLTjYzZitDSnFtbWlQWEZPV2EvRldjbzNvVDFwanpYU3U5YmRMUWFwWmsydDBrWnlJTGw4N2FHaWkxRUd1S2N1MWFEdTVSdi82bDAwRzZtUE5aSzUxamJaTVN4TWFaenpYSkFkWk5DSzdjK051TkZYQWtHdkl0VWYrWVh6dmxIbnQxRWdyTTlJaithMEwzZDFITk1KNHJzbGxVVWtEekJWRjVROFhUeDNrR25MdHNiLzc3N2RZKzYvbFltMStydDNiYTEwV3BFKzZaOS81TVkweW4ydXpzNmljOHJDVnhob0ZETG1HWEJ2eXgzLyt4ei9TcW5SOFdOZTJiVjNYWlptUmJySExQanVTa0FWempTb2xIV3hmZzIydHNaWTZ5TFVsY2kyekk5ZldaN0NJWjFUc3NCL3RTZGhDdVVhTnNsd3pIR3h0UnBNZEdISnRpVndqNU5vOGd5bGcwc2xoWHgxSjFFSzVKbDdITEFXZlpraEQweVhzUlhLdFJLNXRRcm1HWEF1bFdud0VjKzFDcWhXOXNsd3pHR3hYbW1HL2xseXIrS2ljNWtLdWJjWjVCWi9ibmozaXBpVHNzc3c1L2hVWGtwR1loaHRRMFF3UlUwVysvMzRVeVNqVnZVNUtrR3VMcVJmLzNGS1BQUmFRc0pLUHkwbTlSdTJGVHhldVcxL1FIUDVxY2kzVGZiOFdIOU9UcUVoanJ0VUV6OXlXUHQ4cGR0aVFoSVR4VVQzcDBLbWQrQlYzZ3hVRGNTSFRqWVRkTlY5RTB5bnFhRWF1TGFwYk9OZU9iTmllaE4yV3VIZEo4S3JrZ3NSbE42N1JoV1pKSGFaYlRLS3VmTVNacE5UcUp2SW41TnBpbGozM1B0MnpKeHdTVnZFeFo5TGlyUG9LZ1V2UE5la0ttdWZBdEl0SVZLRjVYSjRyVzE2amdBMDZrUkRrMmt5bHhHQmJYdXlwK2JZTFRFL3VwTWxWZGIwaWI3a1dOYzBVTWYxQ0V0WnFidWRwbFkzN0F6WW9JQUhJdGRucUpUKzJvNlB1MjE1SnpCN2tkTXJiS3M0OVY2N05hUzZQS2FTN1J0Um5KS2xVVm43eWtXdEx1VW5NMmlTbE81WGZkbXFYdWs4dTd3VzNMSW5MNmhYZFZCMHdBM1lrN3FhNVMvR3FhampvSWRlVzBrdjhLc21KSERiS0ozRlp2OVN0NW1maCswUEY1UTFYcDY5cHZwaVo0Skc0N0Q1U3JKU1VkWXFhU0pUOFl0K1JhOU1WRW91dlV0SURFK0RTQkVVdjBiVWxwZVpEdXB6bUtsdGxxWmJSZktuSGpKQjQwMktqWS9QUGo1VGtXanUwekFmRHJndVZReU9YQ1Vsb2dxS1hpRFVwelhDN21JU3lVWlJxTWc3TWpJZ2szclJnN01nL3Y2QUpqanB6clNVWTFpMHllMDhQVE5DSnBpZzZpVytqbEl1ZVR6RnZlaTZscTBqT2lSa1MwQlRGZmVSblJGTGVLWWpOdmM1YzZ3Z0c1WHlKc2tIa01sRUhtaVM3UGtxWGpDYUphWWJ5enI5cUM1S1hWUjJmcTI5S2tpTGZrU3RmT0JCLzAvMkYxTW11OGo5VHJwSmNhMVo4NGZ0YTFYeEFSdHFrQi9YTHljTWpuUDZhMDBST1RITlVkLzdaclNSRjh1dWR6M0NyTXBMbU0xTWNtaWh2cHMyM1paL2Y1RFJOb3FZaVZ2UEhDb0loZDI1OGtCczZiSXFFcHNyTzE1YS82OXZybVNhTG1aUFNMTVh2LytGVzlmMkRSZDN4S2ZyM1VKTjNZT1pFTkZWVzNUcitUdWhGejNoKzgvSDhiczRMUGFySnRjdGdReVlNS0xucHczSmpYNklQM1l5QU1aL1c1dU9QVEVoYmw2VEdpUmwwb0kzWnFjbTFjdkJ2RkFZMDNPd2hSZWxCWXRuRkZFOTA5Y084ckt4dkhSL1d0OWVxSUdWaWh4bmswcmFraXZwYWNvN0N3VFE1Tjl1OWRuVFlkQ21abFh4TWl0WXJMNnY2MnJidC9jZmJkYzVsUmtxbExqTXFwazBKRmVVYThRRTV3VU1OTjducC9lU3lPWTVrVnNEZU9DbTlQSTk5Z29ub1ZEdFZDOGN0RnRnbXlVM3VFWTk4Tm85SFpyMm43enFYMk16YU04TWMycEpFV1pua3l0R1pPMFhEalhWNVJMNHQwNU9JdlZudkVwc3hCeVp2OVRVaWpRSmwvOWdLRTlFcENtTW55MFkrazdBbmszYWZ0anE4c3BDWnRNRXhzcU5zZjBYT2NhVEhCSzJoazJVam44bEp5SnlFZmVjazlMb2V4Um9xQnhPRUNndjk5K0ZEYXVDcmk1a0xUa0tYeVFySW5QMFBLM3N2U3lMVzdCbWFhK1VxWERkdU1HQVRsdmRjZjFOdUVqaE1pdW5hWkxMbEFwMjRFNXZMb3FHNVZpRWJSY0lxamdHYnFFNy9QWnVublhVTkFIdjI1dFdYMkU0T2V3UURObkd1eWtsM3hqbkhJV3hDR3M3MU5xOGxnV3ZmejNqQzNyejZFbHZJRnJINmZ1Z0pRclZIY04wNHg2M3ZJaXJPZFg1VWFlaXpKMWE3bVdySDNyejRFbHZJQnFFa0tpWjExUzRiVjN6SUhUUFJUeXF0RjV5YzlwYitqRWNibmhpSkdZczE5TEFKQ1JSSGVNWTVSM1B1cUtMWE4xdzc3UjFiOTBTbjdsYi96aVk0TWdsMkZZbTBpWlZ2cjJnNGx0aEduWHROdzdVMDNBMkVtaFc5SGdGN3dObFFUNVdBUFJ1QlhhTGpmT1hkZWlWSHNJMnBPTmN4WEl1UG50MEx5aEY3eU52QUFFS0kySTJ1S0IyTU9tbzQwZUdPWUJ0eDFYQjljQkx1SGFhWG01SmVxYnYxM29OUmljZEcyVDhUalJMU0t0YlIxRkx4SnhvVUQ3S1dQMVhRVkVtNEgwb0VxMnFpdTIwdlpRdUlIQ2JBOXBwbzZuaWtVK3BwV1RTKzh5ZTZWNy9yNE56enA2NDBSUm9GTzRlWmNpU2RqdXpkQ3kreEhkbGtOaTZtK3BxWDhIWjZ0c05XL0puK1FpOHNiL2tISmZzeUV2WURxeGRlSXZhRSt3SkxiT21PcmNlSnREbG9Ib0VmZGYxUzMvbFQzY3QyNkdZMUgzT21LWTVNRC9QanBxOG4rYjllZTI3c01qR1d2K2xRODhFaG9iWUo5NW1QdUwza2NXeDUzZk14TjVyRVl6K3lkMFU1ZFY5bDMrS0FnQzNNMEFhMmsrYmdqQjE5ZDNlMGZFeDdwaGRUTm54Y245RVVNZFBJYU05RjZyM09odXhIRXA5TllQR2JqaDI5SThMWTBiaTVJdS81cVB2MWhTb0loZUI5NFNWTnNtYy9zUGZybm5xdjBTNDZZUEkxWWRhKzZjK3g0MnA1dnRZYS80V0x1Ri9QTDlEMmtaK2JPeGRUMHlTcHczNWs2OWM5OVJicWc0K2RRMHJMV3VkZ1RjdWIvaG83YnF6Kytab1hWbG91Nkg2cnp5VVpWczVTajdpMkQvUmMzSTJtQ2RraXZKalVTanpsYlpUaUg2QWIwY0lDdGxhcTMvVEowVnVjaUIzZHUvenpuc05FWFViVHVPd2gyMnBsc1NOejZLRjhvT3dTV2xEa3N2VlMrNlpEOXBVVGtVS2hvNy9aL014aG1yNmdhU0syRkNja2RVSm5pYW5SNTNZeEo2Q2xKRHUyYWlyZjlFSHpUcElqbXlXbFNXb09XbU9OZlBhVUpVYytITmdvTFdzeXNmZjVxU0V0SVYzdkZGVDVtMDU5dlVQd2RHZG9FMDNEUVdlc0pXeEpYa0lxSko3VTkxRGRqN3Nma1dscDREQUwrQWtwRUxsNnYwbXhaK3hnd1phRHZsaWpQVnVVY3lSSmM2OG44Vk9TTWxDQk5KMXM0Wm9YMWo1elRpUXQwUHhOT2hyY0hKaDFISVJqemE3aG1wSWY4bVMzMEtMUFI3dVlmTEs5UUtxOTJhVWtKZmIwZnBOaTM5d3hOUWkyU2JGbTIzQk53WHA3NEN3VHFaSEgzc2tuMjhabm9JcUdWT2xCN3pjcERVemZ0WlpoS2lxaUs4akM0WnJNZXJ2OGdHV2ZLcHlDbXEwZ0pIdkxVbzFKdGZrZEhiM2ZwTkF4ZldVcWlnZEMyb3lzSEs3SmZCOGpYMzZ3bU03S2xQRUhIeExTNkxUeXpnN0ZZOW5RMWY1ODg0YzVvTjFEd0pWbWlKbVFsU2FiMEpkUklvQmswOVFQU1k4a3NHbFpUZnBqU1krdTNtOVM2QzUyaXVZWk93K2U2VXQ2WTFQdm1tVEFKQWVIcWJLUE5QMlJPZnVZVkV2RGxlNERGZWNHQ1FtTDk0N1c1eWNIWjhuVHQzSlVENGJkTW5wbnpWYURBZDR4SVJHSjZpdXozRU1zbGlrN21TZkxTME5iNTU5ZjdNSlU2NHYySlo2dmRjQ0d1YWl3L2t3ZkxOa1orb3dYUlBSY0ZIaE1BL2NRMFZQeGNUZnp5ZnNUcVpBY054SnF2OWtkWTYwdjJoOTdmaHg0cXpndXRVQmQ5SkZyUnZNYzJVcjV3U21tUitKVDRHditEeWYwUUNKOXI0MS9qRWxHZWpyWXZLWTJ3TmtGVVVvUEpLZkFWL1Q4Wk9qNXpucDJpMTJ3eXZaVlc5Qk02YnI3QkR6L0VBVFJoMU1RSEh5UEdlSDdRUkJHSDQ1QjRQdE1DY2NQSXBvak9SMDh0bUgrN3NzSDdxbC9vVWVSRnlvdm9Ya3lURVovMEpiMHdkNGVqNWZpN1FkR0tEUTRRRjMzencrb3VURTFSeS9iNDFTenZtandRdng5RUVZSlBmRTJzUEEzUFVyYnBvaG15MnJNUnQ4MEpVbElON2hjWXgzUDkvZkJ1ekNLd3VEZHp2ZnhhcXpscGpSZlZyMTgwOGY5a3BHVUF3TUExUUtTa2wvdi9HVU5YY0tGV1NqQXdtS1NWTlF2T1dycjZvS0dZQllLc0N5UDVHWFY5YVd5clZWMXBlQ21HandCQkZrd0UvMnV2RnhiNnlzSjdaQnIvYUVxY3hLejJxdjFBRjVBVEFvVlpWbXJkQ21WS0dpRllyUkVBV2lzaWNJQ1V2UkZBZWl6SjlBQ2kyc0F5d2tKakxQZ3Rra0FxOFVFeXFGbUFQQUVsdGkyQnpVREFDdTYyQUN4QmpBQmFnZmJnbElvd0J0cjJuTUJzUVlnQ2tYUnpVQ3NBWHlEWU5zU3hCckFPd1RiZGlEV0FENGcyTFlDc1Fid0hZSnRHeEJyQUo4ZzJMWWdRYXdCZklaZ3N4L2FjUUgrQ3ZyWTdIWkNyQUU4Z0owSEZqc3lBRmlJaDAzd09xUzQyQjFnUVM2T0xWSXZSc1VBWUZFT3FnZFlXZ1BZbkQzbW9waURBbXlOaDdtb09qR3VQd1pZaHlNQmJqSUEyQmcvSVpBWG9XQUFzQ0lPaG16UzBnTURnRlh4SWdJWkljcWdBRk9oTUxwcW1JSUNySk9ERGFNekpialFIV0MxWEhUcHpwQ2daUTFnMVpCc1NEV0E3VUd5VFJFajFRQ3M0QjVSUVJCejhoa0FXTUk1b0ZGM1ZIckVuaWtBdS9pWWpqNTF3Z1FVd0VMT0hodmlCOFFIRE5VQWJPVWVFRzBJTllETmNmY25ndTlPZTRRYXdDYjRSd3pidm9rQ2xEOEJ0c1R4ZytpRnV6K1NFeklOWUp2Y1hYQjZzWkZiRklYQkRwRUdzSFdlZndqQ2FCV2p0MmlhTUhqRy93b3JhUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBR0RBbndFSEVVR01INXZ3Y3dBQUFBQkpSVTVFcmtKZ2dnPT0nXHJcblxyXG4gICAga29maUJ1dHRvbi5hcHBlbmRDaGlsZChrb2ZpSW1hZ2UpXHJcbiAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChrb2ZpQnV0dG9uKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVGZWF0dXJlSGVhZGluZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHNldHRpbmdzS2V5OiBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzKTogU2V0dGluZyB7XHJcbiAgICByZXR1cm4gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXRIZWFkaW5nKClcclxuICAgICAgLnNldENsYXNzKCdhYy1zZXR0aW5ncy1oZWFkaW5nJylcclxuICAgICAgLnNldE5hbWUobGFiZWwpXHJcbiAgICAgIC5zZXREZXNjKGRlc2NyaXB0aW9uKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VG9vbHRpcChcIlJlcXVpcmVzIGEgcmVsb2FkIHRvIHRha2UgZWZmZWN0LlwiKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoc2V0dGluZ3NLZXkpIGFzIGJvb2xlYW4pXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBbc2V0dGluZ3NLZXldOiB2YWx1ZSB9KVxyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVsb2FkIG9ic2lkaWFuIHRvIGFwcGx5IHRoZSBjaGFuZ2VzLlwiKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0U3R5bGVzU2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHNldHRpbmdzS2V5OiBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzLCBhbGxTdHlsYWJsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW10pIHtcclxuICAgIGNvbnN0IGRlZmF1bHROb2RlU3R5bGVzRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJylcclxuICAgIGRlZmF1bHROb2RlU3R5bGVzRWwuY2xhc3NMaXN0LmFkZCgnc2V0dGluZy1pdGVtJylcclxuXHJcbiAgICBjb25zdCBkZWZhdWx0Tm9kZVN0eWxlc1N1bW1hcnlFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKVxyXG4gICAgZGVmYXVsdE5vZGVTdHlsZXNTdW1tYXJ5RWwudGV4dENvbnRlbnQgPSBsYWJlbFxyXG4gICAgZGVmYXVsdE5vZGVTdHlsZXNFbC5hcHBlbmRDaGlsZChkZWZhdWx0Tm9kZVN0eWxlc1N1bW1hcnlFbClcclxuXHJcbiAgICBmb3IgKGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlIG9mIGFsbFN0eWxhYmxlQXR0cmlidXRlcykge1xyXG4gICAgICBuZXcgU2V0dGluZyhkZWZhdWx0Tm9kZVN0eWxlc0VsKVxyXG4gICAgICAgIC5zZXROYW1lKHN0eWxhYmxlQXR0cmlidXRlLmxhYmVsKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XHJcbiAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAuYWRkT3B0aW9ucyhPYmplY3QuZnJvbUVudHJpZXMoc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9ucy5tYXAoKG9wdGlvbikgPT4gW29wdGlvbi52YWx1ZSwgb3B0aW9uLmxhYmVsXSkpKVxyXG4gICAgICAgICAgICAuc2V0VmFsdWUoKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoc2V0dGluZ3NLZXkpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID8/ICdudWxsJylcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZyhzZXR0aW5nc0tleSkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdudWxsJykgZGVsZXRlIG5ld1ZhbHVlW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldXHJcbiAgICAgICAgICAgICAgZWxzZSBuZXdWYWx1ZVtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5XSA9IHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoe1xyXG4gICAgICAgICAgICAgICAgW3NldHRpbmdzS2V5XTogbmV3VmFsdWVcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChkZWZhdWx0Tm9kZVN0eWxlc0VsKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXNOb2RlVHlwZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlQXR0cmlidXRlT3B0aW9uIHtcclxuICBpY29uOiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgdmFsdWU6IHN0cmluZyB8IG51bGwgLy8gVGhlIGVsZW1lbnQgd2l0aCB0aGUgbnVsbCB2YWx1ZSBpcyB0aGUgZGVmYXVsdFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlQXR0cmlidXRlIHtcclxuICBkYXRhc2V0S2V5OiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgbm9kZVR5cGVzPzogQ2FudmFzTm9kZVR5cGVbXVxyXG4gIG9wdGlvbnM6IFN0eWxlQXR0cmlidXRlT3B0aW9uW11cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTID0gW1xyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICd0ZXh0QWxpZ24nLFxyXG4gICAgbGFiZWw6ICdUZXh0IEFsaWdubWVudCcsXHJcbiAgICBub2RlVHlwZXM6IFsndGV4dCddLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2FsaWduLWxlZnQnLFxyXG4gICAgICAgIGxhYmVsOiAnTGVmdCAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYWxpZ24tY2VudGVyJyxcclxuICAgICAgICBsYWJlbDogJ0NlbnRlcicsXHJcbiAgICAgICAgdmFsdWU6ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYWxpZ24tcmlnaHQnLFxyXG4gICAgICAgIGxhYmVsOiAnUmlnaHQnLFxyXG4gICAgICAgIHZhbHVlOiAncmlnaHQnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdzaGFwZScsXHJcbiAgICBsYWJlbDogJ1NoYXBlJyxcclxuICAgIG5vZGVUeXBlczogWyd0ZXh0J10sXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncmVjdGFuZ2xlLWhvcml6b250YWwnLFxyXG4gICAgICAgIGxhYmVsOiAnUm91bmQgUmVjdGFuZ2xlIChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzaGFwZS1waWxsJyxcclxuICAgICAgICBsYWJlbDogJ1BpbGwnLFxyXG4gICAgICAgIHZhbHVlOiAncGlsbCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdkaWFtb25kJyxcclxuICAgICAgICBsYWJlbDogJ0RpYW1vbmQnLFxyXG4gICAgICAgIHZhbHVlOiAnZGlhbW9uZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzaGFwZS1wYXJhbGxlbG9ncmFtJyxcclxuICAgICAgICBsYWJlbDogJ1BhcmFsbGVsb2dyYW0nLFxyXG4gICAgICAgIHZhbHVlOiAncGFyYWxsZWxvZ3JhbSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdjaXJjbGUnLFxyXG4gICAgICAgIGxhYmVsOiAnQ2lyY2xlJyxcclxuICAgICAgICB2YWx1ZTogJ2NpcmNsZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzaGFwZS1wcmVkZWZpbmVkLXByb2Nlc3MnLFxyXG4gICAgICAgIGxhYmVsOiAnUHJlZGVmaW5lZCBQcm9jZXNzJyxcclxuICAgICAgICB2YWx1ZTogJ3ByZWRlZmluZWQtcHJvY2VzcydcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzaGFwZS1kb2N1bWVudCcsXHJcbiAgICAgICAgbGFiZWw6ICdEb2N1bWVudCcsXHJcbiAgICAgICAgdmFsdWU6ICdkb2N1bWVudCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdzaGFwZS1kYXRhYmFzZScsXHJcbiAgICAgICAgbGFiZWw6ICdEYXRhYmFzZScsXHJcbiAgICAgICAgdmFsdWU6ICdkYXRhYmFzZSdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ2JvcmRlcicsXHJcbiAgICBsYWJlbDogJ0JvcmRlcicsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYm9yZGVyLXNvbGlkJyxcclxuICAgICAgICBsYWJlbDogJ1NvbGlkIChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdib3JkZXItZGFzaGVkJyxcclxuICAgICAgICBsYWJlbDogJ0Rhc2hlZCcsXHJcbiAgICAgICAgdmFsdWU6ICdkYXNoZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYm9yZGVyLWRvdHRlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEb3R0ZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnZG90dGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2V5ZS1vZmYnLFxyXG4gICAgICAgIGxhYmVsOiAnSW52aXNpYmxlJyxcclxuICAgICAgICB2YWx1ZTogJ2ludmlzaWJsZSdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH1cclxuXSBhcyBTdHlsZUF0dHJpYnV0ZVtdXHJcblxyXG5leHBvcnQgY29uc3QgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMgPSBbXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ3BhdGgnLFxyXG4gICAgbGFiZWw6ICdQYXRoIFN0eWxlJyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoLXNvbGlkJyxcclxuICAgICAgICBsYWJlbDogJ1NvbGlkIChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoLWRvdHRlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEb3R0ZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnZG90dGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGgtc2hvcnQtZGFzaGVkJyxcclxuICAgICAgICBsYWJlbDogJ1Nob3J0IERhc2hlZCcsXHJcbiAgICAgICAgdmFsdWU6ICdzaG9ydC1kYXNoZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1sb25nLWRhc2hlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdMb25nIERhc2hlZCcsXHJcbiAgICAgICAgdmFsdWU6ICdsb25nLWRhc2hlZCdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ2Fycm93JyxcclxuICAgIGxhYmVsOiAnQXJyb3cgU3R5bGUnLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2Fycm93LXRyaWFuZ2xlJyxcclxuICAgICAgICBsYWJlbDogJ1RyaWFuZ2xlIChkZWZhdWx0KScsXHJcbiAgICAgICAgdmFsdWU6IG51bGxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy10cmlhbmdsZS1vdXRsaW5lJyxcclxuICAgICAgICBsYWJlbDogJ1RyaWFuZ2xlIE91dGxpbmUnLFxyXG4gICAgICAgIHZhbHVlOiAndHJpYW5nbGUtb3V0bGluZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy10aGluLXRyaWFuZ2xlJyxcclxuICAgICAgICBsYWJlbDogJ1RoaW4gVHJpYW5nbGUnLFxyXG4gICAgICAgIHZhbHVlOiAndGhpbi10cmlhbmdsZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy1oYWx2ZWQtdHJpYW5nbGUnLFxyXG4gICAgICAgIGxhYmVsOiAnSGFsdmVkIFRyaWFuZ2xlJyxcclxuICAgICAgICB2YWx1ZTogJ2hhbHZlZC10cmlhbmdsZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy1kaWFtb25kJyxcclxuICAgICAgICBsYWJlbDogJ0RpYW1vbmQnLFxyXG4gICAgICAgIHZhbHVlOiAnZGlhbW9uZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy1kaWFtb25kLW91dGxpbmUnLFxyXG4gICAgICAgIGxhYmVsOiAnRGlhbW9uZCBPdXRsaW5lJyxcclxuICAgICAgICB2YWx1ZTogJ2RpYW1vbmQtb3V0bGluZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy1jaXJjbGUnLFxyXG4gICAgICAgIGxhYmVsOiAnQ2lyY2xlJyxcclxuICAgICAgICB2YWx1ZTogJ2NpcmNsZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy1jaXJjbGUtb3V0bGluZScsXHJcbiAgICAgICAgbGFiZWw6ICdDaXJjbGUgT3V0bGluZScsXHJcbiAgICAgICAgdmFsdWU6ICdjaXJjbGUtb3V0bGluZSdcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZGF0YXNldEtleTogJ3BhdGhmaW5kaW5nTWV0aG9kJyxcclxuICAgIGxhYmVsOiAnUGF0aGZpbmRpbmcgTWV0aG9kJyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoZmluZGluZy1tZXRob2QtYmV6aWVyJyxcclxuICAgICAgICBsYWJlbDogJ0JlemllciAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2xhc2gnLFxyXG4gICAgICAgIGxhYmVsOiAnRGlyZWN0JyxcclxuICAgICAgICB2YWx1ZTogJ2RpcmVjdCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoZmluZGluZy1tZXRob2Qtc3F1YXJlJyxcclxuICAgICAgICBsYWJlbDogJ1NxdWFyZScsXHJcbiAgICAgICAgdmFsdWU6ICdzcXVhcmUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnbWFwJyxcclxuICAgICAgICBsYWJlbDogJ0EqJyxcclxuICAgICAgICB2YWx1ZTogJ2Etc3RhcidcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH1cclxuXSBhcyBTdHlsZUF0dHJpYnV0ZVtdIiwgImltcG9ydCB7IFdvcmtzcGFjZVdpbmRvdyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwiLi9tYWluXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpbmRvd3NNYW5hZ2VyIHtcclxuICBwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luXHJcbiAgd2luZG93czogV2luZG93W10gPSBbd2luZG93XVxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignd2luZG93LW9wZW4nLCBcclxuICAgICAgKF93aW46IFdvcmtzcGFjZVdpbmRvdywgd2luZG93OiBXaW5kb3cpID0+IHRoaXMud2luZG93cy5wdXNoKHdpbmRvdylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCd3aW5kb3ctY2xvc2UnLCBcclxuICAgICAgKF93aW46IFdvcmtzcGFjZVdpbmRvdywgd2luZG93OiBXaW5kb3cpID0+IHRoaXMud2luZG93cyA9IHRoaXMud2luZG93cy5maWx0ZXIoKHcpID0+IHcgIT09IHdpbmRvdylcclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IHNldEljb24sIHNldFRvb2x0aXAgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhLCBQb3NpdGlvbiwgU2l6ZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvc3R5bGUtY29uZmlnXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCBCQm94SGVscGVyIGZyb20gXCIuL2Jib3gtaGVscGVyXCJcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVudU9wdGlvbiB7XHJcbiAgaWQ/OiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgaWNvbjogc3RyaW5nXHJcbiAgY2FsbGJhY2s/OiAoKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc0hlbHBlciB7XHJcbiAgc3RhdGljIHJlYWRvbmx5IEdSSURfU0laRSA9IDIwXHJcblxyXG4gIHN0YXRpYyBjYW52YXNDb21tYW5kKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4sIGNoZWNrOiAoY2FudmFzOiBDYW52YXMpID0+IGJvb2xlYW4sIHJ1bjogKGNhbnZhczogQ2FudmFzKSA9PiB2b2lkKTogKGNoZWNraW5nOiBib29sZWFuKSA9PiBib29sZWFuIHtcclxuICAgIHJldHVybiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgY29uc3QgY2FudmFzID0gcGx1Z2luLmdldEN1cnJlbnRDYW52YXMoKVxyXG4gICAgICBpZiAoY2hlY2tpbmcpIHJldHVybiBjYW52YXMgIT09IG51bGwgJiYgY2hlY2soY2FudmFzKVxyXG5cclxuICAgICAgaWYgKGNhbnZhcykgcnVuKGNhbnZhcylcclxuXHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlUXVpY2tTZXR0aW5nc0J1dHRvbihtZW51T3B0aW9uOiBNZW51T3B0aW9uKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgcXVpY2tTZXR0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGlmIChtZW51T3B0aW9uLmlkKSBxdWlja1NldHRpbmcuaWQgPSBtZW51T3B0aW9uLmlkXHJcbiAgICBxdWlja1NldHRpbmcuY2xhc3NMaXN0LmFkZCgnY2FudmFzLWNvbnRyb2wtaXRlbScpXHJcbiAgICBzZXRJY29uKHF1aWNrU2V0dGluZywgbWVudU9wdGlvbi5pY29uKVxyXG4gICAgc2V0VG9vbHRpcChxdWlja1NldHRpbmcsIG1lbnVPcHRpb24ubGFiZWwsIHsgcGxhY2VtZW50OiAnbGVmdCcgfSlcclxuICAgIHF1aWNrU2V0dGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG1lbnVPcHRpb24uY2FsbGJhY2s/LigpKVxyXG5cclxuICAgIHJldHVybiBxdWlja1NldHRpbmdcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRRdWlja1NldHRpbmdzQnV0dG9uKGNvbnRyb2xHcm91cDogSFRNTEVsZW1lbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBpZiAoZWxlbWVudC5pZCkgY29udHJvbEdyb3VwLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YCk/LnJlbW92ZSgpXHJcbiAgICBjb250cm9sR3JvdXAuYXBwZW5kQ2hpbGQoZWxlbWVudClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVDYXJkTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgbWVudU9wdGlvbjogTWVudU9wdGlvbiwgcHJldmlld05vZGVTaXplOiAoKSA9PiBTaXplLCBvblBsYWNlZDogKGNhbnZhczogQ2FudmFzLCBwb3M6IFBvc2l0aW9uKSA9PiB2b2lkKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIG1lbnVPcHRpb25FbGVtZW50LmlkID0gbWVudU9wdGlvbi5pZFxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2FudmFzLWNhcmQtbWVudS1idXR0b24nKVxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kLWRyYWdnYWJsZScpXHJcbiAgICBzZXRJY29uKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmljb24pXHJcbiAgICBzZXRUb29sdGlwKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmxhYmVsLCB7IHBsYWNlbWVudDogJ3RvcCcgfSlcclxuXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChfZSkgPT4ge1xyXG4gICAgICBvblBsYWNlZChjYW52YXMsIHRoaXMuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzLCBwcmV2aWV3Tm9kZVNpemUoKSkpXHJcbiAgICB9KVxyXG5cclxuICAgIG1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpID0+IHtcclxuICAgICAgY2FudmFzLmRyYWdUZW1wTm9kZShlLCBwcmV2aWV3Tm9kZVNpemUoKSwgKHBvczogUG9zaXRpb24pID0+IHtcclxuICAgICAgICBjYW52YXMuZGVzZWxlY3RBbGwoKVxyXG4gICAgICAgIG9uUGxhY2VkKGNhbnZhcywgcG9zKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudU9wdGlvbkVsZW1lbnRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRDYXJkTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LmlkKSBjYW52YXM/LmNhcmRNZW51RWwucXVlcnlTZWxlY3RvcihgIyR7ZWxlbWVudC5pZH1gKT8ucmVtb3ZlKClcclxuICAgIGNhbnZhcz8uY2FyZE1lbnVFbC5hcHBlbmRDaGlsZChlbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZVBvcHVwTWVudU9wdGlvbihtZW51T3B0aW9uOiBNZW51T3B0aW9uKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIG1lbnVPcHRpb25FbGVtZW50LmlkID0gbWVudU9wdGlvbi5pZFxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nKVxyXG4gICAgc2V0SWNvbihtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5pY29uKVxyXG4gICAgc2V0VG9vbHRpcChtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5sYWJlbCwgeyBwbGFjZW1lbnQ6ICd0b3AnIH0pXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG1lbnVPcHRpb24uY2FsbGJhY2s/LigpKVxyXG5cclxuICAgIHJldHVybiBtZW51T3B0aW9uRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUV4cGFuZGFibGVQb3B1cE1lbnVPcHRpb24obWVudU9wdGlvbjogTWVudU9wdGlvbiwgc3ViTWVudU9wdGlvbnM6IE1lbnVPcHRpb25bXSk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IG1lbnVPcHRpb25FbGVtZW50ID0gdGhpcy5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAuLi5tZW51T3B0aW9uLFxyXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnVJZCA9IGAke21lbnVPcHRpb24uaWR9LXN1Ym1lbnVgXHJcblxyXG4gICAgICAgIGlmIChtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKVxyXG4gICAgICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcihgIyR7c3VibWVudUlkfWApPy5yZW1vdmUoKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxyXG5cclxuICAgICAgICAvLyBBZGQgcG9wdXAgbWVudVxyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHN1Ym1lbnUuaWQgPSBzdWJtZW51SWRcclxuICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5hZGQoJ2NhbnZhcy1zdWJtZW51JylcclxuICAgICAgXHJcbiAgICAgICAgLy8gQWRkIG5lc3RlZCBvcHRpb25zXHJcbiAgICAgICAgZm9yIChjb25zdCBzdWJNZW51T3B0aW9uIG9mIHN1Yk1lbnVPcHRpb25zKSB7XHJcbiAgICAgICAgICBjb25zdCBzdWJNZW51T3B0aW9uRWxlbWVudCA9IHRoaXMuY3JlYXRlUG9wdXBNZW51T3B0aW9uKHN1Yk1lbnVPcHRpb24pXHJcbiAgICAgICAgICBzdWJtZW51LmFwcGVuZENoaWxkKHN1Yk1lbnVPcHRpb25FbGVtZW50KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoc3VibWVudSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudU9wdGlvbkVsZW1lbnRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRQb3B1cE1lbnVPcHRpb24oY2FudmFzOiBDYW52YXMsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyID0gLTEpIHtcclxuICAgIGNvbnN0IHBvcHVwTWVudUVsID0gY2FudmFzPy5tZW51Py5tZW51RWxcclxuICAgIGlmICghcG9wdXBNZW51RWwpIHJldHVyblxyXG5cclxuICAgIGlmIChlbGVtZW50LmlkKSBwb3B1cE1lbnVFbC5xdWVyeVNlbGVjdG9yKGAjJHtlbGVtZW50LmlkfWApPy5yZW1vdmUoKVxyXG5cclxuICAgIGNvbnN0IHNpc3RlckVsZW1lbnQgPSBpbmRleCA+PSAwID8gcG9wdXBNZW51RWwuY2hpbGRyZW5baW5kZXhdIDogcG9wdXBNZW51RWwuY2hpbGRyZW5bcG9wdXBNZW51RWwuY2hpbGRyZW4ubGVuZ3RoICsgaW5kZXhdXHJcbiAgICBwb3B1cE1lbnVFbC5pbnNlcnRBZnRlcihlbGVtZW50LCBzaXN0ZXJFbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldENlbnRlckNvb3JkaW5hdGVzKGNhbnZhczogQ2FudmFzLCBub2RlU2l6ZTogU2l6ZSk6IFBvc2l0aW9uIHtcclxuICAgIGNvbnN0IHZpZXdCb3VuZHMgPSBjYW52YXMuZ2V0Vmlld3BvcnRCQm94KClcclxuXHJcbiAgICByZXR1cm4geyBcclxuICAgICAgeDogKHZpZXdCb3VuZHMubWluWCArIHZpZXdCb3VuZHMubWF4WCkgLyAyIC0gbm9kZVNpemUud2lkdGggLyAyLFxyXG4gICAgICB5OiAodmlld0JvdW5kcy5taW5ZICsgdmlld0JvdW5kcy5tYXhZKSAvIDIgLSBub2RlU2l6ZS5oZWlnaHQgLyAyLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEJCb3goY2FudmFzTm9kZXM6IChDYW52YXNOb2RlIHwgQ2FudmFzTm9kZURhdGEpW10pIHtcclxuICAgIGxldCBtaW5YID0gSW5maW5pdHlcclxuICAgIGxldCBtaW5ZID0gSW5maW5pdHlcclxuICAgIGxldCBtYXhYID0gLUluZmluaXR5XHJcbiAgICBsZXQgbWF4WSA9IC1JbmZpbml0eVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXNOb2Rlcykge1xyXG4gICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSA/IG5vZGUuZ2V0RGF0YSgpIDogbm9kZVxyXG5cclxuICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIG5vZGVEYXRhLngpXHJcbiAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBub2RlRGF0YS55KVxyXG4gICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgbm9kZURhdGEueCArIG5vZGVEYXRhLndpZHRoKVxyXG4gICAgICBtYXhZID0gTWF0aC5tYXgobWF4WSwgbm9kZURhdGEueSArIG5vZGVEYXRhLmhlaWdodClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyB6b29tVG9CQm94KGNhbnZhczogQ2FudmFzLCBiYm94OiBCQm94KSB7XHJcbiAgICBjb25zdCBQQURESU5HX0NPUlJFQ1RJT05fRkFDVE9SID0gMSAvIDEuMVxyXG4gICAgY29uc3Qgem9vbWVkQkJveCA9IEJCb3hIZWxwZXIuc2NhbGVCQm94KGJib3gsIFBBRERJTkdfQ09SUkVDVElPTl9GQUNUT1IpXHJcblxyXG4gICAgY2FudmFzLnpvb21Ub0Jib3goem9vbWVkQkJveClcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHpvb20gZmFjdG9yIHdpdGhvdXQgY2xhbXBcclxuICAgIGNvbnN0IHNjYWxlRmFjdG9yID0gTWF0aC5taW4oXHJcbiAgICAgIGNhbnZhcy5jYW52YXNSZWN0LndpZHRoIC8gKGJib3gubWF4WCAtIGJib3gubWluWCksXHJcbiAgICAgIGNhbnZhcy5jYW52YXNSZWN0LmhlaWdodCAvIChiYm94Lm1heFkgLSBiYm94Lm1pblkpXHJcbiAgICApXHJcblxyXG4gICAgY2FudmFzLnRab29tID0gTWF0aC5sb2cyKHNjYWxlRmFjdG9yKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZVN0eWxlRHJvcGRvd25NZW51KGNhbnZhczogQ2FudmFzLCBzdHlsYWJsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW10sIGN1cnJlbnRTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9LCBzZXRTdHlsZUF0dHJpYnV0ZTogKGF0dHJpYnV0ZTogU3R5bGVBdHRyaWJ1dGUsIHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBTVFlMRV9NRU5VX0lEID0gJ3N0eWxlLW1lbnUnXHJcbiAgICBjb25zdCBTVFlMRV9NRU5VX0RST1BET1dOX0lEID0gJ3N0eWxlLW1lbnUtZHJvcGRvd24nXHJcbiAgICBjb25zdCBTVFlMRV9NRU5VX0RST1BET1dOX1NVQk1FTlVfSUQgPSAnc3R5bGUtbWVudS1kcm9wZG93bi1zdWJtZW51J1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHBvcHVwIG1lbnUgZXhpc3RzXHJcbiAgICBjb25zdCBwb3B1cE1lbnVFbGVtZW50ID0gY2FudmFzPy5tZW51Py5tZW51RWxcclxuICAgIGlmICghcG9wdXBNZW51RWxlbWVudCkgcmV0dXJuXHJcbiAgICBcclxuICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzdHlsZSBtZW51XHJcbiAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfSUR9YCk/LnJlbW92ZSgpXHJcblxyXG4gICAgY29uc3Qgc3R5bGVNZW51QnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcbiAgICBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmlkID0gU1RZTEVfTUVOVV9JRFxyXG4gICAgc3R5bGVNZW51QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbGlja2FibGUtaWNvbicpXHJcblxyXG4gICAgc2V0SWNvbihzdHlsZU1lbnVCdXR0b25FbGVtZW50LCAncGFpbnRicnVzaCcpXHJcbiAgICBzZXRUb29sdGlwKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQsICdTdHlsZScsIHsgcGxhY2VtZW50OiAndG9wJyB9KVxyXG4gICAgXHJcbiAgICAvLyBBZGQgc3R5bGUgbWVudSB0byBwb3B1cCBtZW51XHJcbiAgICBwb3B1cE1lbnVFbGVtZW50LmFwcGVuZENoaWxkKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQpXHJcblxyXG4gICAgLy8gQWRkIGNsaWNrIGV2ZW50XHJcbiAgICBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpc09wZW4gPSBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1hY3RpdmUtbWVudScpXHJcbiAgICAgIGlmICghaXNPcGVuKSB7XHJcbiAgICAgICAgcG9wdXBNZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTVFlMRV9NRU5VX0RST1BET1dOX0lEfWApPy5yZW1vdmUoKVxyXG4gICAgICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEfWApPy5yZW1vdmUoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuaWQgPSBTVFlMRV9NRU5VX0RST1BET1dOX0lEXHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51JylcclxuXHJcbiAgICAgIC8vIFBvc2l0aW9uIGNvcnJlY3RseVxyXG4gICAgICBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnaW5pdGlhbCdcclxuXHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS50b3AgPSBgJHtwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodH1weGBcclxuXHJcbiAgICAgIGNvbnN0IGNhbnZhc1dyYXBwZXJDZW50ZXJYID0gY2FudmFzLndyYXBwZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgY2FudmFzLndyYXBwZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIDJcclxuXHJcbiAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG4gICAgICBjb25zdCByaWdodFBvc2l0aW9uID0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHRcclxuXHJcbiAgICAgIC8vIFN3YXAgc2lkZXMgaWYgaXQgaXMgdG9vIGNsb3NlIHRvIHRoZSBlZGdlXHJcbiAgICAgIGlmIChwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBsZWZ0UG9zaXRpb24gPCBjYW52YXNXcmFwcGVyQ2VudGVyWClcclxuICAgICAgICBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2xlZnRQb3NpdGlvbn1weGBcclxuICAgICAgZWxzZSBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuc3R5bGUucmlnaHQgPSBgJHtyaWdodFBvc2l0aW9ufXB4YFxyXG5cclxuICAgICAgLy8gQWRkIHN0eWxlIG9wdGlvbnNcclxuICAgICAgZm9yIChjb25zdCBzdHlsYWJsZUF0dHJpYnV0ZSBvZiBzdHlsYWJsZUF0dHJpYnV0ZXMpIHtcclxuICAgICAgICBjb25zdCBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0nKVxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0YXBwYWJsZScpXHJcblxyXG4gICAgICAgIC8vIEFkZCBpY29uXHJcbiAgICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTdHlsZSA9IHN0eWxhYmxlQXR0cmlidXRlLm9wdGlvbnNcclxuICAgICAgICAgIC5maW5kKG9wdGlvbiA9PiBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID09PSBvcHRpb24udmFsdWUpID8/XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zLmZpbmQodmFsdWUgPT4gdmFsdWUudmFsdWUgPT09IG51bGwpISFcclxuICAgICAgICBzZXRJY29uKGljb25FbGVtZW50LCBzZWxlY3RlZFN0eWxlLmljb24pXHJcblxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChpY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQWRkIGxhYmVsXHJcbiAgICAgICAgY29uc3QgbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBsYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLXRpdGxlJylcclxuICAgICAgICBsYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsYWJsZUF0dHJpYnV0ZS5sYWJlbFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpXHJcblxyXG4gICAgICAgIC8vIEFkZCBleHBhbmQgaWNvblxyXG4gICAgICAgIGNvbnN0IGV4cGFuZEljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBleHBhbmRJY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0taWNvbicpXHJcbiAgICAgICAgc2V0SWNvbihleHBhbmRJY29uRWxlbWVudCwgJ2NoZXZyb24tcmlnaHQnKVxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChleHBhbmRJY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIGRyb3Bkb3duXHJcbiAgICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmFwcGVuZENoaWxkKHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQWRkIGhvdmVyIGVmZmVjdFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIEFkZCBjbGljayBldmVudFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzdWJtZW51XHJcbiAgICAgICAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfRFJPUERPV05fU1VCTUVOVV9JRH1gKT8ucmVtb3ZlKClcclxuXHJcbiAgICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuaWQgPSBTVFlMRV9NRU5VX0RST1BET1dOX1NVQk1FTlVfSURcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudScpXHJcbiAgICAgIFxyXG4gICAgICAgICAgLy8gUG9zaXRpb24gY29ycmVjdGx5XHJcbiAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnaW5pdGlhbCdcclxuXHJcbiAgICAgICAgICBjb25zdCB0b3BPZmZzZXQgPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlTWVudURyb3Bkb3duRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSkgKyAoc3R5bGVNZW51RHJvcGRvd25FbGVtZW50Lm9mZnNldEhlaWdodCAtIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5jbGllbnRIZWlnaHQpIC8gMlxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS50b3AgPSBgJHtzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdG9wT2Zmc2V0IC0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3B9cHhgXHJcblxyXG4gICAgICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG4gICAgICAgICAgY29uc3QgcmlnaHRQb3NpdGlvbiA9IHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG5cclxuICAgICAgICAgIC8vIFN3YXAgc2lkZXMgaWYgaXQgaXMgdG9vIGNsb3NlIHRvIHRoZSBlZGdlXHJcbiAgICAgICAgICBpZiAocG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgbGVmdFBvc2l0aW9uIDwgY2FudmFzV3JhcHBlckNlbnRlclgpXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2xlZnRQb3NpdGlvbn1weGBcclxuICAgICAgICAgIGVsc2Ugc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgICAgICAgLy8gQWRkIHN0eWxlIG9wdGlvbnNcclxuICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2Ygc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0nKVxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RhcHBhYmxlJylcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBpY29uXHJcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1lbnVJY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIHN1Ym1lbnVJY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0taWNvbicpXHJcbiAgICAgICAgICAgIHNldEljb24oc3VibWVudUljb25FbGVtZW50LCB2YWx1ZS5pY29uKVxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKHN1Ym1lbnVJY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBsYWJlbFxyXG4gICAgICAgICAgICBjb25zdCBzdWJtZW51TGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgc3VibWVudUxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0tdGl0bGUnKVxyXG4gICAgICAgICAgICBzdWJtZW51TGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWUubGFiZWxcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChzdWJtZW51TGFiZWxFbGVtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHNlbGVjdGVkIGljb25cclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkU3R5bGUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2Qtc2VsZWN0ZWQnKVxyXG5cclxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgICBzZWxlY3RlZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgICAgICAgICBzZWxlY3RlZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZC1zZWxlY3RlZCcpXHJcblxyXG4gICAgICAgICAgICAgIHNldEljb24oc2VsZWN0ZWRJY29uRWxlbWVudCwgJ2NoZWNrJylcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKHNlbGVjdGVkSWNvbkVsZW1lbnQpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB0byBkcm9wZG93biBzdWJtZW51XHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBob3ZlciBlZmZlY3RcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJylcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGljayBldmVudFxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIC8vIFNldCBzdHlsZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZShzdHlsYWJsZUF0dHJpYnV0ZSwgdmFsdWUudmFsdWUpXHJcblxyXG4gICAgICAgICAgICAgIC8vIEtlZXAgY29ycmVjdCByZWZlcmVuY2VcclxuICAgICAgICAgICAgICBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID0gdmFsdWUudmFsdWVcclxuXHJcbiAgICAgICAgICAgICAgLy8gQ2xvc2UgbWVudVxyXG4gICAgICAgICAgICAgIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NsaWNrJykpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQXBwZW5kIHRvIGJvZHlcclxuICAgICAgICAgIHBvcHVwTWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBcHBlbmQgdG8gYm9keVxyXG4gICAgICBwb3B1cE1lbnVFbGVtZW50LmFwcGVuZENoaWxkKHN0eWxlTWVudURyb3Bkb3duRWxlbWVudClcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IEJCb3gsIENhbnZhc05vZGVEYXRhLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCQm94SGVscGVyIHtcclxuICBzdGF0aWMgY29tYmluZUJCb3hlcyhiYm94ZXM6IEJCb3hbXSk6IEJCb3gge1xyXG4gICAgbGV0IG1pblggPSBJbmZpbml0eVxyXG4gICAgbGV0IG1pblkgPSBJbmZpbml0eVxyXG4gICAgbGV0IG1heFggPSAtSW5maW5pdHlcclxuICAgIGxldCBtYXhZID0gLUluZmluaXR5XHJcblxyXG4gICAgZm9yIChsZXQgYmJveCBvZiBiYm94ZXMpIHtcclxuICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIGJib3gubWluWClcclxuICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIGJib3gubWluWSlcclxuICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIGJib3gubWF4WClcclxuICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIGJib3gubWF4WSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBzY2FsZUJCb3goYmJveDogQkJveCwgc2NhbGU6IG51bWJlcik6IEJCb3gge1xyXG4gICAgbGV0IGRpZmZYID0gKHNjYWxlIC0gMSkgKiAoYmJveC5tYXhYIC0gYmJveC5taW5YKVxyXG4gICAgbGV0IGRpZmZZID0gKHNjYWxlIC0gMSkgKiAoYmJveC5tYXhZIC0gYmJveC5taW5ZKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pblg6IGJib3gubWluWCAtIGRpZmZYIC8gMixcclxuICAgICAgbWF4WDogYmJveC5tYXhYICsgZGlmZlggLyAyLFxyXG4gICAgICBtaW5ZOiBiYm94Lm1pblkgLSBkaWZmWSAvIDIsXHJcbiAgICAgIG1heFk6IGJib3gubWF4WSArIGRpZmZZIC8gMlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGluc2lkZUJCb3gocG9zaXRpb246IFBvc2l0aW9ufEJCb3gsIGJib3g6IEJCb3gsIGNhblRvdWNoRWRnZTogQm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcHJvdmlkZWRCQm94ID0ge1xyXG4gICAgICBtaW5YOiAocG9zaXRpb24gYXMgQkJveCkubWluWCA/PyAocG9zaXRpb24gYXMgUG9zaXRpb24pLngsXHJcbiAgICAgIG1pblk6IChwb3NpdGlvbiBhcyBCQm94KS5taW5ZID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueSxcclxuICAgICAgbWF4WDogKHBvc2l0aW9uIGFzIEJCb3gpLm1heFggPz8gKHBvc2l0aW9uIGFzIFBvc2l0aW9uKS54LFxyXG4gICAgICBtYXhZOiAocG9zaXRpb24gYXMgQkJveCkubWF4WSA/PyAocG9zaXRpb24gYXMgUG9zaXRpb24pLnlcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGNhblRvdWNoRWRnZSA/IHByb3ZpZGVkQkJveC5taW5YID49IGJib3gubWluWCAmJiBwcm92aWRlZEJCb3gubWF4WCA8PSBiYm94Lm1heFggJiYgcHJvdmlkZWRCQm94Lm1pblkgPj0gYmJveC5taW5ZICYmIHByb3ZpZGVkQkJveC5tYXhZIDw9IGJib3gubWF4WSA6XHJcbiAgICAgIHByb3ZpZGVkQkJveC5taW5YID4gYmJveC5taW5YICYmIHByb3ZpZGVkQkJveC5tYXhYIDwgYmJveC5tYXhYICYmIHByb3ZpZGVkQkJveC5taW5ZID4gYmJveC5taW5ZICYmIHByb3ZpZGVkQkJveC5tYXhZIDwgYmJveC5tYXhZXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZW5sYXJnZUJCb3goYmJveDogQkJveCwgcGFkZGluZzogbnVtYmVyKTogQkJveCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtaW5YOiBiYm94Lm1pblggLSBwYWRkaW5nLFxyXG4gICAgICBtaW5ZOiBiYm94Lm1pblkgLSBwYWRkaW5nLFxyXG4gICAgICBtYXhYOiBiYm94Lm1heFggKyBwYWRkaW5nLFxyXG4gICAgICBtYXhZOiBiYm94Lm1heFkgKyBwYWRkaW5nXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbW92ZUluRGlyZWN0aW9uKHBvc2l0aW9uOiBQb3NpdGlvbiwgc2lkZTogU2lkZSwgZGlzdGFuY2U6IG51bWJlcik6IFBvc2l0aW9uIHtcclxuICAgIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnkgLSBkaXN0YW5jZSB9XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54ICsgZGlzdGFuY2UsIHk6IHBvc2l0aW9uLnkgfVxyXG4gICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgIHJldHVybiB7IHg6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnkgKyBkaXN0YW5jZSB9XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IHBvc2l0aW9uLnggLSBkaXN0YW5jZSwgeTogcG9zaXRpb24ueSB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q2VudGVyT2ZCQm94U2lkZShiYm94OiBCQm94LCBzaWRlOiBTaWRlKTogUG9zaXRpb24ge1xyXG4gICAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogKGJib3gubWluWCArIGJib3gubWF4WCkgLyAyLCB5OiBiYm94Lm1pblkgfVxyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogYmJveC5tYXhYLCB5OiAoYmJveC5taW5ZICsgYmJveC5tYXhZKSAvIDIgfVxyXG4gICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgIHJldHVybiB7IHg6IChiYm94Lm1pblggKyBiYm94Lm1heFgpIC8gMiwgeTogYmJveC5tYXhZIH1cclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogYmJveC5taW5YLCB5OiAoYmJveC5taW5ZICsgYmJveC5tYXhZKSAvIDIgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFNpZGVWZWN0b3Ioc2lkZT86IFNpZGUpOiBQb3NpdGlvbiB7XHJcbiAgICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAxIH1cclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IDEsIHk6IDAgfVxyXG4gICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgIHJldHVybiB7IHg6IDAsIHk6IC0xIH1cclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogLTEsIHk6IDAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzSG9yaXpvbnRhbChzaWRlOiBTaWRlKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc2lkZSA9PT0gJ2xlZnQnIHx8IHNpZGUgPT09ICdyaWdodCdcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkaXJlY3Rpb24oc2lkZTogU2lkZSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKHNpZGUgPT09ICdyaWdodCcgfHwgc2lkZSA9PT0gJ2JvdHRvbScpID8gMSA6IC0xXHJcbiAgfVxyXG59IiwgImltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgeyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuXHJcbiAgYWJzdHJhY3QgaXNFbmFibGVkKCk6IGJvb2xlYW4gfCBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzXHJcbiAgYWJzdHJhY3QgaW5pdCgpOiB2b2lkXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcblxyXG4gICAgY29uc3QgaXNFbmFibGVkID0gdGhpcy5pc0VuYWJsZWQoKVxyXG4gICAgXHJcbiAgICBpZiAoIShpc0VuYWJsZWQgPT09IHRydWUgfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhpc0VuYWJsZWQgYXMgYW55KSkpIHJldHVyblxyXG5cclxuICAgIHRoaXMuaW5pdCgpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgUG9zaXRpb24gfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBHUk9VUF9OT0RFX1NJWkUgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyb3VwQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB7XHJcbiAgICAgICAgQ2FudmFzSGVscGVyLmFkZENhcmRNZW51T3B0aW9uKFxyXG4gICAgICAgICAgY2FudmFzLFxyXG4gICAgICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZUNhcmRNZW51T3B0aW9uKFxyXG4gICAgICAgICAgICBjYW52YXMsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZDogJ2NyZWF0ZS1ncm91cCcsXHJcbiAgICAgICAgICAgICAgbGFiZWw6ICdEcmFnIHRvIGFkZCBncm91cCcsXHJcbiAgICAgICAgICAgICAgaWNvbjogJ2dyb3VwJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoKSA9PiBHUk9VUF9OT0RFX1NJWkUsXHJcbiAgICAgICAgICAgIChjYW52YXM6IENhbnZhcywgcG9zOiBQb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgIGNhbnZhcy5jcmVhdGVHcm91cE5vZGUoe1xyXG4gICAgICAgICAgICAgICAgcG9zOiBwb3MsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBHUk9VUF9OT0RFX1NJWkVcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBNZW51LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbidcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNFZGdlLCBDYW52YXNFbGVtZW50LCBDYW52YXNOb2RlLCBQb3NpdGlvbiwgU2l6ZSB9IGZyb20gJ3NyYy9AdHlwZXMvQ2FudmFzJ1xyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gJ3NyYy9jb3JlL2V2ZW50cydcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tICcuLi9jb3JlL2NhbnZhcy1leHRlbnNpb24nXHJcblxyXG5jb25zdCBTVEFSVF9TTElERV9OQU1FID0gJ1N0YXJ0IFNsaWRlJ1xyXG5jb25zdCBERUZBVUxUX1NMSURFX05BTUUgPSAnTmV3IFNsaWRlJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VudGF0aW9uQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBzYXZlZFZpZXdwb3J0OiBhbnkgPSBudWxsXHJcbiAgaXNQcmVzZW50YXRpb25Nb2RlOiBib29sZWFuID0gZmFsc2VcclxuICB2aXNpdGVkTm9kZXM6IGFueVtdID0gW11cclxuICBmdWxsc2NyZWVuTW9kYWxPYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXHJcblxyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG4gIFxyXG4gIGluaXQoKSB7XHJcbiAgICAvKiBBZGQgd3JhcCBpbiBzbGlkZSBvcHRpb24gdG8gY29udGV4dCBtZW51ICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICdjYW52YXM6c2VsZWN0aW9uLW1lbnUnLFxyXG4gICAgICAobWVudTogTWVudSwgY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZSgnV3JhcCBpbiBzbGlkZScpXHJcbiAgICAgICAgICAgIC5zZXRJY29uKCdnYWxsZXJ5LXZlcnRpY2FsJylcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5hZGRTbGlkZShjYW52YXMsIHVuZGVmaW5lZCwgXHJcbiAgICAgICAgICAgICAgQkJveEhlbHBlci5lbmxhcmdlQkJveChCQm94SGVscGVyLmNvbWJpbmVCQm94ZXMoXHJcbiAgICAgICAgICAgICAgICBbLi4uY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKV0ubWFwKChlbGVtZW50OiBDYW52YXNFbGVtZW50KSA9PiBlbGVtZW50LmdldEJCb3goKSlcclxuICAgICAgICAgICAgICApLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd3cmFwSW5TbGlkZVBhZGRpbmcnKSlcclxuICAgICAgICAgICAgKSlcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY3JlYXRlLW5ldy1zbGlkZScsXHJcblx0XHRcdG5hbWU6ICdDcmVhdGUgbmV3IHNsaWRlJyxcclxuXHRcdFx0Y2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5ICYmICF0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuYWRkU2xpZGUoY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3NldC1zdGFydC1ub2RlJyxcclxuXHRcdFx0bmFtZTogJ1NldCBzdGFydCBub2RlJyxcclxuXHRcdFx0Y2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5ICYmICF0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSAmJiBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzLmxlbmd0aCA9PT0gMSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuc2V0U3RhcnROb2RlKGNhbnZhcywgY2FudmFzLm5vZGVzLmdldChjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzWzBdLmlkKSlcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdzdGFydC1wcmVzZW50YXRpb24nLFxyXG4gICAgICBuYW1lOiAnU3RhcnQgcHJlc2VudGF0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5zdGFydFByZXNlbnRhdGlvbihjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY29udGludWUtcHJlc2VudGF0aW9uJyxcclxuICAgICAgbmFtZTogJ0NvbnRpbnVlIHByZXNlbnRhdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+ICF0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuc3RhcnRQcmVzZW50YXRpb24oY2FudmFzLCB0cnVlKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2VuZC1wcmVzZW50YXRpb24nLFxyXG4gICAgICBuYW1lOiAnRW5kIHByZXNlbnRhdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5lbmRQcmVzZW50YXRpb24oY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ3ByZXZpb3VzLW5vZGUnLFxyXG4gICAgICBuYW1lOiAnUHJldmlvdXMgbm9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5wcmV2aW91c05vZGUoY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ25leHQtbm9kZScsXHJcbiAgICAgIG5hbWU6ICdOZXh0IG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMubmV4dE5vZGUoY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50c1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMub25DYW52YXNDaGFuZ2VkKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMub25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlTW92ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy5vbk5vZGVNb3ZlZChjYW52YXMsIG5vZGUpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgb25DYW52YXNDaGFuZ2VkKGNhbnZhczogQ2FudmFzKTogdm9pZCB7XHJcbiAgICBDYW52YXNIZWxwZXIuYWRkQ2FyZE1lbnVPcHRpb24oXHJcbiAgICAgIGNhbnZhcyxcclxuICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZUNhcmRNZW51T3B0aW9uKFxyXG4gICAgICAgIGNhbnZhcyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ25ldy1zbGlkZScsXHJcbiAgICAgICAgICBsYWJlbDogJ0RyYWcgdG8gYWRkIHNsaWRlJyxcclxuICAgICAgICAgIGljb246ICdnYWxsZXJ5LXZlcnRpY2FsJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKCkgPT4gdGhpcy5nZXREZWZhdWx0U2xpZGVTaXplKCksXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzLCBwb3M6IFBvc2l0aW9uKSA9PiB0aGlzLmFkZFNsaWRlKGNhbnZhcywgcG9zKVxyXG4gICAgICApXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBvblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2hvd1NldFN0YXJ0Tm9kZUluUG9wdXAnKSkgcmV0dXJuXHJcblxyXG4gICAgLy8gSWYgdGhlIGNhbnZhcyBpcyByZWFkb25seSBvciB0aGVyZSBhcmUgbXVsdGlwbGUvbm8gbm9kZXMgc2VsZWN0ZWQsIHJldHVyblxyXG4gICAgY29uc3Qgc2VsZWN0ZWROb2Rlc0RhdGEgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzXHJcbiAgICBpZiAoY2FudmFzLnJlYWRvbmx5IHx8IHNlbGVjdGVkTm9kZXNEYXRhLmxlbmd0aCAhPT0gMSB8fCBjYW52YXMuc2VsZWN0aW9uLnNpemUgPiAxKSByZXR1cm5cclxuICAgIFxyXG4gICAgY29uc3Qgc2VsZWN0ZWROb2RlID0gY2FudmFzLm5vZGVzLmdldChzZWxlY3RlZE5vZGVzRGF0YVswXS5pZClcclxuICAgIGlmICghc2VsZWN0ZWROb2RlKSByZXR1cm5cclxuICAgIFxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFBvcHVwTWVudU9wdGlvbihcclxuICAgICAgY2FudmFzLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlUG9wdXBNZW51T3B0aW9uKHtcclxuICAgICAgICBpZDogJ3N0YXJ0LW5vZGUnLCBcclxuICAgICAgICBsYWJlbDogJ1NldCBhcyBzdGFydCBzbGlkZScsIFxyXG4gICAgICAgIGljb246ICdwbGF5JywgXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2V0U3RhcnROb2RlKGNhbnZhcywgc2VsZWN0ZWROb2RlKVxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVNb3ZlZChfY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgIGlmICghbm9kZURhdGEuc2lkZVJhdGlvKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBub2RlQkJveCA9IG5vZGUuZ2V0QkJveCgpXHJcbiAgICBjb25zdCBub2RlU2l6ZSA9IHtcclxuICAgICAgd2lkdGg6IG5vZGVCQm94Lm1heFggLSBub2RlQkJveC5taW5YLFxyXG4gICAgICBoZWlnaHQ6IG5vZGVCQm94Lm1heFkgLSBub2RlQkJveC5taW5ZXHJcbiAgICB9XHJcbiAgICBjb25zdCBub2RlQXNwZWN0UmF0aW8gPSBub2RlU2l6ZS53aWR0aCAvIG5vZGVTaXplLmhlaWdodFxyXG5cclxuICAgIGlmIChub2RlQXNwZWN0UmF0aW8gPCBub2RlRGF0YS5zaWRlUmF0aW8pXHJcbiAgICAgIG5vZGVTaXplLndpZHRoID0gbm9kZVNpemUuaGVpZ2h0ICogbm9kZURhdGEuc2lkZVJhdGlvXHJcbiAgICBlbHNlIG5vZGVTaXplLmhlaWdodCA9IG5vZGVTaXplLndpZHRoIC8gbm9kZURhdGEuc2lkZVJhdGlvXHJcblxyXG4gICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgIHdpZHRoOiBub2RlU2l6ZS53aWR0aCxcclxuICAgICAgaGVpZ2h0OiBub2RlU2l6ZS5oZWlnaHRcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgZ2V0U3RhcnROb2RlKGNhbnZhczogQ2FudmFzKTogQ2FudmFzTm9kZXx1bmRlZmluZWQge1xyXG4gICAgZm9yIChjb25zdCBbXywgbm9kZV0gb2YgY2FudmFzLm5vZGVzKSB7XHJcbiAgICAgIGlmIChub2RlLmdldERhdGEoKS5pc1N0YXJ0Tm9kZSkgcmV0dXJuIG5vZGVcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFN0YXJ0Tm9kZShjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZXx1bmRlZmluZWQpIHtcclxuICAgIGlmICghbm9kZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgc3RhcnROb2RlID0gdGhpcy5nZXRTdGFydE5vZGUoY2FudmFzKVxyXG4gICAgaWYgKHN0YXJ0Tm9kZSkgc3RhcnROb2RlLnNldERhdGEoeyAuLi5zdGFydE5vZGUuZ2V0RGF0YSgpLCBpc1N0YXJ0Tm9kZTogZmFsc2UgfSlcclxuXHJcbiAgICBpZiAobm9kZSAhPT0gc3RhcnROb2RlKSBub2RlLnNldERhdGEoeyAuLi5ub2RlLmdldERhdGEoKSwgaXNTdGFydE5vZGU6IHRydWUgfSwgdHJ1ZSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpOiBTaXplIHtcclxuICAgIGNvbnN0IHNsaWRlU2l6ZVN0cmluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRTbGlkZVNpemUnKVxyXG4gICAgY29uc3Qgc2xpZGVTaXplQXJyYXkgPSBzbGlkZVNpemVTdHJpbmcuc3BsaXQoJ3gnKS5tYXAoKHZhbHVlOiBzdHJpbmcpID0+IHBhcnNlSW50KHZhbHVlKSlcclxuICAgIHJldHVybiB7IHdpZHRoOiBzbGlkZVNpemVBcnJheVswXSwgaGVpZ2h0OiBzbGlkZVNpemVBcnJheVsxXSB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFNsaWRlQXNwZWN0UmF0aW8oKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHNsaWRlU2l6ZSA9IHRoaXMuZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpXHJcbiAgICByZXR1cm4gc2xpZGVTaXplLndpZHRoIC8gc2xpZGVTaXplLmhlaWdodFxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTbGlkZShjYW52YXM6IENhbnZhcywgcG9zPzogUG9zaXRpb24sIGJib3g/OiBCQm94KSB7XHJcbiAgICBjb25zdCBpc1N0YXJ0Tm9kZSA9IHRoaXMuZ2V0U3RhcnROb2RlKGNhbnZhcykgPT0gbnVsbFxyXG4gICAgY29uc3Qgc2xpZGVTaXplID0gdGhpcy5nZXREZWZhdWx0U2xpZGVTaXplKClcclxuICAgIGNvbnN0IHNsaWRlQXNwZWN0UmF0aW8gPSB0aGlzLmdldFNsaWRlQXNwZWN0UmF0aW8oKVxyXG5cclxuICAgIGlmIChiYm94KSB7XHJcbiAgICAgIGNvbnN0IGJib3hXaWR0aCA9IGJib3gubWF4WCAtIGJib3gubWluWFxyXG4gICAgICBjb25zdCBiYm94SGVpZ2h0ID0gYmJveC5tYXhZIC0gYmJveC5taW5ZXHJcblxyXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIG5vZGVzIGZpdCBpbnNpZGUgdGhlIGJvdW5kaW5nIGJveCB3aGlsZSBrZWVwaW5nIHRoZSBhc3BlY3QgcmF0aW9cclxuICAgICAgaWYgKGJib3hXaWR0aCAvIGJib3hIZWlnaHQgPiBzbGlkZUFzcGVjdFJhdGlvKSB7XHJcbiAgICAgICAgc2xpZGVTaXplLndpZHRoID0gYmJveFdpZHRoXHJcbiAgICAgICAgc2xpZGVTaXplLmhlaWdodCA9IGJib3hXaWR0aCAvIHNsaWRlQXNwZWN0UmF0aW9cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZVNpemUuaGVpZ2h0ID0gYmJveEhlaWdodFxyXG4gICAgICAgIHNsaWRlU2l6ZS53aWR0aCA9IGJib3hIZWlnaHQgKiBzbGlkZUFzcGVjdFJhdGlvXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHBvcyA9IHsgXHJcbiAgICAgICAgeDogYmJveC5taW5YLFxyXG4gICAgICAgIHk6IGJib3gubWluWVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgbm8gcG9zaXRpb24gaXMgcHJvdmlkZWQsIHVzZSB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcclxuICAgIGlmICghcG9zKSBwb3MgPSBDYW52YXNIZWxwZXIuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzLCB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKSlcclxuXHJcbiAgICBjb25zdCBncm91cE5vZGUgPSBjYW52YXMuY3JlYXRlR3JvdXBOb2RlKHtcclxuICAgICAgcG9zOiBwb3MsXHJcbiAgICAgIHNpemU6IHNsaWRlU2l6ZSxcclxuICAgICAgbGFiZWw6IGlzU3RhcnROb2RlID8gU1RBUlRfU0xJREVfTkFNRSA6IERFRkFVTFRfU0xJREVfTkFNRSxcclxuICAgICAgZm9jdXM6IGZhbHNlLFxyXG4gICAgfSlcclxuXHJcbiAgICBncm91cE5vZGUuc2V0RGF0YSh7IFxyXG4gICAgICAuLi5ncm91cE5vZGUuZ2V0RGF0YSgpLCBcclxuICAgICAgc2lkZVJhdGlvOiBzbGlkZUFzcGVjdFJhdGlvLFxyXG4gICAgICBpc1N0YXJ0Tm9kZTogaXNTdGFydE5vZGUgPyB0cnVlIDogdW5kZWZpbmVkLFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgYW5pbWF0ZU5vZGVUcmFuc2l0aW9uKGNhbnZhczogQ2FudmFzLCBmcm9tTm9kZTogQ2FudmFzTm9kZXx1bmRlZmluZWQsIHRvTm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3QgdXNlQ3VzdG9tWm9vbUZ1bmN0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZycpXHJcbiAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbk1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uRHVyYXRpb24nKSAqIDEwMDBcclxuICAgIFxyXG4gICAgaWYgKGFuaW1hdGlvbkR1cmF0aW9uTXMgPiAwICYmIGZyb21Ob2RlKSB7XHJcbiAgICAgIGNvbnN0IGFuaW1hdGlvbkludGVuc2l0eSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3NsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eScpXHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50Tm9kZUJCb3hFbmxhcmdlZCA9IEJCb3hIZWxwZXIuc2NhbGVCQm94KGZyb21Ob2RlLmdldEJCb3goKSwgYW5pbWF0aW9uSW50ZW5zaXR5KVxyXG4gICAgICBpZiAodXNlQ3VzdG9tWm9vbUZ1bmN0aW9uKSBDYW52YXNIZWxwZXIuem9vbVRvQkJveChjYW52YXMsIGN1cnJlbnROb2RlQkJveEVubGFyZ2VkKVxyXG4gICAgICBlbHNlIGNhbnZhcy56b29tVG9CYm94KGN1cnJlbnROb2RlQkJveEVubGFyZ2VkKVxyXG5cclxuICAgICAgYXdhaXQgc2xlZXAoYW5pbWF0aW9uRHVyYXRpb25NcyAvIDIpXHJcblxyXG4gICAgICBjb25zdCBuZXh0Tm9kZUJCb3hFbmxhcmdlZCA9IEJCb3hIZWxwZXIuc2NhbGVCQm94KHRvTm9kZS5nZXRCQm94KCksIGFuaW1hdGlvbkludGVuc2l0eSlcclxuICAgICAgaWYgKHVzZUN1c3RvbVpvb21GdW5jdGlvbikgQ2FudmFzSGVscGVyLnpvb21Ub0JCb3goY2FudmFzLCBuZXh0Tm9kZUJCb3hFbmxhcmdlZClcclxuICAgICAgZWxzZSBjYW52YXMuem9vbVRvQmJveChuZXh0Tm9kZUJCb3hFbmxhcmdlZClcclxuXHJcbiAgICAgIGF3YWl0IHNsZWVwKGFuaW1hdGlvbkR1cmF0aW9uTXMgLyAyKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBub2RlQkJveCA9IHRvTm9kZS5nZXRCQm94KClcclxuICAgIGlmICh1c2VDdXN0b21ab29tRnVuY3Rpb24pIENhbnZhc0hlbHBlci56b29tVG9CQm94KGNhbnZhcywgbm9kZUJCb3gpXHJcbiAgICBlbHNlIGNhbnZhcy56b29tVG9CYm94KG5vZGVCQm94KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzdGFydFByZXNlbnRhdGlvbihjYW52YXM6IENhbnZhcywgdHJ5Q29udGludWU6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgLy8gT25seSByZXNldCB2aXNpdGVkIG5vZGVzIGlmIHdlIGFyZSBub3QgdHJ5aW5nIHRvIGNvbnRpbnVlXHJcbiAgICBpZiAoIXRyeUNvbnRpbnVlIHx8IHRoaXMudmlzaXRlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zdCBzdGFydE5vZGUgPSB0aGlzLmdldFN0YXJ0Tm9kZShjYW52YXMpXHJcbiAgICAgIGlmICghc3RhcnROb2RlKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gc3RhcnQgbm9kZSBmb3VuZC4gUGxlYXNlIG1hcmsgYSBub2RlIGFzIGEgc3RhcnQgbm9kZSB0cm91Z2ggdGhlIHBvcHVwIG1lbnUuJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy52aXNpdGVkTm9kZXMgPSBbc3RhcnROb2RlXVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhdmUgY3VycmVudCB2aWV3cG9ydFxyXG4gICAgdGhpcy5zYXZlZFZpZXdwb3J0ID0ge1xyXG4gICAgICB4OiBjYW52YXMudHgsXHJcbiAgICAgIHk6IGNhbnZhcy50eSxcclxuICAgICAgem9vbTogY2FudmFzLnRab29tLFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVudGVyIGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5mb2N1cygpXHJcbiAgICBjYW52YXMud3JhcHBlckVsLnJlcXVlc3RGdWxsc2NyZWVuKClcclxuICAgIGNhbnZhcy53cmFwcGVyRWwuY2xhc3NMaXN0LmFkZCgncHJlc2VudGF0aW9uLW1vZGUnKVxyXG5cclxuICAgIC8vIExvY2sgY2FudmFzXHJcbiAgICBjYW52YXMuc2V0UmVhZG9ubHkodHJ1ZSlcclxuXHJcbiAgICAvLyBSZWdpc3RlciBldmVudCBoYW5kbGVyIGZvciBrZXlib2FyZCBuYXZpZ2F0aW9uXHJcbiAgICBjYW52YXMud3JhcHBlckVsLm9ua2V5ZG93biA9IChlOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3VzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzJykpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0JykgdGhpcy5uZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnKSB0aGlzLnByZXZpb3VzTm9kZShjYW52YXMpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd1c2VQZ1VwUGdEb3duS2V5c1RvQ2hhbmdlU2xpZGVzJykpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdQYWdlRG93bicpIHRoaXMubmV4dE5vZGUoY2FudmFzKVxyXG4gICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnUGFnZVVwJykgdGhpcy5wcmV2aW91c05vZGUoY2FudmFzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gS2VlcCBtb2RhbHMgd2hpbGUgaW4gZnVsbHNjcmVlbiBtb2RlXHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uUmVjb3JkcykgPT4ge1xyXG4gICAgICBtdXRhdGlvblJlY29yZHMuZm9yRWFjaCgobXV0YXRpb25SZWNvcmQpID0+IHtcclxuICAgICAgICBtdXRhdGlvblJlY29yZC5hZGRlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcclxuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9kZSlcclxuICAgICAgICAgIGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50Py5hcHBlbmRDaGlsZChub2RlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9tcHQtaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudHxudWxsXHJcbiAgICAgIGlmIChpbnB1dEZpZWxkKSBpbnB1dEZpZWxkLmZvY3VzKClcclxuICAgIH0pXHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgeyBjaGlsZExpc3Q6IHRydWUgfSlcclxuXHJcbiAgICAvLyBSZWdpc3RlciBldmVudCBoYW5kbGVyIGZvciBleGl0aW5nIHByZXNlbnRhdGlvbiBtb2RlXHJcbiAgICBjYW52YXMud3JhcHBlckVsLm9uZnVsbHNjcmVlbmNoYW5nZSA9IChfZTogYW55KSA9PiB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkgcmV0dXJuXHJcbiAgICAgIHRoaXMuZW5kUHJlc2VudGF0aW9uKGNhbnZhcylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSA9IHRydWVcclxuXHJcbiAgICAvLyBXYWl0IGZvciBmdWxsc2NyZWVuIHRvIGJlIGVuYWJsZWRcclxuICAgIGF3YWl0IHNsZWVwKDUwMClcclxuXHJcbiAgICAvLyBab29tIHRvIGZpcnN0IG5vZGVcclxuICAgIHRoaXMuYW5pbWF0ZU5vZGVUcmFuc2l0aW9uKGNhbnZhcywgdW5kZWZpbmVkLCB0aGlzLnZpc2l0ZWROb2Rlcy5sYXN0KCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVuZFByZXNlbnRhdGlvbihjYW52YXM6IENhbnZhcykge1xyXG4gICAgLy8gVW5yZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG4gICAgdGhpcy5mdWxsc2NyZWVuTW9kYWxPYnNlcnZlcj8uZGlzY29ubmVjdCgpXHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyID0gbnVsbFxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5vbmtleWRvd24gPSBudWxsXHJcbiAgICBjYW52YXMud3JhcHBlckVsLm9uZnVsbHNjcmVlbmNoYW5nZSA9IG51bGxcclxuXHJcbiAgICAvLyBVbmxvY2sgY2FudmFzXHJcbiAgICBjYW52YXMuc2V0UmVhZG9ubHkoZmFsc2UpXHJcblxyXG4gICAgLy8gRXhpdCBmdWxsc2NyZWVuIG1vZGVcclxuICAgIGNhbnZhcy53cmFwcGVyRWwuY2xhc3NMaXN0LnJlbW92ZSgncHJlc2VudGF0aW9uLW1vZGUnKVxyXG4gICAgaWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpXHJcblxyXG4gICAgLy8gUmVzZXQgdmlld3BvcnRcclxuICAgIGNhbnZhcy5zZXRWaWV3cG9ydCh0aGlzLnNhdmVkVmlld3BvcnQueCwgdGhpcy5zYXZlZFZpZXdwb3J0LnksIHRoaXMuc2F2ZWRWaWV3cG9ydC56b29tKVxyXG4gICAgdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBuZXh0Tm9kZShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY29uc3QgZnJvbU5vZGUgPSB0aGlzLnZpc2l0ZWROb2Rlcy5sYXN0KClcclxuICAgIGlmICghZnJvbU5vZGUpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IG91dGdvaW5nRWRnZXMgPSBjYW52YXMuZ2V0RWRnZXNGb3JOb2RlKGZyb21Ob2RlKS5maWx0ZXIoKGVkZ2U6IENhbnZhc0VkZ2UpID0+IGVkZ2UuZnJvbS5ub2RlID09PSBmcm9tTm9kZSlcclxuICAgIGxldCB0b05vZGUgPSBvdXRnb2luZ0VkZ2VzLmZpcnN0KCk/LnRvLm5vZGVcclxuXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgb3V0Z29pbmcgZWRnZXMsIHdlIG5lZWQgdG8gbG9vayBhdCB0aGUgZWRnZSBsYWJlbFxyXG4gICAgaWYgKG91dGdvaW5nRWRnZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAvLyBDcmVhdGUgbWFwIG9mIGVkZ2UgbGFiZWxzIHRvIG5vZGVzXHJcbiAgICAgIGNvbnN0IHNvcnRlZEVkZ2VzID0gb3V0Z29pbmdFZGdlc1xyXG4gICAgICAgIC5zb3J0KChhOiBDYW52YXNFZGdlLCBiOiBDYW52YXNFZGdlKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIWEubGFiZWwpIHJldHVybiAxXHJcbiAgICAgICAgICBpZiAoIWIubGFiZWwpIHJldHVybiAtMVxyXG5cclxuICAgICAgICAgIHJldHVybiBhLmxhYmVsLmxvY2FsZUNvbXBhcmUoYi5sYWJlbClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgLy8gRmluZCB3aGljaCBlZGdlcyBhbHJlYWR5IGhhdmUgYmVlbiB0cmF2ZXJzZWRcclxuICAgICAgY29uc3QgdHJhdmVyc2VkRWRnZXNDb3VudCA9IHRoaXMudmlzaXRlZE5vZGVzXHJcbiAgICAgICAgLmZpbHRlcigodmlzaXRlZE5vZGU6IENhbnZhc05vZGUpID0+IHZpc2l0ZWROb2RlID09IGZyb21Ob2RlKS5sZW5ndGggLSAxXHJcblxyXG4gICAgICAvLyBTZWxlY3QgbmV4dCBlZGdlXHJcbiAgICAgIGNvbnN0IG5leHRFZGdlID0gc29ydGVkRWRnZXNbdHJhdmVyc2VkRWRnZXNDb3VudF1cclxuICAgICAgdG9Ob2RlID0gbmV4dEVkZ2UudG8ubm9kZVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b05vZGUpIHtcclxuICAgICAgdGhpcy52aXNpdGVkTm9kZXMucHVzaCh0b05vZGUpXHJcbiAgICAgIHRoaXMuYW5pbWF0ZU5vZGVUcmFuc2l0aW9uKGNhbnZhcywgZnJvbU5vZGUsIHRvTm9kZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIE5vIG1vcmUgbm9kZXMgbGVmdCwgYW5pbWF0ZSB0byBzYW1lIG5vZGVcclxuICAgICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgZnJvbU5vZGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZXZpb3VzTm9kZShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY29uc3QgZnJvbU5vZGUgPSB0aGlzLnZpc2l0ZWROb2Rlcy5wb3AoKVxyXG4gICAgaWYgKCFmcm9tTm9kZSkgcmV0dXJuXHJcblxyXG4gICAgbGV0IHRvTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKVxyXG5cclxuICAgIC8vIEZhbGwgYmFjayB0byBzYW1lIG5vZGUgaWYgdGhlcmUgYXJlIG5vIG1vcmUgbm9kZXMgYmVmb3JlXHJcbiAgICBpZiAoIXRvTm9kZSkge1xyXG4gICAgICB0b05vZGUgPSBmcm9tTm9kZVxyXG4gICAgICB0aGlzLnZpc2l0ZWROb2Rlcy5wdXNoKGZyb21Ob2RlKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYW5pbWF0ZU5vZGVUcmFuc2l0aW9uKGNhbnZhcywgZnJvbU5vZGUsIHRvTm9kZSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciwgeyBNZW51T3B0aW9uIH0gZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IHsgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdiZXR0ZXJSZWFkb25seUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIFBvcHVwIGxpc3RlbmVyICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IGFueSkgPT4gdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICAvKiBab29tIGFuZCBQYW4gbGlzdGVuZXIgKi9cclxuICAgIGxldCBtb3ZpbmdUb0JCb3ggPSBmYWxzZVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuVmlld3BvcnRDaGFuZ2VkLkJlZm9yZSxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB7XHJcbiAgICAgICAgLy8gT25seSBhbGxvdyB2aWV3cG9ydCBjaGFuZ2Ugb25jZSB3aGVuIHVzaW5nIHpvb20gdG8gYmJveFxyXG4gICAgICAgIGlmIChtb3ZpbmdUb0JCb3gpIHtcclxuICAgICAgICAgIG1vdmluZ1RvQkJveCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRab29tKGNhbnZhcylcclxuICAgICAgICAgIHRoaXMudXBkYXRlTG9ja2VkUGFuKGNhbnZhcylcclxuXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY2FudmFzLnJlYWRvbmx5KSByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Rpc2FibGVab29tJykpIHtcclxuICAgICAgICAgIGNhbnZhcy56b29tID0gY2FudmFzLmxvY2tlZFpvb20gPz8gY2FudmFzLnpvb21cclxuICAgICAgICAgIGNhbnZhcy50Wm9vbSA9IGNhbnZhcy5sb2NrZWRab29tID8/IGNhbnZhcy50Wm9vbVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Rpc2FibGVQYW4nKSkge1xyXG4gICAgICAgICAgY2FudmFzLnggPSBjYW52YXMubG9ja2VkWCA/PyBjYW52YXMueFxyXG4gICAgICAgICAgY2FudmFzLnR4ID0gY2FudmFzLmxvY2tlZFggPz8gY2FudmFzLnR4XHJcbiAgICAgICAgICBjYW52YXMueSA9IGNhbnZhcy5sb2NrZWRZID8/IGNhbnZhcy55XHJcbiAgICAgICAgICBjYW52YXMudHkgPSBjYW52YXMubG9ja2VkWSA/PyBjYW52YXMudHlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcblxyXG4gICAgLy8gQWxsb3cgdmlld3BvcnQgY2hhbmdlIHdoZW4gdXNpbmcgem9vbSB0byBiYm94XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQmVmb3JlLFxyXG4gICAgICAoKSA9PiBtb3ZpbmdUb0JCb3ggPSB0cnVlXHJcbiAgICApKVxyXG5cclxuICAgIC8qIFJlYWRvbmx5IGxpc3RlbmVyICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlJlYWRvbmx5Q2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfcmVhZG9ubHk6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwTWVudShjYW52YXMpXHJcbiAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRab29tKGNhbnZhcylcclxuICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFBhbihjYW52YXMpXHJcbiAgICAgIH1cclxuICAgICkpXHJcblxyXG4gICAgLyogQWRkIHNldHRpbmdzICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5hZGRRdWlja1NldHRpbmdzKGNhbnZhcylcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBhZGRRdWlja1NldHRpbmdzKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNhbnZhcy5xdWlja1NldHRpbmdzQnV0dG9uPy5wYXJlbnRFbGVtZW50XHJcbiAgICBpZiAoIXNldHRpbmdzQ29udGFpbmVyKSByZXR1cm5cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUXVpY2tTZXR0aW5nc0J1dHRvbihcclxuICAgICAgc2V0dGluZ3NDb250YWluZXIsXHJcbiAgICAgIHRoaXMuY3JlYXRlVG9nZ2xlKHtcclxuICAgICAgICBpZDogJ2Rpc2FibGUtbm9kZS1wb3B1cCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIG5vZGUgcG9wdXAnLFxyXG4gICAgICAgIGljb246ICdhcnJvdy11cC1yaWdodC1mcm9tLWNpcmNsZScsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgfSwgJ2Rpc2FibGVOb2RlUG9wdXAnKVxyXG4gICAgKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgdGhpcy5jcmVhdGVUb2dnbGUoe1xyXG4gICAgICAgIGlkOiAnZGlzYWJsZS16b29tJyxcclxuICAgICAgICBsYWJlbDogJ0Rpc2FibGUgem9vbScsXHJcbiAgICAgICAgaWNvbjogJ3pvb20taW4nLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICB9LCAnZGlzYWJsZVpvb20nKVxyXG4gICAgKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgdGhpcy5jcmVhdGVUb2dnbGUoe1xyXG4gICAgICAgIGlkOiAnZGlzYWJsZS1wYW4nLFxyXG4gICAgICAgIGxhYmVsOiAnRGlzYWJsZSBwYW4nLFxyXG4gICAgICAgIGljb246ICdtb3ZlJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy51cGRhdGVMb2NrZWRQYW4oY2FudmFzKVxyXG4gICAgICB9LCAnZGlzYWJsZVBhbicpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZVRvZ2dsZShtZW51T3B0aW9uOiBNZW51T3B0aW9uLCBzZXR0aW5nS2V5OiBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgdG9nZ2xlID0gQ2FudmFzSGVscGVyLmNyZWF0ZVF1aWNrU2V0dGluZ3NCdXR0b24oe1xyXG4gICAgICAuLi5tZW51T3B0aW9uLFxyXG4gICAgICBjYWxsYmFjazogKCkgPT4gKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmdLZXkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2V0U2V0dGluZyh7IFtzZXR0aW5nS2V5XTogbmV3VmFsdWUgfSlcclxuXHJcbiAgICAgICAgdG9nZ2xlLmRhdGFzZXQudG9nZ2xlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoc2V0dGluZ0tleSkudG9TdHJpbmcoKVxyXG4gICAgICAgIG1lbnVPcHRpb24uY2FsbGJhY2s/LmNhbGwodGhpcylcclxuICAgICAgfSkoKVxyXG4gICAgfSlcclxuICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdzaG93LXdoaWxlLXJlYWRvbmx5JylcclxuXHJcbiAgICB0b2dnbGUuZGF0YXNldC50b2dnbGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhzZXR0aW5nS2V5KS50b1N0cmluZygpXHJcblxyXG4gICAgcmV0dXJuIHRvZ2dsZVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVQb3B1cE1lbnUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IGhpZGRlbiA9IGNhbnZhcy5yZWFkb25seSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkaXNhYmxlTm9kZVBvcHVwJylcclxuICAgIGNhbnZhcy5tZW51Lm1lbnVFbC5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gJ2hpZGRlbicgOiAndmlzaWJsZSdcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTG9ja2VkWm9vbShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY2FudmFzLmxvY2tlZFpvb20gPSBjYW52YXMudFpvb21cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTG9ja2VkUGFuKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjYW52YXMubG9ja2VkWCA9IGNhbnZhcy50eFxyXG4gICAgY2FudmFzLmxvY2tlZFkgPSBjYW52YXMudHlcclxuICB9XHJcbn0iLCAiaW1wb3J0IEFwcCwgeyBTdWdnZXN0TW9kYWwsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCBQYXRoSGVscGVyIGZyb20gJ3NyYy91dGlscy9wYXRoLWhlbHBlcidcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlTmFtZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG4gIHBhcmVudFBhdGg6IHN0cmluZ1xyXG4gIGZpbGVFeHRlbnNpb246IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGFyZW50UGF0aDogc3RyaW5nLCBmaWxlRXh0ZW5zaW9uOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKGFwcClcclxuXHJcbiAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoXHJcbiAgICB0aGlzLmZpbGVFeHRlbnNpb24gPSBmaWxlRXh0ZW5zaW9uXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgcXVlcnlXaXRob3V0RXh0ZW5zaW9uID0gcXVlcnkucmVwbGFjZShuZXcgUmVnRXhwKGBcXFxcLiR7dGhpcy5maWxlRXh0ZW5zaW9ufSRgKSwgJycpXHJcbiAgICBpZiAocXVlcnlXaXRob3V0RXh0ZW5zaW9uID09PSAnJykgcmV0dXJuIFtdXHJcblxyXG4gICAgY29uc3QgcXVlcnlXaXRoRXh0ZW5zaW9uID0gcXVlcnlXaXRob3V0RXh0ZW5zaW9uICsgJy4nICsgdGhpcy5maWxlRXh0ZW5zaW9uXHJcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IFtgJHt0aGlzLnBhcmVudFBhdGh9LyR7cXVlcnlXaXRoRXh0ZW5zaW9ufWAsIHF1ZXJ5V2l0aEV4dGVuc2lvbl1cclxuICAgICAgLy8gRmlsdGVyIG91dCBzdWdnZXN0aW9ucyBmb3IgZmlsZXMgdGhhdCBhbHJlYWR5IGV4aXN0XHJcbiAgICAgIC5maWx0ZXIocyA9PiB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocykgPT09IG51bGwpXHJcblxyXG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXHJcbiAgfVxyXG5cclxuICByZW5kZXJTdWdnZXN0aW9uKHRleHQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBlbC5zZXRUZXh0KHRleHQpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3RleHQ6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbiA9ICh0ZXh0OiBzdHJpbmcpID0+IHsgcmVzb2x2ZSh0ZXh0KSB9XHJcbiAgICAgIHRoaXMub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVTZWxlY3RNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuICBmaWxlczogc3RyaW5nW11cclxuICBzdWdnZXN0TmV3RmlsZTogYm9vbGVhblxyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZXh0ZW5zaW9uc1JlZ2V4PzogUmVnRXhwLCBzdWdnZXN0TmV3RmlsZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICBzdXBlcihhcHApXHJcblxyXG4gICAgdGhpcy5maWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcclxuICAgICAgLm1hcChmaWxlID0+IGZpbGUucGF0aClcclxuICAgICAgLmZpbHRlcihwYXRoID0+IFBhdGhIZWxwZXIuZXh0ZW5zaW9uKHBhdGgpPy5tYXRjaChleHRlbnNpb25zUmVnZXggPz8gLy4qLykpXHJcbiAgICB0aGlzLnN1Z2dlc3ROZXdGaWxlID0gc3VnZ2VzdE5ld0ZpbGVcclxuXHJcbiAgICB0aGlzLnNldFBsYWNlaG9sZGVyKCdUeXBlIHRvIHNlYXJjaC4uLicpXHJcbiAgICB0aGlzLnNldEluc3RydWN0aW9ucyhbe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdcdTIxOTFcdTIxOTMnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBuYXZpZ2F0ZSdcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gb3BlbidcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnc2hpZnQgXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gY3JlYXRlJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdlc2MnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBkaXNtaXNzJ1xyXG4gICAgfV0pXHJcblxyXG4gICAgdGhpcy5zY29wZS5yZWdpc3RlcihbJ1NoaWZ0J10sICdFbnRlcicsICgoZSkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbih0aGlzLmlucHV0RWwudmFsdWUsIGUpXHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSB0aGlzLmZpbGVzLmZpbHRlcihwYXRoID0+IHBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKSlcclxuICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGggPT09IDAgJiYgdGhpcy5zdWdnZXN0TmV3RmlsZSkgc3VnZ2VzdGlvbnMucHVzaChxdWVyeSlcclxuXHJcbiAgICByZXR1cm4gc3VnZ2VzdGlvbnNcclxuICB9XHJcblxyXG4gIHJlbmRlclN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHNpbXBsaWZpZWRQYXRoID0gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJylcclxuICAgIGVsLnNldFRleHQoc2ltcGxpZmllZFBhdGgpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3BhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxURmlsZT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uID0gKHBhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpXHJcblxyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpXHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmaWxlKVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc3VnZ2VzdE5ld0ZpbGUpIHJldHVyblxyXG5cclxuICAgICAgICBpZiAoUGF0aEhlbHBlci5leHRlbnNpb24ocGF0aCkgPT09IHVuZGVmaW5lZCkgcGF0aCArPSAnLm1kJ1xyXG4gICAgICAgIGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgJycpXHJcbiAgICAgICAgcmVzb2x2ZShuZXdGaWxlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9wZW4oKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0aEhlbHBlciB7XHJcbiAgc3RhdGljIGV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHBhdGguaW5jbHVkZXMoJy4nKSA/IHBhdGguc3BsaXQoJy4nKS5wb3AoKSA6IHVuZGVmaW5lZFxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBNZW51IH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgRmlsZU5hbWVNb2RhbCB9IGZyb20gXCJzcmMvdXRpbHMvbW9kYWwtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgRU5DQVBTVUxBVEVEX0ZJTEVfTk9ERV9TSVpFID0geyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmNhcHN1bGF0ZUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2NhbnZhc0VuY2Fwc3VsYXRpb25FbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICAvKiBBZGQgY29tbWFuZCB0byBlbmNhcHN1bGF0ZSBzZWxlY3Rpb24gKi9cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2VuY2Fwc3VsYXRlLXNlbGVjdGlvbicsXHJcbiAgICAgIG5hbWU6ICdFbmNhcHN1bGF0ZSBzZWxlY3Rpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgY2FudmFzLnNlbGVjdGlvbi5zaXplID4gMCxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuZW5jYXBzdWxhdGVTZWxlY3Rpb24oY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIC8qIEFkZCBlbmNhcHN1bGF0ZSBvcHRpb24gdG8gY29udGV4dCBtZW51ICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICdjYW52YXM6c2VsZWN0aW9uLW1lbnUnLFxyXG4gICAgICAobWVudTogTWVudSwgY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZSgnRW5jYXBzdWxhdGUnKVxyXG4gICAgICAgICAgICAuc2V0SWNvbignZmlsZS1wbHVzJylcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5lbmNhcHN1bGF0ZVNlbGVjdGlvbihjYW52YXMpKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGVuY2Fwc3VsYXRlU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpXHJcblxyXG4gICAgLy8gQ3JlYXRlIG5ldyBmaWxlXHJcbiAgICBjb25zdCBzb3VyY2VGaWxlRm9sZGVyID0gY2FudmFzLnZpZXcuZmlsZS5wYXJlbnQ/LnBhdGhcclxuICAgIGlmICghc291cmNlRmlsZUZvbGRlcikgcmV0dXJuIC8vIFNob3VsZCBuZXZlciBoYXBwZW5cclxuXHJcbiAgICBjb25zdCB0YXJnZXRGaWxlUGF0aCA9IGF3YWl0IG5ldyBGaWxlTmFtZU1vZGFsKFxyXG4gICAgICB0aGlzLnBsdWdpbi5hcHAsXHJcbiAgICAgIHNvdXJjZUZpbGVGb2xkZXIsXHJcbiAgICAgICdjYW52YXMnXHJcbiAgICApLmF3YWl0SW5wdXQoKVxyXG5cclxuICAgIGNvbnN0IG5ld0ZpbGVEYXRhID0geyBub2Rlczogc2VsZWN0aW9uLm5vZGVzLCBlZGdlczogc2VsZWN0aW9uLmVkZ2VzIH1cclxuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHRhcmdldEZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShuZXdGaWxlRGF0YSwgbnVsbCwgMikpXHJcblxyXG4gICAgLy8gUmVtb3ZlIGZyb20gY3VycmVudCBjYW52YXNcclxuICAgIGZvciAoY29uc3Qgbm9kZURhdGEgb2Ygc2VsZWN0aW9uLm5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KG5vZGVEYXRhLmlkKVxyXG4gICAgICBpZiAobm9kZSkgY2FudmFzLnJlbW92ZU5vZGUobm9kZSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgbGluayB0byBuZXcgZmlsZSBpbiBjdXJyZW50IGNhbnZhc1xyXG4gICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogc2VsZWN0aW9uLmNlbnRlci54IC0gRU5DQVBTVUxBVEVEX0ZJTEVfTk9ERV9TSVpFLndpZHRoIC8gMixcclxuICAgICAgICB5OiBzZWxlY3Rpb24uY2VudGVyLnkgLSBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUuaGVpZ2h0IC8gMlxyXG4gICAgICB9LFxyXG4gICAgICBzaXplOiBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUsXHJcbiAgICAgIGZpbGU6IGZpbGVcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgRmlsZVNlbGVjdE1vZGFsIH0gZnJvbSBcInNyYy91dGlscy9tb2RhbC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxudHlwZSBEaXJlY3Rpb24gPSAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0J1xyXG5jb25zdCBESVJFQ1RJT05TID0gWyd1cCcsICdkb3duJywgJ2xlZnQnLCAncmlnaHQnXSBhcyBEaXJlY3Rpb25bXVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWFuZHNDYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdjb21tYW5kc0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdjcmVhdGUtdGV4dC1ub2RlJyxcclxuICAgICAgbmFtZTogJ0NyZWF0ZSB0ZXh0IG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHksXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmNyZWF0ZVRleHROb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdjcmVhdGUtZmlsZS1ub2RlJyxcclxuICAgICAgbmFtZTogJ0NyZWF0ZSBmaWxlIG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHksXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmNyZWF0ZUZpbGVOb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdzZWxlY3QtYWxsLWVkZ2VzJyxcclxuICAgICAgbmFtZTogJ1NlbGVjdCBhbGwgZWRnZXMnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiB0cnVlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gY2FudmFzLnVwZGF0ZVNlbGVjdGlvbigoKSA9PiBcclxuICAgICAgICAgIGNhbnZhcy5zZWxlY3Rpb24gPSBuZXcgU2V0KGNhbnZhcy5lZGdlcy52YWx1ZXMoKSlcclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnem9vbS10by1zZWxlY3Rpb24nLFxyXG4gICAgICBuYW1lOiAnWm9vbSB0byBzZWxlY3Rpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA+IDAsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiBjYW52YXMuem9vbVRvU2VsZWN0aW9uKClcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICBmb3IgKGNvbnN0IGRpcmVjdGlvbiBvZiBESVJFQ1RJT05TKSB7XHJcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiBgY2xvbmUtbm9kZS0ke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgIG5hbWU6IGBDbG9uZSBub2RlICR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPT09IDEgJiYgY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWU/LmdldERhdGEoKS50eXBlID09PSAndGV4dCcsXHJcbiAgICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuY2xvbmVOb2RlKGNhbnZhcywgZGlyZWN0aW9uKVxyXG4gICAgICAgIClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiBgZXhwYW5kLW5vZGUtJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBuYW1lOiBgRXhwYW5kIG5vZGUgJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5ICYmIGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA9PT0gMSxcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5leHBhbmROb2RlKGNhbnZhcywgZGlyZWN0aW9uKVxyXG4gICAgICAgIClcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlVGV4dE5vZGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNpemUgPSBjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnNcclxuICAgIGNvbnN0IHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHNpemUpXHJcblxyXG4gICAgY2FudmFzLmNyZWF0ZVRleHROb2RlKHsgcG9zOiBwb3MsIHNpemU6IHNpemUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlRmlsZU5vZGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNpemUgPSBjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnNcclxuICAgIGNvbnN0IHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHNpemUpXHJcbiAgICBjb25zdCBmaWxlID0gYXdhaXQgbmV3IEZpbGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHVuZGVmaW5lZCwgdHJ1ZSkuYXdhaXRJbnB1dCgpXHJcblxyXG4gICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHsgcG9zOiBwb3MsIHNpemU6IHNpemUsIGZpbGU6IGZpbGUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xvbmVOb2RlKGNhbnZhczogQ2FudmFzLCBjbG9uZURpcmVjdGlvbjogRGlyZWN0aW9uKSB7XHJcbiAgICBjb25zdCBzb3VyY2VOb2RlID0gY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWVcclxuICAgIGlmICghc291cmNlTm9kZSkgcmV0dXJuXHJcbiAgICBjb25zdCBzb3VyY2VOb2RlRGF0YSA9IHNvdXJjZU5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgY29uc3Qgbm9kZU1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Nsb25lTm9kZU1hcmdpbicpXHJcbiAgICBjb25zdCBvZmZzZXQgPSB7IFxyXG4gICAgICB4OiAoc291cmNlTm9kZS53aWR0aCArIG5vZGVNYXJnaW4pICogKGNsb25lRGlyZWN0aW9uID09PSAnbGVmdCcgPyAtMSA6IChjbG9uZURpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/IDEgOiAwKSksXHJcbiAgICAgIHk6IChzb3VyY2VOb2RlLmhlaWdodCArIG5vZGVNYXJnaW4pICogKGNsb25lRGlyZWN0aW9uID09PSAndXAnID8gLTEgOiAoY2xvbmVEaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAwKSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbG9uZWROb2RlID0gY2FudmFzLmNyZWF0ZVRleHROb2RlKHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogc291cmNlTm9kZS54ICsgb2Zmc2V0LngsXHJcbiAgICAgICAgeTogc291cmNlTm9kZS55ICsgb2Zmc2V0LnlcclxuICAgICAgfSxcclxuICAgICAgc2l6ZToge1xyXG4gICAgICAgIHdpZHRoOiBzb3VyY2VOb2RlLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogc291cmNlTm9kZS5oZWlnaHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBjbG9uZWROb2RlLnNldERhdGEoeyBcclxuICAgICAgLi4uY2xvbmVkTm9kZS5nZXREYXRhKCksIFxyXG4gICAgICBjb2xvcjogc291cmNlTm9kZURhdGEuY29sb3IsXHJcbiAgICAgIHNoYXBlOiBzb3VyY2VOb2RlRGF0YS5zaGFwZSBcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3pvb21Ub0Nsb25lZE5vZGUnKSlcclxuICAgICAgY2FudmFzLnpvb21Ub0Jib3goY2xvbmVkTm9kZS5nZXRCQm94KCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV4cGFuZE5vZGUoY2FudmFzOiBDYW52YXMsIGV4cGFuZERpcmVjdGlvbjogRGlyZWN0aW9uKSB7XHJcbiAgICBjb25zdCBub2RlID0gY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWVcclxuICAgIGlmICghbm9kZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgZXhwYW5kTm9kZVN0ZXBTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZXhwYW5kTm9kZVN0ZXBTaXplJylcclxuICAgIGNvbnN0IGV4cGFuZCA9IHtcclxuICAgICAgeDogZXhwYW5kRGlyZWN0aW9uID09PSAnbGVmdCcgPyAtMSA6IChleHBhbmREaXJlY3Rpb24gPT09ICdyaWdodCcgPyAxIDogMCksXHJcbiAgICAgIHk6IGV4cGFuZERpcmVjdGlvbiA9PT0gJ3VwJyA/IC0xIDogKGV4cGFuZERpcmVjdGlvbiA9PT0gJ2Rvd24nID8gMSA6IDApXHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZS5nZXREYXRhKCksXHJcbiAgICAgIHdpZHRoOiBub2RlLndpZHRoICsgZXhwYW5kLnggKiBleHBhbmROb2RlU3RlcFNpemUsXHJcbiAgICAgIGhlaWdodDogbm9kZS5oZWlnaHQgKyBleHBhbmQueSAqIGV4cGFuZE5vZGVTdGVwU2l6ZVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc0RhdGEsIENhbnZhc0VkZ2UsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgUE9SVEFMX1BBRERJTkcgPSA1MFxyXG5jb25zdCBNSU5fT1BFTl9QT1JUQUxfU0laRSA9IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9ydGFsc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ3BvcnRhbHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZVJlbW92ZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZU1vdmVkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHRoaXMub25EcmFnZ2luZ1N0YXRlQ2hhbmdlZChjYW52YXMsIHN0YXJ0ZWREcmFnZ2luZylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Db250YWluaW5nTm9kZXNSZXF1ZXN0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgYmJveDogQkJveCwgbm9kZXM6IENhbnZhc05vZGVbXSkgPT4gdGhpcy5vbkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZChjYW52YXMsIGJib3gsIG5vZGVzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlNlbGVjdGlvbkNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkgPT4gdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQoY2FudmFzLCBvbGRTZWxlY3Rpb24sIHVwZGF0ZVNlbGVjdGlvbilcclxuICAgICkpXHJcbiAgICBcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhKSA9PiB0aGlzLnJlbW92ZVBvcnRhbENhbnZhc0RhdGEoY2FudmFzLCBkYXRhKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkxvYWREYXRhLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGRhdGE6IENhbnZhc0RhdGEsIHNldERhdGE6IChkYXRhOiBDYW52YXNEYXRhKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXRDYW52YXNEYXRhV2l0aFBvcnRhbHMoY2FudmFzLCBkYXRhKVxyXG4gICAgICAgICAgLnRoZW4oKG5ld0RhdGE6IENhbnZhc0RhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gU2tpcCBpZiB0aGUgZGF0YSBkaWRuJ3QgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmIChuZXdEYXRhLm5vZGVzLmxlbmd0aCA9PT0gZGF0YS5ub2Rlcy5sZW5ndGggJiYgbmV3RGF0YS5lZGdlcy5sZW5ndGggPT09IGRhdGEuZWRnZXMubGVuZ3RoKSByZXR1cm5cclxuICAgICAgICAgICAgc2V0RGF0YShuZXdEYXRhKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlUG9wdXBNZW51KGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBpZiAoY2FudmFzLnJlYWRvbmx5KSByZXR1cm5cclxuXHJcbiAgICAvLyBPbmx5IHNlYXJjaCBmb3IgdmFsaWQgbm9kZXNcclxuICAgIGNvbnN0IHNlbGVjdGVkRmlsZU5vZGVzID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5tYXAobm9kZURhdGEgPT4ge1xyXG4gICAgICBjb25zdCBub2RlID0gY2FudmFzLm5vZGVzLmdldChub2RlRGF0YS5pZClcclxuICAgICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbFxyXG5cclxuICAgICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJykgcmV0dXJuIG51bGxcclxuICAgICAgaWYgKG5vZGUuZmlsZT8uZXh0ZW5zaW9uID09PSAnY2FudmFzJykgcmV0dXJuIG5vZGVcclxuICAgICAgXHJcbiAgICAgIC8vIENsb3NlIHBvcnRhbCBvZiBub24tY2FudmFzIGZpbGVcclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbFRvRmlsZSkgdGhpcy5zZXRQb3J0YWxPcGVuKGNhbnZhcywgbm9kZSwgZmFsc2UpXHJcblxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfSkuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gbnVsbCkgYXMgQ2FudmFzTm9kZVtdXHJcbiAgICBcclxuICAgIGlmIChzZWxlY3RlZEZpbGVOb2Rlcy5sZW5ndGggIT09IDEpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHBvcnRhbE5vZGUgPSBzZWxlY3RlZEZpbGVOb2Rlc1swXVxyXG4gICAgY29uc3QgcG9ydGFsTm9kZURhdGEgPSBwb3J0YWxOb2RlLmdldERhdGEoKVxyXG5cclxuICAgIC8vIElmIGZpbGUgY2hhbmdlZFxyXG4gICAgaWYgKHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSAmJiBwb3J0YWxOb2RlRGF0YS5maWxlICE9PSBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHtcclxuICAgICAgdGhpcy5zZXRQb3J0YWxPcGVuKGNhbnZhcywgcG9ydGFsTm9kZSwgdHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUG9wdXBNZW51T3B0aW9uKFxyXG4gICAgICBjYW52YXMsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAgIGlkOiAndG9nZ2xlLXBvcnRhbCcsXHJcbiAgICAgICAgbGFiZWw6IHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA/ICdDbG9zZSBwb3J0YWwnIDogJ09wZW4gcG9ydGFsJyxcclxuICAgICAgICBpY29uOiBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPyAnZG9vci1vcGVuJyA6ICdkb29yLWNsb3NlZCcsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc2V0UG9ydGFsT3BlbihjYW52YXMsIHBvcnRhbE5vZGUsIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0UG9ydGFsT3BlbihjYW52YXM6IENhbnZhcywgcG9ydGFsTm9kZTogQ2FudmFzTm9kZSwgb3BlbjogYm9vbGVhbikge1xyXG4gICAgY29uc3QgcG9ydGFsTm9kZURhdGEgPSBwb3J0YWxOb2RlLmdldERhdGEoKVxyXG4gICAgcG9ydGFsTm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ucG9ydGFsTm9kZURhdGEsXHJcbiAgICAgIHBvcnRhbFRvRmlsZTogb3BlbiA/IHBvcnRhbE5vZGVEYXRhLmZpbGUgOiB1bmRlZmluZWRcclxuICAgIH0pXHJcblxyXG4gICAgLy8gVXBkYXRlIHdob2xlIGNhbnZhcyBkYXRhXHJcbiAgICBjYW52YXMuc2V0RGF0YShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVSZW1vdmVkKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFub2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVyblxyXG5cclxuICAgIC8vIFJlbW92ZSBuZXN0ZWQgbm9kZXMgYW5kIGVkZ2VzXHJcbiAgICBPYmplY3Qua2V5cyhub2RlRGF0YS5wb3J0YWxJZE1hcHM/Lm5vZGVJZE1hcCA/PyB7fSkubWFwKHJlZk5vZGVJZCA9PiBjYW52YXMubm9kZXMuZ2V0KHJlZk5vZGVJZCkpXHJcbiAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIC5mb3JFYWNoKG5vZGUgPT4gY2FudmFzLnJlbW92ZU5vZGUobm9kZSEpKVxyXG5cclxuICAgIE9iamVjdC5rZXlzKG5vZGVEYXRhLnBvcnRhbElkTWFwcz8uZWRnZUlkTWFwID8/IHt9KS5tYXAocmVmRWRnZUlkID0+IGNhbnZhcy5lZGdlcy5nZXQocmVmRWRnZUlkKSlcclxuICAgICAgLmZpbHRlcihlZGdlID0+IGVkZ2UgIT09IHVuZGVmaW5lZClcclxuICAgICAgLmZvckVhY2goZWRnZSA9PiBjYW52YXMucmVtb3ZlRWRnZShlZGdlISkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkKF9jYW52YXM6IENhbnZhcywgX2Jib3g6IEJCb3gsIG5vZGVzOiBDYW52YXNOb2RlW10pIHtcclxuICAgIC8vIFJlbW92ZSBub2RlcyBmcm9tIHBvcnRhbHMgZnJvbSB0aGUgbGlzdFxyXG4gICAgbm9kZXMuc3BsaWNlKDAsIG5vZGVzLmxlbmd0aCwgLi4ubm9kZXMuZmlsdGVyKG5vZGUgPT4gbm9kZS5nZXREYXRhKCkucG9ydGFsSWQgPT09IHVuZGVmaW5lZCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uU2VsZWN0aW9uQ2hhbmdlZChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkge1xyXG4gICAgLy8gVW5zZWxlY3Qgbm9kZXMgZnJvbSBwb3J0YWxzXHJcbiAgICB1cGRhdGVTZWxlY3Rpb24oKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0aW9uID0gQXJyYXkuZnJvbShjYW52YXMuc2VsZWN0aW9uKVxyXG4gICAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlLmdldERhdGEoKS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICBjYW52YXMuc2VsZWN0aW9uID0gbmV3IFNldCh1cGRhdGVkU2VsZWN0aW9uKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBNb3ZlIHByZXZpb3VzbHkgc2VsZWN0ZWQgcG9ydGFscyB0byB0aGUgYmFja1xyXG4gICAgY29uc3QgcHJldmlvdXNseVNlbGVjdGVkUG9ydGFsTm9kZXNJZHMgPSBBcnJheS5mcm9tKG9sZFNlbGVjdGlvbilcclxuICAgICAgLmZpbHRlcihub2RlID0+IChub2RlLmdldERhdGEoKSBhcyBhbnkpLnBvcnRhbFRvRmlsZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAuZmxhdE1hcChub2RlID0+IHtcclxuICAgICAgICBjb25zdCBwb3J0YWxOb2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICAgICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkcyA9IHRoaXMuZ2V0TmVzdGVkUG9ydGFsc0lkcyhjYW52YXMsIHBvcnRhbE5vZGVEYXRhLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gW3BvcnRhbE5vZGVEYXRhLmlkLCAuLi5uZXN0ZWRQb3J0YWxzSWRzXVxyXG4gICAgICB9KVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgLy8gTm90IGZyb20gdW5zZWxlY3RlZCBwb3J0YWxcclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQgfHwgIXByZXZpb3VzbHlTZWxlY3RlZFBvcnRhbE5vZGVzSWRzLmluY2x1ZGVzKG5vZGVEYXRhLnBvcnRhbElkKSkgY29udGludWVcclxuXHJcbiAgICAgIC8vIE1vdmUgdG8gZnJvbnRcclxuICAgICAgbm9kZS51cGRhdGVaSW5kZXgoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhczogQ2FudmFzLCBwb3J0YWxJZDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSBwb3J0YWxJZCkge1xyXG4gICAgICAgIG5lc3RlZFBvcnRhbHNJZHMucHVzaChub2RlRGF0YS5pZClcclxuICAgICAgICBuZXN0ZWRQb3J0YWxzSWRzLnB1c2goLi4udGhpcy5nZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhcywgbm9kZURhdGEuaWQpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5lc3RlZFBvcnRhbHNJZHNcclxuICB9XHJcblxyXG4gIHJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlOiAoKSA9PiB2b2lkXHJcbiAgcHJpdmF0ZSBvbkRyYWdnaW5nU3RhdGVDaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pIHtcclxuICAgIC8vIElmIG5vIG9wZW4gcG9ydGFsIGdldHMgZHJhZ2dlZCwgcmV0dXJuXHJcbiAgICBpZiAoIWNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMuc29tZShub2RlID0+IG5vZGUudHlwZSA9PT0gJ2ZpbGUnICYmIG5vZGUucG9ydGFsVG9GaWxlKSkgcmV0dXJuXHJcblxyXG4gICAgLy8gRGlzYWJsZSBvYmplY3Qgc25hcHBpbmcgdG8gZml4IHNlbGYtYWxpZ25pbmdcclxuICAgIGlmIChzdGFydGVkRHJhZ2dpbmcpIHtcclxuICAgICAgY29uc3Qgb2JqZWN0U25hcHBpbmdFbmFibGVkID0gY2FudmFzLm9wdGlvbnMuc25hcFRvT2JqZWN0c1xyXG4gICAgICB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlID0gKCkgPT4gY2FudmFzLnRvZ2dsZU9iamVjdFNuYXBwaW5nKG9iamVjdFNuYXBwaW5nRW5hYmxlZClcclxuXHJcbiAgICAgIGlmIChvYmplY3RTbmFwcGluZ0VuYWJsZWQpIGNhbnZhcy50b2dnbGVPYmplY3RTbmFwcGluZyhmYWxzZSlcclxuICAgIH0gZWxzZSB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlPy4oKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVNb3ZlZChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJyB8fCAhbm9kZURhdGEucG9ydGFsVG9GaWxlKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLm9uT3BlblBvcnRhbE1vdmVkKGNhbnZhcywgbm9kZSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25PcGVuUG9ydGFsTW92ZWQoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGxldCBwb3J0YWxOb2RlRGF0YSA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgLy8gVXBkYXRlIG5lc3RlZCBub2RlcyBwb3NpdGlvbnNcclxuICAgIGNvbnN0IG5lc3RlZE5vZGVzSWRNYXAgPSBwb3J0YWxOb2RlLmdldERhdGEoKS5wb3J0YWxJZE1hcHM/Lm5vZGVJZE1hcFxyXG4gICAgaWYgKCFuZXN0ZWROb2Rlc0lkTWFwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBuZXN0ZWROb2RlcyA9IE9iamVjdC5rZXlzKG5lc3RlZE5vZGVzSWRNYXApLm1hcChyZWZOb2RlSWQgPT4gY2FudmFzLm5vZGVzLmdldChyZWZOb2RlSWQpKVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gdW5kZWZpbmVkKSBhcyBDYW52YXNOb2RlW11cclxuICAgIGNvbnN0IHNvdXJjZUJCb3ggPSBDYW52YXNIZWxwZXIuZ2V0QkJveChuZXN0ZWROb2RlcylcclxuXHJcbiAgICAvLyBSZXNpemUgcG9ydGFsXHJcbiAgICBjb25zdCB0YXJnZXRTaXplID0gdGhpcy5nZXRQb3J0YWxTaXplKHNvdXJjZUJCb3gpXHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEud2lkdGggIT09IHRhcmdldFNpemUud2lkdGggfHwgcG9ydGFsTm9kZURhdGEuaGVpZ2h0ICE9PSB0YXJnZXRTaXplLmhlaWdodCkge1xyXG4gICAgICBwb3J0YWxOb2RlLnNldERhdGEoe1xyXG4gICAgICAgIC4uLnBvcnRhbE5vZGVEYXRhLFxyXG4gICAgICAgIHdpZHRoOiB0YXJnZXRTaXplLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogdGFyZ2V0U2l6ZS5oZWlnaHRcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgbmVzdGVkIG5vZGVzXHJcbiAgICBjb25zdCBwb3J0YWxPZmZzZXQgPSB7XHJcbiAgICAgIHg6IHBvcnRhbE5vZGVEYXRhLnggLSBzb3VyY2VCQm94Lm1pblggKyBQT1JUQUxfUEFERElORyxcclxuICAgICAgeTogcG9ydGFsTm9kZURhdGEueSAtIHNvdXJjZUJCb3gubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBuZXN0ZWROb2RlIG9mIG5lc3RlZE5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVEYXRhID0gbmVzdGVkTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAgIG5lc3RlZE5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ubmVzdGVkTm9kZURhdGEsXHJcbiAgICAgICAgeDogbmVzdGVkTm9kZURhdGEueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5lc3RlZE5vZGVEYXRhLnkgKyBwb3J0YWxPZmZzZXQueVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVQb3J0YWxDYW52YXNEYXRhKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5lZGdlcyA9IGRhdGEuZWRnZXMuZmlsdGVyKGVkZ2VEYXRhID0+IHtcclxuICAgICAgaWYgKGVkZ2VEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgY29uc3QgZnJvbU5vZGVEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS5mcm9tTm9kZSlcclxuICAgICAgY29uc3QgdG9Ob2RlRGF0YSA9IGRhdGEubm9kZXMuZmluZChub2RlRGF0YSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICBpZiAoIWZyb21Ob2RlRGF0YSB8fCAhdG9Ob2RlRGF0YSkgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgPT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQpIHsgLy8gTm9ybWFsIGVkZ2VcclxuICAgICAgICByZXR1cm4gdHJ1ZSBcclxuICAgICAgfSBlbHNlIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHsgLy8gQ29tcGxldGVseSBmcm9tIHBvcnRhbFxyXG4gICAgICAgIC8vIFNhdmUgdG8gcG9ydGFsIGZpbGU/IE9SIGRlbGV0ZSFcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSBlbHNlIHsgLy8gUGFydGlhbGx5IGZyb20gcG9ydGFsXHJcbiAgICAgICAgY29uc3QgZnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyBmcm9tTm9kZURhdGEgOiB0b05vZGVEYXRhXHJcbiAgICAgICAgY29uc3Qgbm90RnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyB0b05vZGVEYXRhIDogZnJvbU5vZGVEYXRhXHJcblxyXG4gICAgICAgIG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwgPSBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID8/IHt9XHJcbiAgICAgICAgbm90RnJvbVBvcnRhbE5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFtmcm9tUG9ydGFsTm9kZURhdGEucG9ydGFsSWQhXSA9IG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWxbZnJvbVBvcnRhbE5vZGVEYXRhLnBvcnRhbElkIV0gPz8gW11cclxuICAgICAgICBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsW2Zyb21Qb3J0YWxOb2RlRGF0YS5wb3J0YWxJZCFdLnB1c2goZWRnZURhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRhdGEubm9kZXMgPSBkYXRhLm5vZGVzLmZpbHRlcihub2RlRGF0YSA9PiBub2RlRGF0YS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG5cclxuICAgIGZvciAoY29uc3QgcG9ydGFsTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gUmVzZXQgcG9ydGFsIHNpemVcclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ21haW50YWluQ2xvc2VkUG9ydGFsU2l6ZScpKSB7XHJcbiAgICAgICAgcG9ydGFsTm9kZURhdGEud2lkdGggPSBwb3J0YWxOb2RlRGF0YS5jbG9zZWRQb3J0YWxXaWR0aCA/PyBwb3J0YWxOb2RlRGF0YS53aWR0aFxyXG4gICAgICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA/PyBwb3J0YWxOb2RlRGF0YS5oZWlnaHRcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgdG8gcG9ydGFsIG5vZGVzIGFuZCBlZGdlc1xyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsV2lkdGhcclxuICAgICAgZGVsZXRlIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodFxyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldENhbnZhc0RhdGFXaXRoUG9ydGFscyhjYW52YXM6IENhbnZhcywgZGF0YVJlZjogQ2FudmFzRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgLy8gRGVlcCBjb3B5IGRhdGEgLSBJZiBhbm90aGVyIGZpbGUgZ2V0cyBvcGVuZWQgaW4gdGhlIHNhbWUgdmlldywgdGhlIGRhdGEgd291bGQgZ2V0IG92ZXJ3cml0dGVuXHJcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhUmVmKSkgYXMgQ2FudmFzRGF0YVxyXG5cclxuICAgIC8vIE9wZW4gcG9ydGFsc1xyXG4gICAgY29uc3QgYWRkZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoZGF0YS5ub2Rlcy5tYXAobm9kZURhdGEgPT4gdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgbm9kZURhdGEpKSlcclxuICAgIGZvciAoY29uc3QgbmV3RGF0YSBvZiBhZGRlZERhdGEpIHtcclxuICAgICAgZGF0YS5ub2Rlcy5wdXNoKC4uLm5ld0RhdGEubm9kZXMpXHJcbiAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5uZXdEYXRhLmVkZ2VzKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBjcm9zcy1wb3J0YWwgZWRnZXNcclxuICAgIGZvciAoY29uc3Qgb3JpZ2luTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID09PSB1bmRlZmluZWQpIGNvbnRpbnVlXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtyZWxhdGl2ZVBvcnRhbElkLCBlZGdlc10gb2YgT2JqZWN0LmVudHJpZXMob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsKSkge1xyXG4gICAgICAgIGNvbnN0IGlkUHJlZml4ID0gb3JpZ2luTm9kZURhdGEucG9ydGFsSWQgPyBgJHtvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZH0tYCA6ICcnXHJcblxyXG4gICAgICAgIGNvbnN0IHBvcnRhbElkID0gYCR7aWRQcmVmaXh9JHtyZWxhdGl2ZVBvcnRhbElkfWBcclxuICAgICAgICBjb25zdCB0YXJnZXRQb3J0YWxEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBwb3J0YWxJZClcclxuXHJcbiAgICAgICAgLy8gSWYgdGFyZ2V0IHBvcnRhbCBpcyBkZWxldGVkLCByZW1vdmUgZWRnZXNcclxuICAgICAgICBpZiAoIXRhcmdldFBvcnRhbERhdGEpIHtcclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHBvcnRhbCBpcyBvcGVuLCBhZGQgZWRnZXNcclxuICAgICAgICBpZiAodGFyZ2V0UG9ydGFsRGF0YS5wb3J0YWxUb0ZpbGUpIHtcclxuICAgICAgICAgIC8vIFB1c2ggZWRnZXMgd2l0aCB1cGRhdGVkIGZyb20gYW5kIHRvIGlkc1xyXG4gICAgICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmVkZ2VzLm1hcChlZGdlID0+ICh7XHJcbiAgICAgICAgICAgIC4uLmVkZ2UsXHJcbiAgICAgICAgICAgIHBvcnRhbElkOiBvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZCxcclxuICAgICAgICAgICAgZnJvbU5vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gLFxyXG4gICAgICAgICAgICB0b05vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG4gICAgICAgICAgfSkpKVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFscycpKSB7XHJcbiAgICAgICAgICAvLyBJZiBwb3J0YWwgaXMgY2xvc2VkLCBhZGQgYWx0ZXJuYXRpdmUgZWRnZXMgZGlyZWN0bHkgdG8gcG9ydGFsXHJcbiAgICAgICAgICAvLyBCdXQgZG9uJ3QgZGVsZXRlIHRoZSBlZGdlc1xyXG5cclxuICAgICAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5lZGdlcy5tYXAoZWRnZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdoaWNoIGVuZCBpcyBmcm9tIHBvcnRhbD9cclxuICAgICAgICAgICAgY29uc3QgZnJvbU5vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gXHJcbiAgICAgICAgICAgIGNvbnN0IGZyb21Ob2RlID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBmcm9tTm9kZUlkKVxyXG4gICAgICAgICAgICBjb25zdCB0b05vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAuLi5lZGdlLFxyXG4gICAgICAgICAgICAgIGZyb21Ob2RlOiBmcm9tTm9kZSA/IGZyb21Ob2RlSWQgOiBwb3J0YWxJZCxcclxuICAgICAgICAgICAgICB0b05vZGU6IGZyb21Ob2RlID8gcG9ydGFsSWQgOiB0b05vZGVJZCxcclxuICAgICAgICAgICAgICBwb3J0YWxJZDogcG9ydGFsSWQgLy8gTWFyayBpdCBhcyB0ZW1wb3JhcnlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBubyBtb3JlIGVkZ2VzLCBkZWxldGUgdGhlIHByb3BlcnR5XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhKS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgZGVsZXRlIG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyeU9wZW5Qb3J0YWwoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGVEYXRhOiBDYW52YXNOb2RlRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgY29uc3QgYWRkZWREYXRhOiBDYW52YXNEYXRhID0geyBub2RlczogW10sIGVkZ2VzOiBbXSB9XHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVybiBhZGRlZERhdGFcclxuXHJcbiAgICAvLyBVcGRhdGUgcG9ydGFsIGZpbGVcclxuICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHBvcnRhbE5vZGVEYXRhLmZpbGVcclxuXHJcbiAgICAvLyBGaXggcmVjdXJzaXZlIHBvcnRhbHNcclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPT09IGNhbnZhcy52aWV3LmZpbGUucGF0aCkge1xyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvcnRhbEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBvcnRhbE5vZGVEYXRhLmZpbGUhKVxyXG4gICAgaWYgKCEocG9ydGFsRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB8fCBwb3J0YWxGaWxlLmV4dGVuc2lvbiAhPT0gJ2NhbnZhcycpIHtcclxuICAgICAgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID0gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVybiBhZGRlZERhdGFcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3J0YWxGaWxlRGF0YVN0cmluZyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKHBvcnRhbEZpbGUpXHJcbiAgICBpZiAocG9ydGFsRmlsZURhdGFTdHJpbmcgPT09ICcnKSByZXR1cm4gYWRkZWREYXRhXHJcblxyXG4gICAgY29uc3QgcG9ydGFsRmlsZURhdGEgPSBKU09OLnBhcnNlKHBvcnRhbEZpbGVEYXRhU3RyaW5nKSBhcyBDYW52YXNEYXRhXHJcbiAgICBpZiAoIXBvcnRhbEZpbGVEYXRhKSB7XHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm4gYWRkZWREYXRhXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIHBvcnRhbCBub2RlcyBhbmQgZWRnZXMgaWQgbWFwXHJcbiAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMgPSB7XHJcbiAgICAgIG5vZGVJZE1hcDoge30sXHJcbiAgICAgIGVkZ2VJZE1hcDoge31cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgbmVzdGVkIG5vZGUgb2Zmc2V0XHJcbiAgICBjb25zdCBzb3VyY2VNaW5Db29yZGluYXRlcyA9IENhbnZhc0hlbHBlci5nZXRCQm94KHBvcnRhbEZpbGVEYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgcG9ydGFsT2Zmc2V0ID0ge1xyXG4gICAgICB4OiBwb3J0YWxOb2RlRGF0YS54IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWCArIFBPUlRBTF9QQURESU5HLFxyXG4gICAgICB5OiBwb3J0YWxOb2RlRGF0YS55IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIG5vZGVzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IG5vZGVEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5ub2Rlcykge1xyXG4gICAgICBjb25zdCByZWZOb2RlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtub2RlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMubm9kZUlkTWFwW3JlZk5vZGVJZF0gPSBub2RlRGF0YUZyb21Qb3J0YWwuaWRcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFkZGVkTm9kZSA9IHtcclxuICAgICAgICAuLi5ub2RlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZk5vZGVJZCxcclxuICAgICAgICB4OiBub2RlRGF0YUZyb21Qb3J0YWwueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5vZGVEYXRhRnJvbVBvcnRhbC55ICsgcG9ydGFsT2Zmc2V0LnksXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFkZGVkRGF0YS5ub2Rlcy5wdXNoKGFkZGVkTm9kZSlcclxuXHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVzID0gYXdhaXQgdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgYWRkZWROb2RlKVxyXG4gICAgICBhZGRlZERhdGEubm9kZXMucHVzaCguLi5uZXN0ZWROb2Rlcy5ub2RlcylcclxuICAgICAgYWRkZWREYXRhLmVkZ2VzLnB1c2goLi4ubmVzdGVkTm9kZXMuZWRnZXMpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGVkZ2VzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IGVkZ2VEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5lZGdlcykge1xyXG4gICAgICBjb25zdCByZWZFZGdlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtlZGdlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMuZWRnZUlkTWFwW3JlZkVkZ2VJZF0gPSBlZGdlRGF0YUZyb21Qb3J0YWwuaWRcclxuXHJcbiAgICAgIGNvbnN0IGZyb21SZWZOb2RlID0gT2JqZWN0LmVudHJpZXMocG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzLm5vZGVJZE1hcClcclxuICAgICAgICAuZmluZCgoW19yZWZOb2RlSWQsIG5vZGVJZF0pID0+IG5vZGVJZCA9PT0gZWRnZURhdGFGcm9tUG9ydGFsLmZyb21Ob2RlKT8uWzBdXHJcbiAgICAgIGNvbnN0IHRvUmVmTm9kZSA9IE9iamVjdC5lbnRyaWVzKHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcy5ub2RlSWRNYXApXHJcbiAgICAgICAgLmZpbmQoKFtfcmVmTm9kZUlkLCBub2RlSWRdKSA9PiBub2RlSWQgPT09IGVkZ2VEYXRhRnJvbVBvcnRhbC50b05vZGUpPy5bMF1cclxuXHJcbiAgICAgIGlmICghZnJvbVJlZk5vZGUgfHwgIXRvUmVmTm9kZSkgY29udGludWVcclxuXHJcbiAgICAgIGFkZGVkRGF0YS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAuLi5lZGdlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZkVkZ2VJZCxcclxuICAgICAgICBmcm9tTm9kZTogZnJvbVJlZk5vZGUsXHJcbiAgICAgICAgdG9Ob2RlOiB0b1JlZk5vZGUsXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzaXplIHBvcnRhbFxyXG4gICAgY29uc3QgbmVzdGVkTm9kZXNCQm94ID0gQ2FudmFzSGVscGVyLmdldEJCb3goYWRkZWREYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHRoaXMuZ2V0UG9ydGFsU2l6ZShuZXN0ZWROb2Rlc0JCb3gpXHJcblxyXG4gICAgLy8gU2F2ZSBjbG9zZWQgcG9ydGFsIHNpemVcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbFdpZHRoID0gcG9ydGFsTm9kZURhdGEud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmhlaWdodFxyXG5cclxuICAgIC8vIFNldCBvcGVuIHBvcnRhbCBzaXplXHJcbiAgICBwb3J0YWxOb2RlRGF0YS53aWR0aCA9IHRhcmdldFNpemUud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0XHJcblxyXG4gICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQb3J0YWxTaXplKHNvdXJjZUJCb3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IHNvdXJjZVNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBzb3VyY2VCQm94Lm1heFggLSBzb3VyY2VCQm94Lm1pblgsXHJcbiAgICAgIGhlaWdodDogc291cmNlQkJveC5tYXhZIC0gc291cmNlQkJveC5taW5ZXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHtcclxuICAgICAgd2lkdGg6IE1hdGgubWF4KHNvdXJjZVNpemUud2lkdGggKyBQT1JUQUxfUEFERElORyAqIDIsIE1JTl9PUEVOX1BPUlRBTF9TSVpFLndpZHRoKSxcclxuICAgICAgaGVpZ2h0OiBNYXRoLm1heChzb3VyY2VTaXplLmhlaWdodCArIFBPUlRBTF9QQURESU5HICogMiwgTUlOX09QRU5fUE9SVEFMX1NJWkUuaGVpZ2h0KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUud2lkdGgpKSB0YXJnZXRTaXplLndpZHRoID0gTUlOX09QRU5fUE9SVEFMX1NJWkUud2lkdGhcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUuaGVpZ2h0KSkgdGFyZ2V0U2l6ZS5oZWlnaHQgPSBNSU5fT1BFTl9QT1JUQUxfU0laRS5oZWlnaHRcclxuXHJcbiAgICByZXR1cm4gdGFyZ2V0U2l6ZVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBGaWxlU2VsZWN0TW9kYWwgfSBmcm9tIFwic3JjL3V0aWxzL21vZGFsLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJldHRlckRlZmF1bHRTZXR0aW5nc0NhbnZhc0V4dGVuc2lvbiAgZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5tb2RpZnlDYW52YXNTZXR0aW5ncyh0aGlzLnBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKCkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy5tb2RpZnlDYW52YXNTZXR0aW5ncyh0aGlzLnBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKCkpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm1vZGlmeUNhbnZhc1NldHRpbmdzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Eb3VibGVDbGljayxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBldmVudDogTW91c2VFdmVudCwgcHJldmVudERlZmF1bHQ6IHsgdmFsdWU6IGJvb2xlYW4gfSkgPT4gdGhpcy5vbkRvdWJsZUNsaWNrKGNhbnZhcywgZXZlbnQsIHByZXZlbnREZWZhdWx0KVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMuYXBwbHlEZWZhdWx0Tm9kZVN0eWxlcyhjYW52YXMsIG5vZGUpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkgPT4gdGhpcy5hcHBseURlZmF1bHRFZGdlU3R5bGVzKGNhbnZhcywgZWRnZSlcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1vZGlmeUNhbnZhc1NldHRpbmdzKGNhbnZhczogQ2FudmFzIHwgbnVsbCkge1xyXG4gICAgaWYgKCFjYW52YXMpIHJldHVyblxyXG5cclxuICAgIGNhbnZhcy5jb25maWcuZGVmYXVsdFRleHROb2RlRGltZW5zaW9ucyA9IHtcclxuICAgICAgd2lkdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZVdpZHRoJyksXHJcbiAgICAgIGhlaWdodDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdFRleHROb2RlSGVpZ2h0JylcclxuICAgIH1cclxuXHJcbiAgICBjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnMgPSB7XHJcbiAgICAgIHdpZHRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RmlsZU5vZGVXaWR0aCcpLFxyXG4gICAgICBoZWlnaHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRGaWxlTm9kZUhlaWdodCcpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIG9uRG91YmxlQ2xpY2soY2FudmFzOiBDYW52YXMsIGV2ZW50OiBNb3VzZUV2ZW50LCBwcmV2ZW50RGVmYXVsdDogeyB2YWx1ZTogYm9vbGVhbiB9KSB7XHJcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fCBldmVudC50YXJnZXQgIT09IGNhbnZhcy53cmFwcGVyRWwgfHwgY2FudmFzLmlzRHJhZ2dpbmcgfHwgY2FudmFzLnJlYWRvbmx5KSByZXR1cm5cclxuICAgIHByZXZlbnREZWZhdWx0LnZhbHVlID0gdHJ1ZVxyXG5cclxuICAgIGxldCBwb3MgPSBjYW52YXMucG9zRnJvbUV2dChldmVudClcclxuXHJcbiAgICBzd2l0Y2ggKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ25vZGVUeXBlT25Eb3VibGVDbGljaycpKSB7XHJcbiAgICAgIGNhc2UgJ2ZpbGUnOlxyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBuZXcgRmlsZVNlbGVjdE1vZGFsKHRoaXMucGx1Z2luLmFwcCwgdW5kZWZpbmVkLCB0cnVlKS5hd2FpdElucHV0KClcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2FsaWduRG91YmxlQ2xpY2tlZE5vZGVUb0dyaWQnKSkgcG9zID0ge1xyXG4gICAgICAgICAgeDogTWF0aC5yb3VuZCgocG9zLnggLSAoY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zLndpZHRoIC8gMikpIC8gQ2FudmFzSGVscGVyLkdSSURfU0laRSkgKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFICsgKGNhbnZhcy5jb25maWcuZGVmYXVsdEZpbGVOb2RlRGltZW5zaW9ucy53aWR0aCAvIDIpLFxyXG4gICAgICAgICAgeTogTWF0aC5yb3VuZCgocG9zLnkgLSAoY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zLmhlaWdodCAvIDIpKSAvIENhbnZhc0hlbHBlci5HUklEX1NJWkUpICogQ2FudmFzSGVscGVyLkdSSURfU0laRSArIChjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnMuaGVpZ2h0IC8gMilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNhbnZhcy5jcmVhdGVGaWxlTm9kZSh7XHJcbiAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJyxcclxuICAgICAgICAgIGZpbGU6IGZpbGVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdhbGlnbkRvdWJsZUNsaWNrZWROb2RlVG9HcmlkJykpIHBvcyA9IHtcclxuICAgICAgICAgIHg6IE1hdGgucm91bmQoKHBvcy54IC0gKGNhbnZhcy5jb25maWcuZGVmYXVsdFRleHROb2RlRGltZW5zaW9ucy53aWR0aCAvIDIpKSAvIENhbnZhc0hlbHBlci5HUklEX1NJWkUpICogQ2FudmFzSGVscGVyLkdSSURfU0laRSArIChjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnMud2lkdGggLyAyKSxcclxuICAgICAgICAgIHk6IE1hdGgucm91bmQoKHBvcy55IC0gKGNhbnZhcy5jb25maWcuZGVmYXVsdFRleHROb2RlRGltZW5zaW9ucy5oZWlnaHQgLyAyKSkgLyBDYW52YXNIZWxwZXIuR1JJRF9TSVpFKSAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUgKyAoY2FudmFzLmNvbmZpZy5kZWZhdWx0VGV4dE5vZGVEaW1lbnNpb25zLmhlaWdodCAvIDIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYW52YXMuY3JlYXRlVGV4dE5vZGUoe1xyXG4gICAgICAgICAgcG9zOiBwb3MsXHJcbiAgICAgICAgICBwb3NpdGlvbjogJ2NlbnRlcidcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBseURlZmF1bHROb2RlU3R5bGVzKF9jYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICd0ZXh0JykgcmV0dXJuXHJcblxyXG4gICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgIC4uLm5vZGVEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXMnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBseURlZmF1bHRFZGdlU3R5bGVzKF9jYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG5cclxuICAgIGVkZ2Uuc2V0RGF0YSh7XHJcbiAgICAgIC4uLmVkZ2VEYXRhLFxyXG4gICAgICBzdHlsZUF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAuLi5lZGdlRGF0YS5zdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgICAgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXMnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBXb3Jrc3BhY2VXaW5kb3cgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgREVGQVVMVF9DT0xPUlNfQ09VTlQgPSA2XHJcbmNvbnN0IENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRCA9ICdtb2QtY3VzdG9tLWNvbG9ycydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yUGFsZXR0ZUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXJ8bnVsbCA9IG51bGxcclxuICBcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuICBcclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICAnd2luZG93LW9wZW4nLFxyXG4gICAgICAoX3dpbjogV29ya3NwYWNlV2luZG93LCBfd2luZG93OiBXaW5kb3cpID0+IHRoaXMudXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICdjc3MtY2hhbmdlJyxcclxuICAgICAgKCkgPT4gdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMudXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnBhdGNoQ29sb3JTZWxlY3Rpb24oY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUN1c3RvbUNvbG9yTW9kU3R5bGVDbGFzc2VzKCkge1xyXG4gICAgY29uc3QgY3VzdG9tQ3NzID0gdGhpcy5nZXRDdXN0b21Db2xvcnMoKS5tYXAoKGNvbG9ySWQpID0+IGBcclxuICAgICAgLm1vZC1jYW52YXMtY29sb3ItJHtjb2xvcklkfSB7XHJcbiAgICAgICAgLS1jYW52YXMtY29sb3I6IHZhcigtLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9KTtcclxuICAgICAgfVxyXG4gICAgYCkuam9pbignJylcclxuXHJcbiAgICBmb3IgKGNvbnN0IHdpbiBvZiB0aGlzLnBsdWdpbi53aW5kb3dzTWFuYWdlci53aW5kb3dzKSB7XHJcbiAgICAgIGNvbnN0IGRvYyA9IHdpbi5kb2N1bWVudFxyXG4gICAgICBcclxuICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRCk/LnJlbW92ZSgpXHJcblxyXG4gICAgICBjb25zdCBjdXN0b21Db2xvck1vZFN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcclxuICAgICAgY3VzdG9tQ29sb3JNb2RTdHlsZS5pZCA9IENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRFxyXG4gICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChjdXN0b21Db2xvck1vZFN0eWxlKVxyXG5cclxuICAgICAgY3VzdG9tQ29sb3JNb2RTdHlsZS50ZXh0Q29udGVudCA9IGN1c3RvbUNzc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwYXRjaENvbG9yU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBpZiAodGhpcy5vYnNlcnZlcikgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KClcclxuXHJcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcclxuICAgICAgY29uc3QgY29sb3JNZW51T3BlbmVkID0gbXV0YXRpb25zLnNvbWUobXV0YXRpb24gPT4gXHJcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhtdXRhdGlvbi5hZGRlZE5vZGVzKS5zb21lKChub2RlOiBOb2RlKSA9PiBcclxuICAgICAgICAgIG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnY2FudmFzLXN1Ym1lbnUnKSAmJiBPYmplY3QudmFsdWVzKG5vZGUuY2hpbGROb2Rlcykuc29tZSgobm9kZTogTm9kZSkgPT5cclxuICAgICAgICAgICAgbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW52YXMtY29sb3ItcGlja2VyLWl0ZW0nKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICBpZiAoIWNvbG9yTWVudU9wZW5lZCkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBzdWJtZW51ID0gY2FudmFzLm1lbnUubWVudUVsLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtc3VibWVudScpXHJcbiAgICAgIGlmICghc3VibWVudSkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50Tm9kZUNvbG9yID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5tYXAobm9kZSA9PiBub2RlLmNvbG9yKS5sYXN0KClcclxuICAgICAgZm9yIChjb25zdCBjb2xvcklkIG9mIHRoaXMuZ2V0Q3VzdG9tQ29sb3JzKCkpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21Db2xvck1lbnVJdGVtID0gdGhpcy5jcmVhdGVDb2xvck1lbnVJdGVtKGNhbnZhcywgY29sb3JJZClcclxuICAgICAgICBpZiAoY3VycmVudE5vZGVDb2xvciA9PT0gY29sb3JJZCkgY3VzdG9tQ29sb3JNZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHN1Ym1lbnUuaW5zZXJ0QmVmb3JlKGN1c3RvbUNvbG9yTWVudUl0ZW0sIHN1Ym1lbnUubGFzdENoaWxkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShjYW52YXMubWVudS5tZW51RWwsIHsgY2hpbGRMaXN0OiB0cnVlIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUNvbG9yTWVudUl0ZW0oY2FudmFzOiBDYW52YXMsIGNvbG9ySWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgbWVudUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZCgnY2FudmFzLWNvbG9yLXBpY2tlci1pdGVtJylcclxuICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoYG1vZC1jYW52YXMtY29sb3ItJHtjb2xvcklkfWApXHJcblxyXG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2FudmFzLnNlbGVjdGlvbikge1xyXG4gICAgICAgIGl0ZW0uc2V0Q29sb3IoY29sb3JJZClcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FudmFzLnJlcXVlc3RTYXZlKClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIG1lbnVJdGVtXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEN1c3RvbUNvbG9ycygpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBjb2xvcnM6IHN0cmluZ1tdID0gW11cclxuXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBjb25zdCBjb2xvcklkID0gKERFRkFVTFRfQ09MT1JTX0NPVU5UICsgY29sb3JzLmxlbmd0aCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgaWYgKCFnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoYC0tY2FudmFzLWNvbG9yLSR7Y29sb3JJZH1gKSkgYnJlYWtcclxuXHJcbiAgICAgIGNvbG9ycy5wdXNoKGNvbG9ySWQpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbG9yc1xyXG4gIH1cclxufSIsICJpbXBvcnQgeyBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNEYXRhLCBDYW52YXNOb2RlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuXHJcbmNvbnN0IENPTExBUFNFX0JVVFRPTl9JRCA9ICdncm91cC1jb2xsYXBzZS1idXR0b24nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsYXBzaWJsZUdyb3Vwc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy5vbk5vZGVDaGFuZ2VkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQkJveFJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCBiYm94OiBCQm94KSA9PiB0aGlzLm9uTm9kZUJCb3hSZXF1ZXN0ZWQoY2FudmFzLCBub2RlLCBiYm94KVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRhdGFSZXF1ZXN0ZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIGRhdGE6IENhbnZhc0RhdGEpID0+IHRoaXMuZXhwYW5kQ29sbGFwc2VkTm9kZXMoZGF0YSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Mb2FkRGF0YSxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSwgX3NldERhdGE6IChkYXRhOiBDYW52YXNEYXRhKSA9PiB2b2lkKSA9PiB0aGlzLmNvbGxhcHNlTm9kZXMoZGF0YSlcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uTm9kZUNoYW5nZWQoY2FudmFzOiBDYW52YXMsIGdyb3VwTm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3QgZ3JvdXBOb2RlRGF0YSA9IGdyb3VwTm9kZS5nZXREYXRhKClcclxuICAgIGlmIChncm91cE5vZGVEYXRhLnR5cGUgIT09ICdncm91cCcpIHJldHVyblxyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgY29sbGFwc2UvZXhwYW5kIGJ1dHRvblxyXG4gICAgZ3JvdXBOb2RlLm5vZGVFbD8ucXVlcnlTZWxlY3RvckFsbChgIyR7Q09MTEFQU0VfQlVUVE9OX0lEfWApLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSlcclxuXHJcbiAgICAvLyBBZGQgY29sbGFwc2UvZXhwYW5kIGJ1dHRvbiBuZXh0IHRvIHRoZSBsYWJlbFxyXG4gICAgY29uc3QgY29sbGFwc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuICAgIGNvbGxhcHNlQnV0dG9uLmlkID0gQ09MTEFQU0VfQlVUVE9OX0lEXHJcbiAgICBzZXRJY29uKGNvbGxhcHNlQnV0dG9uLCBncm91cE5vZGVEYXRhLmlzQ29sbGFwc2VkID8gJ3BsdXMtY2lyY2xlJyA6ICdtaW51cy1jaXJjbGUnKVxyXG5cclxuICAgIGNvbGxhcHNlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7IHRoaXMuc2V0Q29sbGFwc2VkKGNhbnZhcywgZ3JvdXBOb2RlLCBncm91cE5vZGUuZ2V0RGF0YSgpLmlzQ29sbGFwc2VkID8gdW5kZWZpbmVkIDogdHJ1ZSkgfVxyXG5cclxuICAgIGdyb3VwTm9kZS5sYWJlbEVsPy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgY29sbGFwc2VCdXR0b24pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldENvbGxhcHNlZChjYW52YXM6IENhbnZhcywgZ3JvdXBOb2RlOiBDYW52YXNOb2RlLCBjb2xsYXBzZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcclxuICAgIGdyb3VwTm9kZS5zZXREYXRhKHsgLi4uZ3JvdXBOb2RlLmdldERhdGEoKSwgaXNDb2xsYXBzZWQ6IGNvbGxhcHNlZCB9KVxyXG4gICAgY2FudmFzLnNldERhdGEoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcblxyXG4gIG9uTm9kZUJCb3hSZXF1ZXN0ZWQoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCBiYm94OiBCQm94KSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2dyb3VwJyB8fCAhbm9kZURhdGEuaXNDb2xsYXBzZWQpIHJldHVyblxyXG5cclxuICAgIC8vIFNldCB3aWR0aCB0byBsYWJlbCB3aWR0aFxyXG4gICAgYmJveC5tYXhYID0gYmJveC5taW5YICsgKG5vZGUubm9kZUVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA/PyAwKVxyXG4gICAgXHJcbiAgICAvLyBTZXQgaGVpZ2h0IG9mIHRvIDAgKERvbid0IGRyYWcgYW55IG5vZGVzIHdpdGggaXQpXHJcbiAgICBiYm94Lm1heFkgPSBiYm94Lm1pbllcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhwYW5kQ29sbGFwc2VkTm9kZXMoZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmxhdE1hcCgoZ3JvdXBOb2RlRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjb2xsYXBzZWREYXRhID0gZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhXHJcbiAgICAgIGlmIChjb2xsYXBzZWREYXRhID09PSB1bmRlZmluZWQpIHJldHVybiBbZ3JvdXBOb2RlRGF0YV1cclxuXHJcbiAgICAgIGdyb3VwTm9kZURhdGEuY29sbGFwc2VkRGF0YSA9IHVuZGVmaW5lZFxyXG5cclxuICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmNvbGxhcHNlZERhdGEuZWRnZXMpXHJcbiAgICAgIHJldHVybiBbZ3JvdXBOb2RlRGF0YSwgLi4uY29sbGFwc2VkRGF0YS5ub2Rlcy5tYXAoKG5vZGVEYXRhKSA9PiAoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgICAvLyBSZXN0b3JlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgbm9kZSB0byB0aGUgZ3JvdXBcclxuICAgICAgICAgIHg6IG5vZGVEYXRhLnggKyBncm91cE5vZGVEYXRhLngsXHJcbiAgICAgICAgICB5OiBub2RlRGF0YS55ICsgZ3JvdXBOb2RlRGF0YS55XHJcbiAgICAgICAgfVxyXG4gICAgICApKV1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbGxhcHNlTm9kZXMoZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5ub2Rlcy5mb3JFYWNoKChncm91cE5vZGVEYXRhKSA9PiB7XHJcbiAgICAgIGlmICghZ3JvdXBOb2RlRGF0YS5pc0NvbGxhcHNlZCkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBncm91cE5vZGVCQm94ID0gQ2FudmFzSGVscGVyLmdldEJCb3goW2dyb3VwTm9kZURhdGFdKVxyXG4gICAgICBjb25zdCBjb250YWluZWROb2Rlc0RhdGEgPSBkYXRhLm5vZGVzLmZpbHRlcigobm9kZURhdGEpID0+XHJcbiAgICAgICAgbm9kZURhdGEuaWQgIT09IGdyb3VwTm9kZURhdGEuaWQgJiYgQkJveEhlbHBlci5pbnNpZGVCQm94KENhbnZhc0hlbHBlci5nZXRCQm94KFtub2RlRGF0YV0pLCBncm91cE5vZGVCQm94LCBmYWxzZSlcclxuICAgICAgKVxyXG4gICAgICBjb25zdCBjb250YWluZWRFZGdlc0RhdGEgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEuZnJvbU5vZGUpIHx8IFxyXG4gICAgICAgICAgY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmlsdGVyKChub2RlRGF0YSkgPT4gIWNvbnRhaW5lZE5vZGVzRGF0YS5pbmNsdWRlcyhub2RlRGF0YSkpXHJcbiAgICAgIGRhdGEuZWRnZXMgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+ICFjb250YWluZWRFZGdlc0RhdGEuaW5jbHVkZXMoZWRnZURhdGEpKVxyXG5cclxuICAgICAgZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhID0ge1xyXG4gICAgICAgIG5vZGVzOiBjb250YWluZWROb2Rlc0RhdGEubWFwKChub2RlRGF0YSkgPT4gKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBub2RlIHRvIHRoZSBncm91cFxyXG4gICAgICAgICAgICB4OiBub2RlRGF0YS54IC0gZ3JvdXBOb2RlRGF0YS54LFxyXG4gICAgICAgICAgICB5OiBub2RlRGF0YS55IC0gZ3JvdXBOb2RlRGF0YS55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSksXHJcbiAgICAgICAgZWRnZXM6IGNvbnRhaW5lZEVkZ2VzRGF0YVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgQXBwLCB7IE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvcGVydGllc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vbkNhbnZhc0NoYW5nZWQoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25DYW52YXNDaGFuZ2VkKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICB0aGlzLnVwZGF0ZUNzc0NsYXNzZXMoY2FudmFzKVxyXG5cclxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY2FudmFzLnF1aWNrU2V0dGluZ3NCdXR0b24/LnBhcmVudEVsZW1lbnRcclxuICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHJldHVyblxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZVF1aWNrU2V0dGluZ3NCdXR0b24oe1xyXG4gICAgICAgIGlkOiAncHJvcGVydGllcycsXHJcbiAgICAgICAgbGFiZWw6ICdQcm9wZXJ0aWVzJyxcclxuICAgICAgICBpY29uOiAnc2V0dGluZ3MtMicsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlblByb3BlcnRpZXNEaWFsb2coY2FudmFzKVxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcmV2aW91c0Nzc2NsYXNzZXM6IHN0cmluZ1tdID0gW11cclxuICBwcml2YXRlIHVwZGF0ZUNzc0NsYXNzZXMoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIHRoaXMucHJldmlvdXNDc3NjbGFzc2VzLmZvckVhY2goKGNzc2NsYXNzKSA9PiB7XHJcbiAgICAgIGNhbnZhcy53cmFwcGVyRWwuY2xhc3NMaXN0LnJlbW92ZShjc3NjbGFzcylcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMgPSBjYW52YXMubWV0YWRhdGE/LnByb3BlcnRpZXM/LmNzc2NsYXNzZXMgfHwgW11cclxuICAgIHRoaXMucHJldmlvdXNDc3NjbGFzc2VzLmZvckVhY2goKGNzc2NsYXNzKSA9PiB7XHJcbiAgICAgIGNhbnZhcy53cmFwcGVyRWwuY2xhc3NMaXN0LmFkZChjc3NjbGFzcylcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIG9wZW5Qcm9wZXJ0aWVzRGlhbG9nKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBhd2FpdCBuZXcgUHJvcGVydGllc01vZGFsKHRoaXMucGx1Z2luLmFwcCwgY2FudmFzKS5hd2FpdERpYWxvZygpXHJcbiAgICB0aGlzLnVwZGF0ZUNzc0NsYXNzZXMoY2FudmFzKVxyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgUHJvcGVydGllc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNhbnZhczogQ2FudmFzXHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjYW52YXM6IENhbnZhcykge1xyXG4gICAgc3VwZXIoYXBwKVxyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNcclxuICB9XHJcblxyXG4gIG9uT3BlbigpIHtcclxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxyXG4gICAgLnNldEhlYWRpbmcoKVxyXG4gICAgLnNldE5hbWUoXCJQcm9wZXJ0aWVzXCIpXHJcblxyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcbiAgICAgIC5zZXRDbGFzcyhcInByb3BlcnRpZXMtZmllbGRcIilcclxuICAgICAgLnNldE5hbWUoXCJjc3NjbGFzc2VzXCIpXHJcbiAgICAgIC5zZXRUb29sdGlwKFwiQWRkIGNsYXNzZXMgdG8gdGhlIGNhbnZhcyB3cmFwcGVyIGVsZW1lbnQuIFNlcGFyYXRlIG11bHRpcGxlIGNsYXNzZXMgd2l0aCBzcGFjZXMuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmNhbnZhcy5tZXRhZGF0YS5wcm9wZXJ0aWVzPy5jc3NjbGFzc2VzPy5qb2luKCcgJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXMgPSB0aGlzLmNhbnZhcy5tZXRhZGF0YT8ucHJvcGVydGllcyA/PyB7fVxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tZXRhZGF0YS5wcm9wZXJ0aWVzLmNzc2NsYXNzZXMgPSB2YWx1ZS5zcGxpdCgnICcpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgfVxyXG5cclxuICBvbkNsb3NlKCkge31cclxuXHJcbiAgYXdhaXREaWFsb2coKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgdGhpcy5vbkNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KClcclxuICAgICAgICByZXNvbHZlKClcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vcGVuKClcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcIi4vc3R5bGUtY29uZmlnXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVTdHlsZXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGFsbE5vZGVTdHlsZXM6IFN0eWxlQXR0cmlidXRlW11cclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ25vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuYWxsTm9kZVN0eWxlcyA9IFsuLi5CVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy5hbGxOb2RlU3R5bGVzID0gWy4uLkJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzJyldXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbk5vZGVEYXRhID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1xyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSB8fCBzZWxlY3Rpb25Ob2RlRGF0YS5sZW5ndGggPT09IDAgfHwgc2VsZWN0aW9uTm9kZURhdGEubGVuZ3RoICE9PSBjYW52YXMuc2VsZWN0aW9uLnNpemUpXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZVR5cGVzID0gbmV3IFNldChzZWxlY3Rpb25Ob2RlRGF0YS5tYXAobm9kZSA9PiBub2RlLnR5cGUpKVxyXG4gICAgY29uc3QgYXZhaWxhYmxlTm9kZVN0eWxlcyA9IHRoaXMuYWxsTm9kZVN0eWxlcy5maWx0ZXIoc3R5bGUgPT4gIXN0eWxlLm5vZGVUeXBlcyB8fCBzdHlsZS5ub2RlVHlwZXMuc29tZSh0eXBlID0+IHNlbGVjdGVkTm9kZVR5cGVzLmhhcyh0eXBlKSkpXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmNyZWF0ZVN0eWxlRHJvcGRvd25NZW51KFxyXG4gICAgICBjYW52YXMsIGF2YWlsYWJsZU5vZGVTdHlsZXMsXHJcbiAgICAgIHNlbGVjdGlvbk5vZGVEYXRhWzBdLnN0eWxlQXR0cmlidXRlcyA/PyB7fSxcclxuICAgICAgKGF0dHJpYnV0ZSwgdmFsdWUpID0+IHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzLCBhdHRyaWJ1dGUsIHZhbHVlKVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZUZvclNlbGVjdGlvbihjYW52YXM6IENhbnZhcywgYXR0cmlidXRlOiBTdHlsZUF0dHJpYnV0ZSwgdmFsdWU6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbk5vZGVEYXRhID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1xyXG4gICAgZm9yIChjb25zdCBub2RlRGF0YSBvZiBzZWxlY3Rpb25Ob2RlRGF0YSkge1xyXG4gICAgICBjb25zdCBub2RlID0gY2FudmFzLm5vZGVzLmdldChub2RlRGF0YS5pZClcclxuICAgICAgaWYgKCFub2RlKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gT25seSBhcHBseSB0aGUgYXR0cmlidXRlIGlmIHRoZSBub2RlIHR5cGUgaXMgYWxsb3dlZFxyXG4gICAgICBpZiAoYXR0cmlidXRlLm5vZGVUeXBlcyAmJiAhYXR0cmlidXRlLm5vZGVUeXBlcy5pbmNsdWRlcyhub2RlRGF0YS50eXBlKSkgY29udGludWVcclxuXHJcbiAgICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAuLi5ub2RlRGF0YS5zdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICBbYXR0cmlidXRlLmRhdGFzZXRLZXldOiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2FudmFzLnB1c2hIaXN0b3J5KGNhbnZhcy5nZXREYXRhKCkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEVkZ2VQYXRoZmluZGluZ01ldGhvZCB7XHJcbiAgYWJzdHJhY3QgZ2V0UGF0aChwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBjYW52YXM6IENhbnZhcywgZnJvbVBvczogUG9zaXRpb24sIGZyb21CQm94U2lkZVBvczogUG9zaXRpb24sIGZyb21TaWRlOiBTaWRlLCB0b1BvczogUG9zaXRpb24sIHRvQkJveFNpZGVQb3M6IFBvc2l0aW9uLCB0b1NpZGU6IFNpZGUsIGlzRHJhZ2dpbmc6IGJvb2xlYW4pOiBFZGdlUGF0aCB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFZGdlUGF0aCB7XHJcbiAgc3ZnUGF0aDogc3RyaW5nXHJcbiAgY2VudGVyOiBQb3NpdGlvblxyXG4gIHJvdGF0ZUFycm93czogYm9vbGVhblxyXG59IiwgImltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN2Z1BhdGhIZWxwZXIge1xyXG4gIHN0YXRpYyBwYXRoQXJyYXlUb1N2Z1BhdGgocG9zaXRpb25zOiBQb3NpdGlvbltdLCByb3VuZGVkID0gZmFsc2UpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdGVuc2lvbiA9IDAuMlxyXG4gICAgbGV0IG5ld1Bvc2l0aW9ucyA9IFsuLi5wb3NpdGlvbnNdXHJcblxyXG4gICAgaWYgKHJvdW5kZWQgJiYgcG9zaXRpb25zLmxlbmd0aCA+IDIpIHtcclxuICAgICAgbmV3UG9zaXRpb25zID0gW3Bvc2l0aW9uc1swXV1cclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9zaXRpb25zLmxlbmd0aCAtIDI7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHAxID0gcG9zaXRpb25zW2ldXHJcbiAgICAgICAgY29uc3QgcDIgPSBwb3NpdGlvbnNbaSArIDFdXHJcbiAgICAgICAgY29uc3QgcDMgPSBwb3NpdGlvbnNbaSArIDJdXHJcblxyXG4gICAgICAgIGNvbnN0IHQxID0gKDEgLSB0ZW5zaW9uKSAvIDJcclxuICAgICAgICBjb25zdCB0MiA9IDEgLSB0MVxyXG5cclxuICAgICAgICBjb25zdCB4ID1cclxuICAgICAgICAgIHQyICogdDIgKiB0MiAqIHAxLnggK1xyXG4gICAgICAgICAgMyAqIHQyICogdDIgKiB0MSAqIHAyLnggK1xyXG4gICAgICAgICAgMyAqIHQyICogdDEgKiB0MSAqIHAzLnggK1xyXG4gICAgICAgICAgdDEgKiB0MSAqIHQxICogcDIueFxyXG5cclxuICAgICAgICBjb25zdCB5ID1cclxuICAgICAgICAgIHQyICogdDIgKiB0MiAqIHAxLnkgK1xyXG4gICAgICAgICAgMyAqIHQyICogdDIgKiB0MSAqIHAyLnkgK1xyXG4gICAgICAgICAgMyAqIHQyICogdDEgKiB0MSAqIHAzLnkgK1xyXG4gICAgICAgICAgdDEgKiB0MSAqIHQxICogcDIueVxyXG5cclxuICAgICAgICBuZXdQb3NpdGlvbnMucHVzaCh7IHg6IHgsIHk6IHkgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbGFzdFBvaW50ID0gcG9zaXRpb25zW3Bvc2l0aW9ucy5sZW5ndGggLSAxXVxyXG4gICAgICBuZXdQb3NpdGlvbnMucHVzaChsYXN0UG9pbnQpXHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdQb3NpdGlvbnMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHAxID0gbmV3UG9zaXRpb25zW2ldXHJcbiAgICAgIGNvbnN0IHAyID0gbmV3UG9zaXRpb25zW2kgKyAxXVxyXG4gICAgICBjb25zdCBwMyA9IG5ld1Bvc2l0aW9uc1tpICsgMl1cclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnREaXJlY3Rpb24gPSB7XHJcbiAgICAgICAgeDogcDIueCAtIHAxLngsXHJcbiAgICAgICAgeTogcDIueSAtIHAxLnlcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmV4dERpcmVjdGlvbiA9IHtcclxuICAgICAgICB4OiBwMy54IC0gcDIueCxcclxuICAgICAgICB5OiBwMy55IC0gcDIueVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY3VycmVudERpcmVjdGlvbi54ICE9PSBuZXh0RGlyZWN0aW9uLnggJiYgY3VycmVudERpcmVjdGlvbi55ICE9PSBuZXh0RGlyZWN0aW9uLnkpIGNvbnRpbnVlXHJcblxyXG4gICAgICBuZXdQb3NpdGlvbnMuc3BsaWNlKGkgKyAxLCAxKVxyXG4gICAgICBpLS1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3UG9zaXRpb25zLm1hcCgocG9zaXRpb24sIGluZGV4KSA9PiBcclxuICAgICAgYCR7aW5kZXggPT09IDAgPyAnTScgOiAnTCd9ICR7cG9zaXRpb24ueH0gJHtwb3NpdGlvbi55fWBcclxuICAgICkuam9pbignICcpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nTWV0aG9kLCB7IEVkZ2VQYXRoIH0gZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RcIlxyXG5pbXBvcnQgU3ZnUGF0aEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL3N2Zy1wYXRoLWhlbHBlclwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRnZVBhdGhmaW5kaW5nRGlyZWN0IGV4dGVuZHMgRWRnZVBhdGhmaW5kaW5nTWV0aG9kIHtcclxuICBnZXRQYXRoKF9wbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBfY2FudmFzOiBDYW52YXMsIGZyb21Qb3M6IFBvc2l0aW9uLCBfZnJvbUJCb3hTaWRlUG9zOiBQb3NpdGlvbiwgX2Zyb21TaWRlOiBTaWRlLCB0b1BvczogUG9zaXRpb24sIF90b0JCb3hTaWRlUG9zOiBQb3NpdGlvbiwgX3RvU2lkZTogU2lkZSwgX2lzRHJhZ2dpbmc6IGJvb2xlYW4pOiBFZGdlUGF0aCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdmdQYXRoOiBTdmdQYXRoSGVscGVyLnBhdGhBcnJheVRvU3ZnUGF0aChbZnJvbVBvcywgdG9Qb3NdLCBmYWxzZSksXHJcbiAgICAgIGNlbnRlcjoge1xyXG4gICAgICAgIHg6IChmcm9tUG9zLnggKyB0b1Bvcy54KSAvIDIsXHJcbiAgICAgICAgeTogKGZyb21Qb3MueSArIHRvUG9zLnkpIC8gMlxyXG4gICAgICB9LFxyXG4gICAgICByb3RhdGVBcnJvd3M6IHRydWVcclxuICAgIH1cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdNZXRob2QsIHsgRWRnZVBhdGggfSBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZFwiXHJcbmltcG9ydCBTdmdQYXRoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvc3ZnLXBhdGgtaGVscGVyXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGdlUGF0aGZpbmRpbmdTcXVhcmUgZXh0ZW5kcyBFZGdlUGF0aGZpbmRpbmdNZXRob2Qge1xyXG4gIGdldFBhdGgoX3BsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4sIF9jYW52YXM6IENhbnZhcywgZnJvbVBvczogUG9zaXRpb24sIGZyb21CQm94U2lkZVBvczogUG9zaXRpb24sIGZyb21TaWRlOiBTaWRlLCB0b1BvczogUG9zaXRpb24sIHRvQkJveFNpZGVQb3M6IFBvc2l0aW9uLCB0b1NpZGU6IFNpZGUsIF9pc0RyYWdnaW5nOiBib29sZWFuKTogRWRnZVBhdGgge1xyXG4gICAgbGV0IHBhdGhBcnJheTogUG9zaXRpb25bXSA9IFtdXHJcbiAgICBsZXQgY2VudGVyOiBQb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9XHJcblxyXG4gICAgaWYgKGZyb21TaWRlID09PSB0b1NpZGUpIHtcclxuICAgICAgLy8gU2FtZSBzaWRlIC0+IE1ha2UgYSBVXHJcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IEJCb3hIZWxwZXIuZGlyZWN0aW9uKGZyb21TaWRlKVxyXG5cclxuICAgICAgaWYgKEJCb3hIZWxwZXIuaXNIb3Jpem9udGFsKGZyb21TaWRlKSkge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IE1hdGgubWF4KGZyb21CQm94U2lkZVBvcy54LCB0b0JCb3hTaWRlUG9zLngpICsgZGlyZWN0aW9uICogQ2FudmFzSGVscGVyLkdSSURfU0laRSwgeTogZnJvbUJCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHsgeDogTWF0aC5tYXgoZnJvbUJCb3hTaWRlUG9zLngsIHRvQkJveFNpZGVQb3MueCkgKyBkaXJlY3Rpb24gKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFLCB5OiB0b0JCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IGZyb21CQm94U2lkZVBvcy54LCB5OiBNYXRoLm1heChmcm9tQkJveFNpZGVQb3MueSwgdG9CQm94U2lkZVBvcy55KSArIGRpcmVjdGlvbiAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUgfSxcclxuICAgICAgICAgIHsgeDogdG9CQm94U2lkZVBvcy54LCB5OiBNYXRoLm1heChmcm9tQkJveFNpZGVQb3MueSwgdG9CQm94U2lkZVBvcy55KSArIGRpcmVjdGlvbiAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjZW50ZXIgPSB7IFxyXG4gICAgICAgIHg6IChwYXRoQXJyYXlbMV0ueCArIHBhdGhBcnJheVsyXS54KSAvIDIsXHJcbiAgICAgICAgeTogKHBhdGhBcnJheVsxXS55ICsgcGF0aEFycmF5WzJdLnkpIC8gMlxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKEJCb3hIZWxwZXIuaXNIb3Jpem9udGFsKGZyb21TaWRlKSA9PT0gQkJveEhlbHBlci5pc0hvcml6b250YWwodG9TaWRlKSkge1xyXG4gICAgICAvLyBTYW1lIGF4aXMsIGRpZmZlcmVudCBzaWRlIC0+IE1ha2UgYSBaXHJcbiAgICAgIGlmIChCQm94SGVscGVyLmlzSG9yaXpvbnRhbChmcm9tU2lkZSkpIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiBmcm9tQkJveFNpZGVQb3MueCArICh0b0JCb3hTaWRlUG9zLnggLSBmcm9tQkJveFNpZGVQb3MueCkgLyAyLCB5OiBmcm9tQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgeyB4OiBmcm9tQkJveFNpZGVQb3MueCArICh0b0JCb3hTaWRlUG9zLnggLSBmcm9tQkJveFNpZGVQb3MueCkgLyAyLCB5OiB0b0JCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IGZyb21CQm94U2lkZVBvcy54LCB5OiBmcm9tQkJveFNpZGVQb3MueSArICh0b0JCb3hTaWRlUG9zLnkgLSBmcm9tQkJveFNpZGVQb3MueSkgLyAyIH0sXHJcbiAgICAgICAgICB7IHg6IHRvQkJveFNpZGVQb3MueCwgeTogZnJvbUJCb3hTaWRlUG9zLnkgKyAodG9CQm94U2lkZVBvcy55IC0gZnJvbUJCb3hTaWRlUG9zLnkpIC8gMiB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNlbnRlciA9IHsgXHJcbiAgICAgICAgeDogKGZyb21CQm94U2lkZVBvcy54ICsgdG9CQm94U2lkZVBvcy54KSAvIDIsIFxyXG4gICAgICAgIHk6IChmcm9tQkJveFNpZGVQb3MueSArIHRvQkJveFNpZGVQb3MueSkgLyAyIFxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBEaWZmZXJlbnQgYXhpcyAtPiBNYWtlIGEgTFxyXG4gICAgICBpZiAoQkJveEhlbHBlci5pc0hvcml6b250YWwoZnJvbVNpZGUpKSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogdG9CQm94U2lkZVBvcy54LCB5OiBmcm9tQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogZnJvbUJCb3hTaWRlUG9zLngsIHk6IHRvQkJveFNpZGVQb3MueSB9LFxyXG4gICAgICAgICAgdG9Qb3NcclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNlbnRlciA9IHsgXHJcbiAgICAgICAgeDogcGF0aEFycmF5WzFdLngsXHJcbiAgICAgICAgeTogcGF0aEFycmF5WzFdLnlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN2Z1BhdGg6IFN2Z1BhdGhIZWxwZXIucGF0aEFycmF5VG9TdmdQYXRoKHBhdGhBcnJheSwgZmFsc2UpLFxyXG4gICAgICBjZW50ZXI6IGNlbnRlcixcclxuICAgICAgcm90YXRlQXJyb3dzOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBCQm94LCBDYW52YXMsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ01ldGhvZCwgeyBFZGdlUGF0aCB9IGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kXCJcclxuaW1wb3J0IFN2Z1BhdGhIZWxwZXIgZnJvbSBcInNyYy91dGlscy9zdmctcGF0aC1oZWxwZXJcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcblxyXG5jb25zdCBESVJFQ1RJT05TID0gW1xyXG4gIHsgZHg6IDEsIGR5OiAwIH0sIHsgZHg6IC0xLCBkeTogMCB9LCB7IGR4OiAwLCBkeTogMSB9LCB7IGR4OiAwLCBkeTogLTEgfSxcclxuICB7IGR4OiAxLCBkeTogMSB9LCB7IGR4OiAtMSwgZHk6IDEgfSwgeyBkeDogMSwgZHk6IC0xIH0sIHsgZHg6IC0xLCBkeTogLTEgfSxcclxuXSBhcyBjb25zdFxyXG5jb25zdCBESUFHT05BTF9DT1NUID0gTWF0aC5zcXJ0KDIpXHJcblxyXG5jbGFzcyBOb2RlIHtcclxuICB4OiBudW1iZXJcclxuICB5OiBudW1iZXJcclxuICBnQ29zdDogbnVtYmVyXHJcbiAgaENvc3Q6IG51bWJlclxyXG4gIGZDb3N0OiBudW1iZXJcclxuICBwYXJlbnQ6IE5vZGV8bnVsbFxyXG5cclxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgdGhpcy54ID0geFxyXG4gICAgdGhpcy55ID0geVxyXG5cclxuICAgIHRoaXMuZ0Nvc3QgPSAwXHJcbiAgICB0aGlzLmhDb3N0ID0gMFxyXG4gICAgdGhpcy5mQ29zdCA9IDBcclxuICAgIHRoaXMucGFyZW50ID0gbnVsbFxyXG4gIH1cclxuXHJcbiAgLy8gT25seSBjaGVjayBmb3IgeCBhbmQgeSwgbm90IGdDb3N0LCBoQ29zdCwgZkNvc3QsIG9yIHBhcmVudFxyXG4gIGluTGlzdChub2RlczogTm9kZVtdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbm9kZXMuc29tZShuID0+IG4ueCA9PT0gdGhpcy54ICYmIG4ueSA9PT0gdGhpcy55KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRnZVBhdGhmaW5kaW5nQVN0YXIgZXh0ZW5kcyBFZGdlUGF0aGZpbmRpbmdNZXRob2Qge1xyXG4gIGdldFBhdGgocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgY2FudmFzOiBDYW52YXMsIGZyb21Qb3M6IFBvc2l0aW9uLCBfZnJvbUJCb3hTaWRlUG9zOiBQb3NpdGlvbiwgZnJvbVNpZGU6IFNpZGUsIHRvUG9zOiBQb3NpdGlvbiwgX3RvQkJveFNpZGVQb3M6IFBvc2l0aW9uLCB0b1NpZGU6IFNpZGUsIGlzRHJhZ2dpbmc6IGJvb2xlYW4pOiBFZGdlUGF0aCB8IG51bGwge1xyXG4gICAgaWYgKGlzRHJhZ2dpbmcgJiYgIXBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGUnKSkgcmV0dXJuIG51bGxcclxuICAgICAgICBcclxuICAgIGNvbnN0IG5vZGVCQm94ZXMgPSBbLi4uY2FudmFzLm5vZGVzLnZhbHVlcygpXVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBpc0dyb3VwID0gbm9kZURhdGEudHlwZSA9PT0gJ2dyb3VwJyAvLyBFeGNsdWRlIGdyb3VwIG5vZGVzXHJcbiAgICAgICAgY29uc3QgaXNPcGVuUG9ydGFsID0gbm9kZURhdGEucG9ydGFsVG9GaWxlICE9PSB1bmRlZmluZWQgLy8gRXhjbHVkZSBvcGVuIHBvcnRhbHNcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gIWlzR3JvdXAgJiYgIWlzT3BlblBvcnRhbFxyXG4gICAgICB9KS5tYXAobm9kZSA9PiBub2RlLmdldEJCb3goKSlcclxuICAgIFxyXG4gICAgY29uc3QgZnJvbVBvc1dpdGhNYXJnaW4gPSBCQm94SGVscGVyLm1vdmVJbkRpcmVjdGlvbihmcm9tUG9zLCBmcm9tU2lkZSwgMTApXHJcbiAgICBjb25zdCB0b1Bvc1dpdGhNYXJnaW4gPSBCQm94SGVscGVyLm1vdmVJbkRpcmVjdGlvbih0b1BvcywgdG9TaWRlLCAxMClcclxuXHJcbiAgICBjb25zdCBncmlkUmVzb2x1dGlvbiA9IHBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb24nKVxyXG4gICAgY29uc3QgcGF0aEFycmF5ID0gdGhpcy5hU3RhckFsZ29yaXRobShmcm9tUG9zV2l0aE1hcmdpbiwgZnJvbVNpZGUsIHRvUG9zV2l0aE1hcmdpbiwgdG9TaWRlLCBub2RlQkJveGVzLCBncmlkUmVzb2x1dGlvbilcclxuICAgIGlmICghcGF0aEFycmF5KSByZXR1cm4gbnVsbCAvLyBObyBwYXRoIGZvdW5kIC0gdXNlIGRlZmF1bHQgcGF0aFxyXG5cclxuICAgIC8vIE1ha2UgY29ubmVjdGlvbiBwb2ludHMgdG8gdGhlIG5vZGUgcmVtb3ZpbmcgdGhlIG1hcmdpblxyXG4gICAgcGF0aEFycmF5LnNwbGljZSgwLCAwLCBmcm9tUG9zKVxyXG4gICAgcGF0aEFycmF5LnNwbGljZShwYXRoQXJyYXkubGVuZ3RoLCAwLCB0b1BvcylcclxuXHJcbiAgICBjb25zdCByb3VuZGVkUGF0aCA9IHBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQnKVxyXG4gICAgY29uc3Qgc3ZnUGF0aCA9IFN2Z1BhdGhIZWxwZXIucGF0aEFycmF5VG9TdmdQYXRoKHBhdGhBcnJheSwgcm91bmRlZFBhdGgpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3ZnUGF0aDogc3ZnUGF0aCxcclxuICAgICAgY2VudGVyOiBwYXRoQXJyYXlbTWF0aC5mbG9vcihwYXRoQXJyYXkubGVuZ3RoIC8gMildLFxyXG4gICAgICByb3RhdGVBcnJvd3M6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFTdGFyQWxnb3JpdGhtKGZyb21Qb3M6IFBvc2l0aW9uLCBmcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCB0b1NpZGU6IFNpZGUsIG9ic3RhY2xlczogQkJveFtdLCBncmlkUmVzb2x1dGlvbjogbnVtYmVyKTogUG9zaXRpb25bXSB8IG51bGwge1xyXG4gICAgY29uc3Qgc3RhcnQ6IE5vZGUgPSBuZXcgTm9kZShcclxuICAgICAgTWF0aC5mbG9vcihmcm9tUG9zLnggLyBncmlkUmVzb2x1dGlvbikgKiBncmlkUmVzb2x1dGlvbixcclxuICAgICAgTWF0aC5mbG9vcihmcm9tUG9zLnkgLyBncmlkUmVzb2x1dGlvbikgKiBncmlkUmVzb2x1dGlvblxyXG4gICAgKVxyXG4gICAgLy8gUm91bmQgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgdG8gdGhlIG5lYXJlc3QgZ3JpZCBjZWxsIG91dHNpZGUgb2YgdGhlIG5vZGVzIHRvIGNvbm5lY3RcclxuICAgIGlmIChmcm9tU2lkZSA9PT0gJ3JpZ2h0JyAmJiBmcm9tUG9zLnggIT09IHN0YXJ0LngpIHN0YXJ0LnggKz0gZ3JpZFJlc29sdXRpb25cclxuICAgIGlmIChmcm9tU2lkZSA9PT0gJ2JvdHRvbScgJiYgZnJvbVBvcy55ICE9PSBzdGFydC55KSBzdGFydC55ICs9IGdyaWRSZXNvbHV0aW9uXHJcbiAgXHJcbiAgICBjb25zdCBlbmQ6IE5vZGUgPSBuZXcgTm9kZShcclxuICAgICAgTWF0aC5mbG9vcih0b1Bvcy54IC8gZ3JpZFJlc29sdXRpb24pICogZ3JpZFJlc29sdXRpb24sXHJcbiAgICAgIE1hdGguZmxvb3IodG9Qb3MueSAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uXHJcbiAgICApXHJcbiAgICAvLyBSb3VuZCBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyB0byB0aGUgbmVhcmVzdCBncmlkIGNlbGwgb3V0c2lkZSBvZiB0aGUgbm9kZXMgdG8gY29ubmVjdFxyXG4gICAgaWYgKHRvU2lkZSA9PT0gJ3JpZ2h0JyAmJiB0b1Bvcy54ICE9PSBlbmQueCkgZW5kLnggKz0gZ3JpZFJlc29sdXRpb25cclxuICAgIGlmICh0b1NpZGUgPT09ICdib3R0b20nICYmIHRvUG9zLnkgIT09IGVuZC55KSBlbmQueSArPSBncmlkUmVzb2x1dGlvblxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBhcmUgdmFsaWRcclxuICAgIGlmICh0aGlzLmlzSW5zaWRlT2JzdGFjbGUoc3RhcnQsIG9ic3RhY2xlcykgfHwgdGhpcy5pc0luc2lkZU9ic3RhY2xlKGVuZCwgb2JzdGFjbGVzKSkgcmV0dXJuIG51bGxcclxuICBcclxuICAgIGNvbnN0IG9wZW5TZXQ6IE5vZGVbXSA9IFtzdGFydF1cclxuICAgIGNvbnN0IGNsb3NlZFNldDogTm9kZVtdID0gW11cclxuICBcclxuICAgIHdoaWxlIChvcGVuU2V0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgLy8gRmluZCB0aGUgbm9kZSB3aXRoIHRoZSBsb3dlc3QgZkNvc3QgaW4gdGhlIG9wZW4gc2V0XHJcbiAgICAgIGxldCBjdXJyZW50OiBOb2RlfG51bGwgPSBudWxsXHJcbiAgICAgIGxldCBsb3dlc3RGQ29zdCA9IEluZmluaXR5XHJcbiAgXHJcbiAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBvcGVuU2V0KSB7XHJcbiAgICAgICAgaWYgKG5vZGUuZkNvc3QgPCBsb3dlc3RGQ29zdCkge1xyXG4gICAgICAgICAgY3VycmVudCA9IG5vZGVcclxuICAgICAgICAgIGxvd2VzdEZDb3N0ID0gbm9kZS5mQ29zdFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvLyBObyBwYXRoIGZvdW5kXHJcbiAgICAgIGlmICghY3VycmVudCkgcmV0dXJuIG51bGxcclxuICBcclxuICAgICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IG5vZGUgZnJvbSB0aGUgb3BlbiBzZXQgYW5kIGFkZCBpdCB0byB0aGUgY2xvc2VkIHNldFxyXG4gICAgICBvcGVuU2V0LnNwbGljZShvcGVuU2V0LmluZGV4T2YoY3VycmVudCksIDEpXHJcbiAgICAgIGNsb3NlZFNldC5wdXNoKGN1cnJlbnQpXHJcbiAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kXHJcbiAgICAgIGlmIChjdXJyZW50LnggPT09IGVuZC54ICYmIGN1cnJlbnQueSA9PT0gZW5kLnkpIHtcclxuICAgICAgICByZXR1cm4gW2Zyb21Qb3MsIC4uLnRoaXMucmVjb25zdHJ1Y3RQYXRoKGN1cnJlbnQpLCB0b1Bvc10ubWFwKG5vZGUgPT4gKHsgeDogbm9kZS54LCB5OiBub2RlLnkgfSkpXHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gTG9jYXRpb24gaXMgbm90IHN0YXJ0IG9yIGVuZCwgYWxsIHRvdWNoaW5nIHBvc2l0aW9ucyBhcmUgaW52YWxpZFxyXG4gICAgICBpZiAoIShjdXJyZW50LnggPT09IHN0YXJ0LnggJiYgY3VycmVudC55ID09PSBzdGFydC55KSAmJiB0aGlzLmlzVG91Y2hpbmdPYnN0YWNsZShjdXJyZW50LCBvYnN0YWNsZXMpKSBjb250aW51ZVxyXG4gIFxyXG4gICAgICAvLyBFeHBhbmQgbmVpZ2hib3JzXHJcbiAgICAgIGZvciAoY29uc3QgbmVpZ2hib3Igb2YgdGhpcy5nZXRQb3NzaWJsZU5laWdoYm9ycyhjdXJyZW50LCBvYnN0YWNsZXMsIGdyaWRSZXNvbHV0aW9uKSkge1xyXG4gICAgICAgIGlmIChuZWlnaGJvci5pbkxpc3QoY2xvc2VkU2V0KSkgY29udGludWVcclxuICBcclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGVudGF0aXZlIGdDb3N0XHJcbiAgICAgICAgY29uc3QgdGVudGF0aXZlR0Nvc3QgPSBjdXJyZW50LmdDb3N0ICsgdGhpcy5nZXRNb3ZlbWVudENvc3Qoe1xyXG4gICAgICAgICAgZHg6IG5laWdoYm9yLnggLSBjdXJyZW50LngsXHJcbiAgICAgICAgICBkeTogbmVpZ2hib3IueSAtIGN1cnJlbnQueSxcclxuICAgICAgICB9KVxyXG4gIFxyXG4gICAgICAgIC8vIENoZWNrIGlmIG5laWdoYm9yIGlzIG5vdCBhbHJlYWR5IGluIHRoZSBvcGVuIHNldCBvciBpZiB0aGUgbmV3IGdDb3N0IGlzIGxvd2VyXHJcbiAgICAgICAgaWYgKCFuZWlnaGJvci5pbkxpc3Qob3BlblNldCkgfHwgdGVudGF0aXZlR0Nvc3QgPCBuZWlnaGJvci5nQ29zdCkge1xyXG4gICAgICAgICAgbmVpZ2hib3IucGFyZW50ID0gY3VycmVudFxyXG4gICAgICAgICAgbmVpZ2hib3IuZ0Nvc3QgPSB0ZW50YXRpdmVHQ29zdFxyXG4gICAgICAgICAgbmVpZ2hib3IuaENvc3QgPSB0aGlzLmhldXJpc3RpYyhuZWlnaGJvciwgZW5kKVxyXG4gICAgICAgICAgbmVpZ2hib3IuZkNvc3QgPSBuZWlnaGJvci5nQ29zdCArIG5laWdoYm9yLmhDb3N0XHJcbiAgXHJcbiAgICAgICAgICAvLyBBZGQgbmVpZ2hib3IgdG8gdGhlIG9wZW4gc2V0XHJcbiAgICAgICAgICBvcGVuU2V0LnB1c2gobmVpZ2hib3IpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBObyBwYXRoIGZvdW5kXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuICBcclxuICAvLyBNYW5oYXR0YW4gZGlzdGFuY2VcclxuICBwcml2YXRlIGhldXJpc3RpYyhub2RlOiBOb2RlLCBlbmQ6IE5vZGUpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKG5vZGUueCAtIGVuZC54KSArIE1hdGguYWJzKG5vZGUueSAtIGVuZC55KVxyXG4gIH1cclxuICBcclxuICAvLyBEZWZpbmUgYSBmdW5jdGlvbiB0byBjaGVjayBpZiBhIHBvc2l0aW9uIGlzbid0IGluc2lkZSBhbnkgb2JzdGFjbGVcclxuICBwcml2YXRlIGlzVG91Y2hpbmdPYnN0YWNsZShub2RlOiBQb3NpdGlvbiwgb2JzdGFjbGVzOiBCQm94W10pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBvYnN0YWNsZXMuc29tZShvYnN0YWNsZSA9PiBCQm94SGVscGVyLmluc2lkZUJCb3gobm9kZSwgb2JzdGFjbGUsIHRydWUpKVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGlzSW5zaWRlT2JzdGFjbGUobm9kZTogUG9zaXRpb24sIG9ic3RhY2xlczogQkJveFtdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gb2JzdGFjbGVzLnNvbWUob2JzdGFjbGUgPT4gQkJveEhlbHBlci5pbnNpZGVCQm94KG5vZGUsIG9ic3RhY2xlLCBmYWxzZSkpXHJcbiAgfVxyXG4gIFxyXG4gIC8vIERlZmluZSBhIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSBtb3ZlbWVudCBjb3N0IGJhc2VkIG9uIGRpcmVjdGlvblxyXG4gIHByaXZhdGUgZ2V0TW92ZW1lbnRDb3N0KGRpcmVjdGlvbjogeyBkeDogbnVtYmVyOyBkeTogbnVtYmVyIH0pOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGRpcmVjdGlvbi5keCAhPT0gMCAmJiBkaXJlY3Rpb24uZHkgIT09IDAgPyBESUFHT05BTF9DT1NUIDogMVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGdldFBvc3NpYmxlTmVpZ2hib3JzKG5vZGU6IE5vZGUsIG9ic3RhY2xlczogQkJveFtdLCBncmlkUmVzb2x1dGlvbjogbnVtYmVyKTogTm9kZVtdIHtcclxuICAgIGNvbnN0IG5laWdoYm9yczogTm9kZVtdID0gW11cclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBkaXJlY3Rpb24gb2YgRElSRUNUSU9OUykge1xyXG4gICAgICBjb25zdCBuZWlnaGJvciA9IG5ldyBOb2RlKFxyXG4gICAgICAgIG5vZGUueCArIGRpcmVjdGlvbi5keCAqIGdyaWRSZXNvbHV0aW9uLCBcclxuICAgICAgICBub2RlLnkgKyBkaXJlY3Rpb24uZHkgKiBncmlkUmVzb2x1dGlvblxyXG4gICAgICApXHJcbiAgICAgIG5laWdoYm9yLmdDb3N0ID0gbm9kZS5nQ29zdCArIHRoaXMuZ2V0TW92ZW1lbnRDb3N0KGRpcmVjdGlvbilcclxuICBcclxuICAgICAgaWYgKHRoaXMuaXNJbnNpZGVPYnN0YWNsZShuZWlnaGJvciwgb2JzdGFjbGVzKSkgY29udGludWVcclxuICBcclxuICAgICAgbmVpZ2hib3JzLnB1c2gobmVpZ2hib3IpXHJcbiAgICB9XHJcbiAgXHJcbiAgICByZXR1cm4gbmVpZ2hib3JzXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgcmVjb25zdHJ1Y3RQYXRoKG5vZGU6IE5vZGUpOiBOb2RlW10ge1xyXG4gICAgY29uc3QgcGF0aDogTm9kZVtdID0gW11cclxuICAgIHdoaWxlIChub2RlKSB7XHJcbiAgICAgIHBhdGgucHVzaChub2RlKVxyXG4gICAgICBub2RlID0gbm9kZS5wYXJlbnQhXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aC5yZXZlcnNlKClcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNFZGdlLCBDYW52YXNOb2RlLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCB7IEJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTLCBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCIuL3N0eWxlLWNvbmZpZ1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdNZXRob2QgZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ0RpcmVjdCBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctZGlyZWN0XCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ1NxdWFyZSBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctc3F1YXJlXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ0FTdGFyIGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1hLXN0YXJcIlxyXG5cclxuY29uc3QgRURHRV9QQVRIRklORElOR19NRVRIT0RTOiB7IFtrZXk6IHN0cmluZ106IG5ldygpID0+IEVkZ2VQYXRoZmluZGluZ01ldGhvZCB9ID0ge1xyXG4gICdkaXJlY3QnOiBFZGdlUGF0aGZpbmRpbmdEaXJlY3QsXHJcbiAgJ3NxdWFyZSc6IEVkZ2VQYXRoZmluZGluZ1NxdWFyZSxcclxuICAnYS1zdGFyJzogRWRnZVBhdGhmaW5kaW5nQVN0YXJcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRnZVN0eWxlc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgYWxsRWRnZVN0eWxlQXR0cmlidXRlczogU3R5bGVBdHRyaWJ1dGVbXVxyXG5cclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuYWxsRWRnZVN0eWxlQXR0cmlidXRlcyA9IFsuLi5CVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy5hbGxFZGdlU3R5bGVBdHRyaWJ1dGVzID0gWy4uLkJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzJyldXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkgPT4gdGhpcy5vbkVkZ2VDaGFuZ2VkKGNhbnZhcywgZWRnZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5FZGdlQ2VudGVyUmVxdWVzdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UsIGNlbnRlcjogUG9zaXRpb24pID0+IHRoaXMub25FZGdlQ2VudGVyUmVxdWVzdGVkKGNhbnZhcywgZWRnZSwgY2VudGVyKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVBZGRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZU1vdmVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLnVwZGF0ZUFsbEVkZ2VzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRHJhZ2dpbmdTdGF0ZUNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgaXNEcmFnZ2luZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGlmIChpc0RyYWdnaW5nKSByZXR1cm5cclxuICAgICAgICB0aGlzLnVwZGF0ZUFsbEVkZ2VzKGNhbnZhcylcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhczogQ2FudmFzKTogdm9pZCB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVkZ2VzID0gWy4uLmNhbnZhcy5zZWxlY3Rpb25dLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLnBhdGggIT09IHVuZGVmaW5lZCkgYXMgQ2FudmFzRWRnZVtdXHJcbiAgICBpZiAoY2FudmFzLnJlYWRvbmx5IHx8IHNlbGVjdGVkRWRnZXMubGVuZ3RoID09PSAwIHx8IHNlbGVjdGVkRWRnZXMubGVuZ3RoICE9PSBjYW52YXMuc2VsZWN0aW9uLnNpemUpXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIENhbnZhc0hlbHBlci5jcmVhdGVTdHlsZURyb3Bkb3duTWVudShcclxuICAgICAgY2FudmFzLCB0aGlzLmFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgIHNlbGVjdGVkRWRnZXNbMF0uZ2V0RGF0YSgpLnN0eWxlQXR0cmlidXRlcyA/PyB7fSxcclxuICAgICAgKGF0dHJpYnV0ZSwgdmFsdWUpID0+IHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzLCBhdHRyaWJ1dGUsIHZhbHVlKVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZUZvclNlbGVjdGlvbihjYW52YXM6IENhbnZhcywgYXR0cmlidXRlOiBTdHlsZUF0dHJpYnV0ZSwgdmFsdWU6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkRWRnZXMgPSBbLi4uY2FudmFzLnNlbGVjdGlvbl0uZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0ucGF0aCAhPT0gdW5kZWZpbmVkKSBhcyBDYW52YXNFZGdlW11cclxuXHJcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2Ygc2VsZWN0ZWRFZGdlcykge1xyXG4gICAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcblxyXG4gICAgICBlZGdlLnNldERhdGEoe1xyXG4gICAgICAgIC4uLmVkZ2VEYXRhLFxyXG4gICAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgICAgLi4uZWRnZURhdGEuc3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgW2F0dHJpYnV0ZS5kYXRhc2V0S2V5XTogdmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNhbnZhcy5wdXNoSGlzdG9yeShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVBbGxFZGdlcyhjYW52YXM6IENhbnZhcykge1xyXG4gICAgZm9yIChjb25zdCBlZGdlIG9mIGNhbnZhcy5lZGdlcy52YWx1ZXMoKSkge1xyXG4gICAgICB0aGlzLm9uRWRnZUNoYW5nZWQoY2FudmFzLCBlZGdlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkVkZ2VDaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcbiAgICBcclxuICAgIC8vIFJlc2V0IHBhdGggdG8gZGVmYXVsdFxyXG4gICAgaWYgKCFlZGdlLmJlemllcikgcmV0dXJuXHJcbiAgICBlZGdlLmNlbnRlciA9IHVuZGVmaW5lZFxyXG4gICAgZWRnZS51cGRhdGVQYXRoKClcclxuXHJcbiAgICAvLyBTZXQgcGF0aGZpbmRpbmcgbWV0aG9kXHJcbiAgICBjb25zdCBwYXRoZmluZGluZ01ldGhvZCA9IGVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcz8ucGF0aGZpbmRpbmdNZXRob2RcclxuICAgIGlmIChwYXRoZmluZGluZ01ldGhvZCkge1xyXG4gICAgICBjb25zdCBmcm9tQkJveFNpZGVQb3MgPSBCQm94SGVscGVyLmdldENlbnRlck9mQkJveFNpZGUoZWRnZS5mcm9tLm5vZGUuZ2V0QkJveCgpLCBlZGdlLmZyb20uc2lkZSlcclxuICAgICAgY29uc3QgZnJvbVBvcyA9IGVkZ2UuZnJvbS5lbmQgPT09ICdub25lJyA/IFxyXG4gICAgICAgIGZyb21CQm94U2lkZVBvcyA6XHJcbiAgICAgICAgZWRnZS5iZXppZXIuZnJvbVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdG9CQm94U2lkZVBvcyA9IEJCb3hIZWxwZXIuZ2V0Q2VudGVyT2ZCQm94U2lkZShlZGdlLnRvLm5vZGUuZ2V0QkJveCgpLCBlZGdlLnRvLnNpZGUpXHJcbiAgICAgIGNvbnN0IHRvUG9zID0gZWRnZS50by5lbmQgPT09ICdub25lJyA/IFxyXG4gICAgICAgIHRvQkJveFNpZGVQb3MgOlxyXG4gICAgICAgIGVkZ2UuYmV6aWVyLnRvXHJcblxyXG4gICAgICBjb25zdCBwYXRoID0gbmV3IEVER0VfUEFUSEZJTkRJTkdfTUVUSE9EU1twYXRoZmluZGluZ01ldGhvZF0oKS5nZXRQYXRoKHRoaXMucGx1Z2luLCBjYW52YXMsIGZyb21Qb3MsIGZyb21CQm94U2lkZVBvcywgZWRnZS5mcm9tLnNpZGUsIHRvUG9zLCB0b0JCb3hTaWRlUG9zLCBlZGdlLnRvLnNpZGUsIGNhbnZhcy5pc0RyYWdnaW5nKVxyXG4gICAgICBpZiAoIXBhdGgpIHJldHVyblxyXG5cclxuICAgICAgZWRnZS5jZW50ZXIgPSBwYXRoLmNlbnRlclxyXG4gICAgICBlZGdlLnBhdGguaW50ZXJhY3Rpb24uc2V0QXR0cihcImRcIiwgcGF0aD8uc3ZnUGF0aClcclxuICAgICAgZWRnZS5wYXRoLmRpc3BsYXkuc2V0QXR0cihcImRcIiwgcGF0aD8uc3ZnUGF0aClcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgbGFiZWwgcG9zaXRpb25cclxuICAgIGVkZ2UubGFiZWxFbGVtZW50Py5yZW5kZXIoKVxyXG5cclxuICAgIC8vIFNldCBhcnJvdyBwb2x5Z29uXHJcbiAgICBjb25zdCBhcnJvd1BvbHlnb25Qb2ludHMgPSB0aGlzLmdldEFycm93UG9seWdvblBvaW50cyhlZGdlRGF0YS5zdHlsZUF0dHJpYnV0ZXM/LmFycm93KVxyXG4gICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBlZGdlLmZyb21MaW5lRW5kLmVsLnF1ZXJ5U2VsZWN0b3IoJ3BvbHlnb24nKT8uc2V0QXR0cmlidXRlKCdwb2ludHMnLCBhcnJvd1BvbHlnb25Qb2ludHMpXHJcbiAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBlZGdlLnRvTGluZUVuZC5lbC5xdWVyeVNlbGVjdG9yKCdwb2x5Z29uJyk/LnNldEF0dHJpYnV0ZSgncG9pbnRzJywgYXJyb3dQb2x5Z29uUG9pbnRzKVxyXG5cclxuICAgIC8vIFJvdGF0ZSBhcnJvd3MgYWNjb3JkaW5nbHlcclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVEaXJlY3RSb3RhdGVBcnJvdycpKSB7XHJcbiAgICAgIHRoaXMucm90YXRlQXJyb3dzKGVkZ2UsIHBhdGhmaW5kaW5nTWV0aG9kKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkVkZ2VDZW50ZXJSZXF1ZXN0ZWQoX2NhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlLCBjZW50ZXI6IFBvc2l0aW9uKSB7XHJcbiAgICBjZW50ZXIueCA9IGVkZ2UuY2VudGVyPy54ID8/IGNlbnRlci54XHJcbiAgICBjZW50ZXIueSA9IGVkZ2UuY2VudGVyPy55ID8/IGNlbnRlci55XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEFycm93UG9seWdvblBvaW50cyhhcnJvd1N0eWxlPzogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB7XHJcbiAgICBpZiAoYXJyb3dTdHlsZSA9PT0gJ2hhbHZlZC10cmlhbmdsZScpXHJcbiAgICAgIHJldHVybiBgLTIsMCA3LjUsMTIgLTIsMTJgXHJcbiAgICBlbHNlIGlmIChhcnJvd1N0eWxlID09PSAndGhpbi10cmlhbmdsZScpXHJcbiAgICAgIHJldHVybiBgMCwwIDcsMTAgMCwwIDAsMTAgMCwwIC03LDEwYFxyXG4gICAgZWxzZSBpZiAoYXJyb3dTdHlsZSA9PT0gJ2RpYW1vbmQnIHx8IGFycm93U3R5bGUgPT09ICdkaWFtb25kLW91dGxpbmUnKVxyXG4gICAgICByZXR1cm4gYDAsMCA1LDEwIDAsMjAgLTUsMTBgXHJcbiAgICBlbHNlIGlmIChhcnJvd1N0eWxlID09PSAnY2lyY2xlJyB8fCBhcnJvd1N0eWxlID09PSAnY2lyY2xlLW91dGxpbmUnKVxyXG4gICAgICByZXR1cm4gYDAgMCwgNC45NSAxLjgsIDcuNSA2LjQ1LCA2LjYgMTEuNywgMi43IDE1LCAtMi43IDE1LCAtNi42IDExLjcsIC03LjUgNi40NSwgLTQuOTUgMS44YFxyXG4gICAgZWxzZSAvLyBEZWZhdWx0IHRyaWFuZ2xlXHJcbiAgICAgIHJldHVybiBgMCwwIDYuNSwxMC40IC02LjUsMTAuNGBcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcm90YXRlQXJyb3dzKGVkZ2U6IENhbnZhc0VkZ2UsIHBhdGhSb3V0ZVR5cGU/OiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICAvLyBSZXNldCBhcnJvdyByb3RhdGlvblxyXG4gICAgaWYgKHBhdGhSb3V0ZVR5cGUgIT09ICdkaXJlY3QnKSB7XHJcbiAgICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZWRnZS5mcm9tTGluZUVuZC5lbC5zdHlsZS50cmFuc2xhdGUgPSBcIlwiXHJcbiAgICAgIGlmIChlZGdlLnRvTGluZUVuZD8uZWwpIGVkZ2UudG9MaW5lRW5kLmVsLnN0eWxlLnRyYW5zbGF0ZSA9IFwiXCJcclxuXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBzZXRBcnJvd1JvdGF0aW9uID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzaWRlOiBTaWRlLCByb3RhdGlvbjogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm1cclxuICAgICAgICAucmVwbGFjZSgvcm90YXRlXFwoWy1cXGRdKyhkZWd8cmFkKVxcKS9nLCBgcm90YXRlKCR7cm90YXRpb259cmFkKWApXHJcblxyXG4gICAgICBjb25zdCBvZmZzZXQgPSBCQm94SGVscGVyLmdldFNpZGVWZWN0b3Ioc2lkZSlcclxuICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2xhdGUgPSBgJHtvZmZzZXQueCAqIDd9cHggJHtvZmZzZXQueSAqIC03fXB4YFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVkZ2VSb3RhdGlvbiA9IE1hdGguYXRhbjIoZWRnZS5iZXppZXIudG8ueSAtIGVkZ2UuYmV6aWVyLmZyb20ueSwgZWRnZS5iZXppZXIudG8ueCAtIGVkZ2UuYmV6aWVyLmZyb20ueCkgLSAoTWF0aC5QSSAvIDIpXHJcblxyXG4gICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBzZXRBcnJvd1JvdGF0aW9uKGVkZ2UuZnJvbUxpbmVFbmQuZWwsIGVkZ2UuZnJvbS5zaWRlLCBlZGdlUm90YXRpb24pXHJcbiAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBzZXRBcnJvd1JvdGF0aW9uKGVkZ2UudG9MaW5lRW5kLmVsLCBlZGdlLnRvLnNpZGUsIGVkZ2VSb3RhdGlvbiAtIE1hdGguUEkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSwgQ2FudmFzTm9kZURhdGEgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cG9zZWROb2RlRGF0YShzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyKTogKGtleW9mIENhbnZhc05vZGVEYXRhKVtdIHtcclxuICBjb25zdCBleHBvc2VkRGF0YTogKGtleW9mIENhbnZhc05vZGVEYXRhKVtdID0gW11cclxuXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ25vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnc3R5bGVBdHRyaWJ1dGVzJylcclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdpc0NvbGxhcHNlZCcpXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ3ByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ2lzU3RhcnROb2RlJylcclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygncG9ydGFsc0ZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ3BvcnRhbFRvRmlsZScsICdwb3J0YWxJZCcpXHJcblxyXG4gIHJldHVybiBleHBvc2VkRGF0YVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlPy5nZXREYXRhKClcclxuICAgICAgICBpZiAoIW5vZGVEYXRhKSByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvc2VkRGF0YUtleSBvZiBnZXRFeHBvc2VkTm9kZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhc2V0UGFpcnMgPSBub2RlRGF0YVtleHBvc2VkRGF0YUtleV0gaW5zdGFuY2VvZiBPYmplY3RcclxuICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhub2RlRGF0YVtleHBvc2VkRGF0YUtleV0pXHJcbiAgICAgICAgICAgIDogW1tleHBvc2VkRGF0YUtleSwgbm9kZURhdGFbZXhwb3NlZERhdGFLZXldXV1cclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBkYXRhc2V0UGFpcnMpIHtcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgZGVsZXRlIG5vZGUubm9kZUVsLmRhdGFzZXRba2V5XVxyXG4gICAgICAgICAgICBlbHNlIG5vZGUubm9kZUVsLmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBnZXRFeHBvc2VkTm9kZURhdGEgfSBmcm9tIFwiLi9ub2RlLWV4cG9zZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGNvbnN0IFRBUkdFVF9OT0RFX0RBVEFTRVRfUFJFRklYID0gXCJ0YXJnZXRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVJbnRlcmFjdGlvbixcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlPy5nZXREYXRhKClcclxuICAgICAgICBpZiAoIW5vZGVEYXRhKSByZXR1cm5cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkVsID0gY2FudmFzLm5vZGVJbnRlcmFjdGlvbkxheWVyLmludGVyYWN0aW9uRWxcclxuICAgICAgICBpZiAoIWludGVyYWN0aW9uRWwpIHJldHVyblxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9zZWREYXRhS2V5IG9mIGdldEV4cG9zZWROb2RlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFzZXRQYWlycyA9IG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XSBpbnN0YW5jZW9mIE9iamVjdFxyXG4gICAgICAgICAgICA/IE9iamVjdC5lbnRyaWVzKG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XSlcclxuICAgICAgICAgICAgOiBbW2V4cG9zZWREYXRhS2V5LCBub2RlRGF0YVtleHBvc2VkRGF0YUtleV1dXVxyXG5cclxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGRhdGFzZXRQYWlycykge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RpZmllZEtleSA9IFRBUkdFVF9OT0RFX0RBVEFTRVRfUFJFRklYICsga2V5LnRvU3RyaW5nKCkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkudG9TdHJpbmcoKS5zbGljZSgxKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgZGVsZXRlIGludGVyYWN0aW9uRWwuZGF0YXNldFttb2RpZmllZEtleV1cclxuICAgICAgICAgICAgZWxzZSBpbnRlcmFjdGlvbkVsLmRhdGFzZXRbbW9kaWZpZWRLZXldID0gdmFsdWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzRWRnZSwgQ2FudmFzRWRnZURhdGEgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cG9zZWRFZGdlRGF0YShzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyKTogKGtleW9mIENhbnZhc0VkZ2VEYXRhKVtdIHtcclxuICBjb25zdCBleHBvc2VkRGF0YTogKGtleW9mIENhbnZhc0VkZ2VEYXRhKVtdID0gW11cclxuXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VzU3R5bGluZ0ZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ3N0eWxlQXR0cmlidXRlcycpXHJcblxyXG4gIHJldHVybiBleHBvc2VkRGF0YVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGdlRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWRnZURhdGEgPSBlZGdlPy5nZXREYXRhKClcclxuICAgICAgICBpZiAoIWVkZ2VEYXRhKSByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvc2VkRGF0YUtleSBvZiBnZXRFeHBvc2VkRWRnZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXRQYWlycyA9IGVkZ2VEYXRhW2V4cG9zZWREYXRhS2V5XSBpbnN0YW5jZW9mIE9iamVjdFxyXG4gICAgICAgICAgICAgID8gT2JqZWN0LmVudHJpZXMoZWRnZURhdGFbZXhwb3NlZERhdGFLZXldKVxyXG4gICAgICAgICAgICAgIDogW1tleHBvc2VkRGF0YUtleSwgZWRnZURhdGFbZXhwb3NlZERhdGFLZXldXV1cclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGRhdGFzZXRQYWlycykge1xyXG4gICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBlZGdlLnBhdGguZGlzcGxheS5kYXRhc2V0W2tleV1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIGRlbGV0ZSBlZGdlLmZyb21MaW5lRW5kLmVsLmRhdGFzZXRba2V5XVxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgZGVsZXRlIGVkZ2UudG9MaW5lRW5kLmVsLmRhdGFzZXRba2V5XVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlZGdlLnBhdGguZGlzcGxheS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZWRnZS5mcm9tTGluZUVuZC5lbC5kYXRhc2V0W2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgZWRnZS50b0xpbmVFbmQuZWwuZGF0YXNldFtrZXldID0gdmFsdWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIsIHsgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgRVhQT1NFRF9TRVRUSU5HUzogKGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MpW10gPSBbXHJcbiAgJ3BlcmZvcm1hbmNlT3B0aW1pemF0aW9uRW5hYmxlZCcsXHJcbiAgJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnLFxyXG4gICdjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWcnXHJcbl1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc1dyYXBwZXJFeHBvc2VyRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgU2V0dGluZ3NNYW5hZ2VyLlNFVFRJTkdTX0NIQU5HRURfRVZFTlQsXHJcbiAgICAgICgpID0+IHRoaXMudXBkYXRlRXhwb3NlZFNldHRpbmdzKHRoaXMucGx1Z2luLmdldEN1cnJlbnRDYW52YXMoKSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMudXBkYXRlRXhwb3NlZFNldHRpbmdzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBkcmFnZ2luZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGlmIChkcmFnZ2luZykgY2FudmFzLndyYXBwZXJFbC5kYXRhc2V0LmlzRHJhZ2dpbmcgPSAndHJ1ZSdcclxuICAgICAgICBlbHNlIGRlbGV0ZSBjYW52YXMud3JhcHBlckVsLmRhdGFzZXQuaXNEcmFnZ2luZ1xyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVFeHBvc2VkU2V0dGluZ3MoY2FudmFzOiBDYW52YXMgfCBudWxsKSB7XHJcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuXHJcblxyXG4gICAgZm9yIChjb25zdCBzZXR0aW5nIG9mIEVYUE9TRURfU0VUVElOR1MpIHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5kYXRhc2V0W3NldHRpbmddID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhzZXR0aW5nKS50b1N0cmluZygpXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlncmF0aW9uSGVscGVyIHtcclxuICBwcml2YXRlIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuICB9XHJcblxyXG4gIGFzeW5jIG1pZ3JhdGUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLm1pZ3JhdGVOb2RlQW5kRWRnZVN0eWxlcygpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1pZ3JhdGVOb2RlQW5kRWRnZVN0eWxlcygpOiB2b2lkIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIGNhbnZhcy5ub2Rlcy52YWx1ZXMoKSkge1xyXG4gICAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgICAgIGNvbnN0IG5ld1N0eWxlQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0gPSB7fVxyXG5cclxuICAgICAgICAgIGlmIChub2RlRGF0YS5pc1N0aWNrZXIpIG5ld1N0eWxlQXR0cmlidXRlc1snYm9yZGVyJ10gPSAnaW52aXNpYmxlJ1xyXG4gICAgICAgICAgaWYgKG5vZGVEYXRhLmJvcmRlclN0eWxlKSBuZXdTdHlsZUF0dHJpYnV0ZXNbJ2JvcmRlciddID0gbm9kZURhdGEuYm9yZGVyU3R5bGVcclxuICAgICAgICAgIGlmIChub2RlRGF0YS5zaGFwZSkge1xyXG4gICAgICAgICAgICBuZXdTdHlsZUF0dHJpYnV0ZXMudGV4dEFsaWduID0gJ2NlbnRlcidcclxuICAgICAgICAgICAgbmV3U3R5bGVBdHRyaWJ1dGVzLnNoYXBlID0gbm9kZURhdGEuc2hhcGVcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXdTdHlsZUF0dHJpYnV0ZXM/LnNoYXBlID09PSAnY2VudGVyZWQtcmVjdGFuZ2xlJykgZGVsZXRlIG5ld1N0eWxlQXR0cmlidXRlcy5zaGFwZVxyXG4gICAgICAgICAgICBpZiAobmV3U3R5bGVBdHRyaWJ1dGVzPy5zaGFwZSA9PT0gJ292YWwnKSBuZXdTdHlsZUF0dHJpYnV0ZXMuc2hhcGUgPSAncGlsbCdcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkZWxldGUgbm9kZURhdGEuaXNTdGlja2VyXHJcbiAgICAgICAgICBkZWxldGUgbm9kZURhdGEuYm9yZGVyU3R5bGVcclxuICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5zaGFwZVxyXG5cclxuICAgICAgICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgIC4uLm5vZGVEYXRhLFxyXG4gICAgICAgICAgICBzdHlsZUF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAuLi5ub2RlRGF0YS5zdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICAgICAgLi4ubmV3U3R5bGVBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgY2FudmFzLmVkZ2VzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcblxyXG4gICAgICAgICAgY29uc3QgbmV3U3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSA9IHt9XHJcblxyXG4gICAgICAgICAgaWYgKGVkZ2VEYXRhLmVkZ2VTdHlsZSkgbmV3U3R5bGVBdHRyaWJ1dGVzLmVkZ2UgPSBlZGdlRGF0YS5lZGdlU3R5bGVcclxuICAgICAgICAgIGlmIChlZGdlRGF0YS5lZGdlUGF0aFJvdXRlKSBuZXdTdHlsZUF0dHJpYnV0ZXMucGF0aGZpbmRpbmdNZXRob2QgPSBlZGdlRGF0YS5lZGdlUGF0aFJvdXRlXHJcblxyXG4gICAgICAgICAgZGVsZXRlIGVkZ2VEYXRhLmVkZ2VTdHlsZVxyXG4gICAgICAgICAgZGVsZXRlIGVkZ2VEYXRhLmVkZ2VQYXRoUm91dGVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUFpQzs7O0FDQTFCLFNBQVMsT0FBTyxLQUFLLFdBQVc7QUFDbkMsUUFBTSxXQUFXLE9BQU8sS0FBSyxTQUFTLEVBQUUsSUFBSSxTQUFPLFFBQVEsS0FBSyxLQUFLLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFDcEYsU0FBTyxTQUFTLFdBQVcsSUFBSSxTQUFTLENBQUMsSUFBSSxXQUFZO0FBQUUsYUFBUyxRQUFRLE9BQUssRUFBRSxDQUFDO0FBQUEsRUFBRztBQUMzRjtBQUNBLFNBQVMsUUFBUSxLQUFLLFFBQVEsZUFBZTtBQUN6QyxRQUFNLFdBQVcsSUFBSSxNQUFNLEdBQUcsU0FBUyxJQUFJLGVBQWUsTUFBTTtBQUNoRSxNQUFJLFVBQVUsY0FBYyxRQUFRO0FBR3BDLE1BQUk7QUFDQSxXQUFPLGVBQWUsU0FBUyxRQUFRO0FBQzNDLFNBQU8sZUFBZSxTQUFTLE9BQU87QUFDdEMsTUFBSSxNQUFNLElBQUk7QUFFZCxTQUFPO0FBQ1AsV0FBUyxXQUFXLE1BQU07QUFFdEIsUUFBSSxZQUFZLFlBQVksSUFBSSxNQUFNLE1BQU07QUFDeEMsYUFBTztBQUNYLFdBQU8sUUFBUSxNQUFNLE1BQU0sSUFBSTtBQUFBLEVBQ25DO0FBQ0EsV0FBUyxTQUFTO0FBRWQsUUFBSSxJQUFJLE1BQU0sTUFBTSxTQUFTO0FBQ3pCLFVBQUk7QUFDQSxZQUFJLE1BQU0sSUFBSTtBQUFBO0FBRWQsZUFBTyxJQUFJLE1BQU07QUFBQSxJQUN6QjtBQUNBLFFBQUksWUFBWTtBQUNaO0FBRUosY0FBVTtBQUNWLFdBQU8sZUFBZSxTQUFTLFlBQVksUUFBUTtBQUFBLEVBQ3ZEO0FBQ0o7OztBQ2hDQSxJQUFxQixjQUFyQixNQUFpQztBQUFBLEVBQy9CLE9BQU8sMkJBQThCLFFBQWdCLFdBQThCLFdBQWdGO0FBQ2pLLFdBQU8sSUFBSSxRQUFRLENBQUMsWUFBWTtBQUM5QixZQUFNLFdBQVcsTUFBTTtBQUNyQixjQUFNLFNBQVMsVUFBVTtBQUN6QixZQUFJLENBQUM7QUFBUSxpQkFBTztBQUVwQixjQUFNLGNBQWMsT0FBTyxPQUFPLFlBQVksV0FBVyxTQUFTO0FBQ2xFLGVBQU8sU0FBUyxXQUFXO0FBRTNCLGVBQU87QUFBQSxNQUNUO0FBRUEsWUFBTSxTQUFTLFNBQVM7QUFDeEIsVUFBSSxRQUFRO0FBQ1YsZ0JBQVEsTUFBTTtBQUNkO0FBQUEsTUFDRjtBQUVBLFlBQU0sV0FBVyxPQUFPLElBQUksVUFBVSxHQUFHLGlCQUFpQixNQUFNO0FBQzlELGNBQU1DLFVBQVMsU0FBUztBQUV4QixZQUFJQSxTQUFRO0FBQ1YsaUJBQU8sSUFBSSxVQUFVLE9BQU8sUUFBUTtBQUNwQyxrQkFBUUEsT0FBTTtBQUFBLFFBQ2hCO0FBQUEsTUFDRixDQUFDO0FBRUQsYUFBTyxjQUFjLFFBQVE7QUFBQSxJQUMvQixDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRUEsT0FBTyxxQkFBd0IsUUFBZ0IsUUFBVyxXQUEwRTtBQUNsSSxVQUFNLGNBQWMsT0FBUSxPQUFlLFlBQVksV0FBVyxTQUFTO0FBQzNFLFdBQU8sU0FBUyxXQUFXO0FBQUEsRUFDN0I7QUFBQSxFQUVBLE9BQU8sb0JBQXVCLFFBQWdCLFFBQVcsV0FBMEU7QUFDakksVUFBTSxjQUFjLE9BQU8sUUFBZSxTQUFTO0FBQ25ELFdBQU8sU0FBUyxXQUFXO0FBQUEsRUFDN0I7QUFDRjs7O0FDNUNBLElBQU0sc0JBQXNCO0FBRXJCLElBQU0sY0FBYztBQUFBLEVBQ3pCLGVBQWUsR0FBRyxtQkFBbUI7QUFBQSxFQUNyQyxpQkFBaUI7QUFBQSxJQUNmLFFBQVEsR0FBRyxtQkFBbUI7QUFBQSxJQUM5QixPQUFPLEdBQUcsbUJBQW1CO0FBQUEsRUFDL0I7QUFBQSxFQUNBLFdBQVcsR0FBRyxtQkFBbUI7QUFBQSxFQUNqQyxhQUFhLEdBQUcsbUJBQW1CO0FBQUEsRUFDbkMsc0JBQXNCLEdBQUcsbUJBQW1CO0FBQUEsRUFDNUMsYUFBYSxHQUFHLG1CQUFtQjtBQUFBLEVBQ25DLGFBQWEsR0FBRyxtQkFBbUI7QUFBQSxFQUNuQyxXQUFXLEdBQUcsbUJBQW1CO0FBQUEsRUFDakMsV0FBVyxHQUFHLG1CQUFtQjtBQUFBLEVBQ2pDLGFBQWEsR0FBRyxtQkFBbUI7QUFBQSxFQUNuQyxhQUFhLEdBQUcsbUJBQW1CO0FBQUEsRUFDbkMsYUFBYSxHQUFHLG1CQUFtQjtBQUFBLEVBQ25DLGFBQWEsR0FBRyxtQkFBbUI7QUFBQSxFQUNuQyxtQkFBbUIsR0FBRyxtQkFBbUI7QUFBQSxFQUN6QyxxQkFBcUIsR0FBRyxtQkFBbUI7QUFBQSxFQUMzQywwQkFBMEIsR0FBRyxtQkFBbUI7QUFBQSxFQUNoRCxrQkFBa0IsR0FBRyxtQkFBbUI7QUFBQSxFQUN4QyxZQUFZO0FBQUEsSUFDVixRQUFRLEdBQUcsbUJBQW1CO0FBQUEsSUFDOUIsT0FBTyxHQUFHLG1CQUFtQjtBQUFBLEVBQy9CO0FBQUEsRUFDQSxrQkFBa0IsR0FBRyxtQkFBbUI7QUFBQSxFQUN4QyxpQkFBaUIsR0FBRyxtQkFBbUI7QUFBQSxFQUN2QyxNQUFNLEdBQUcsbUJBQW1CO0FBQUEsRUFDNUIsTUFBTSxHQUFHLG1CQUFtQjtBQUFBLEVBQzVCLGlCQUFpQixHQUFHLG1CQUFtQjtBQUFBLEVBQ3ZDLGVBQWUsR0FBRyxtQkFBbUI7QUFBQSxFQUNyQyxVQUFVLEdBQUcsbUJBQW1CO0FBQUEsRUFDaEMsYUFBYTtBQUFBLElBQ1gsUUFBUSxHQUFHLG1CQUFtQjtBQUFBLElBQzlCLE9BQU8sR0FBRyxtQkFBbUI7QUFBQSxFQUMvQjtBQUNGOzs7QUNyQ0EsSUFBTSxvQkFBb0I7QUFDMUIsSUFBTSwwQkFBMEI7QUFFaEMsSUFBTSxRQUFRO0FBQUEsRUFDVixPQUFPLENBQUMsU0FBUztBQUNiLFdBQU8sT0FBTyxJQUFJO0FBQ2xCLFFBQUk7QUFDQSxhQUFPLEtBQUssTUFBTSxJQUFJO0FBQUEsSUFDMUIsU0FDTTtBQUNGLGFBQU8sS0FBSyxNQUFNLEtBQUssUUFBUSxtQkFBbUIsSUFBSSxFQUFFLFFBQVEseUJBQXlCLElBQUksQ0FBQztBQUFBLElBQ2xHO0FBQUEsRUFDSjtBQUNKO0FBRUEsSUFBTyxlQUFROzs7QUNSZixJQUFxQixnQkFBckIsTUFBbUM7QUFBQSxFQUdqQyxZQUFZLFFBQThCO0FBQ3hDLFNBQUssU0FBUztBQUNkLFNBQUssYUFBYTtBQUFBLEVBQ3BCO0FBQUEsRUFFQSxNQUFjLGVBQWU7QUFoQi9CO0FBaUJJLFVBQU0sT0FBTztBQUdiLFVBQU0sY0FDSixzQkFBSyxPQUFPLElBQUksVUFBVSxnQkFBZ0IsUUFBUSxNQUFsRCxtQkFBcUQsWUFBckQsbUJBQThELFNBQTlELFlBQ0EsTUFBTSxJQUFJLFFBQW9CLENBQUMsWUFBWTtBQUV6QyxZQUFNLFlBQVksT0FBTyxLQUFLLE9BQU8sSUFBSSxnQkFBZ0IsUUFBUSxPQUFPLE9BQU87QUFBQSxRQUM3RSxRQUFRLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDN0MsZ0JBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFFdEMsa0JBQVEsTUFBTTtBQUNkLG9CQUFVO0FBRVYsaUJBQU87QUFBQSxRQUNUO0FBQUEsTUFDRixDQUFDO0FBQ0QsV0FBSyxPQUFPLFNBQVMsU0FBUztBQUFBLElBQ2hDLENBQUM7QUFJSCxnQkFBWSxxQkFBcUIsS0FBSyxRQUFRLFlBQVk7QUFBQSxNQUN4RCxhQUFhLENBQUMsVUFBZSxZQUFhLE9BQVk7QUF4QzVELFlBQUFDO0FBeUNRLGNBQU0sYUFBYSxLQUFLLE9BQU8sUUFBUTtBQUN2QyxtQkFBVyxZQUFXQSxNQUFBLEtBQUssT0FBTyxhQUFaLE9BQUFBLE1BQXdCLENBQUM7QUFFL0MsZUFBTyxLQUFLLFVBQVUsWUFBWSxNQUFNLENBQUM7QUFBQSxNQUMzQztBQUFBLE1BQ0EsYUFBYSxDQUFDLFNBQWMsU0FBVSxTQUFpQixNQUFXO0FBQ2hFLFlBQUksWUFBWSxTQUFTLEtBQUssT0FBTztBQUNyQyxZQUFJO0FBR0osWUFBSTtBQUFFLHVCQUFhLEtBQUssTUFBTSxTQUFTO0FBQUEsUUFBRSxTQUNsQyxHQUFHO0FBRVIsZUFBSyxPQUFPLG1CQUFtQixLQUFLLEtBQUssTUFBTSxJQUFJO0FBR25ELHVCQUFhLGFBQU0sTUFBTSxTQUFTO0FBQ2xDLHNCQUFZLEtBQUssVUFBVSxZQUFZLE1BQU0sQ0FBQztBQUFBLFFBQ2hEO0FBRUEsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLFdBQVcsR0FBRyxJQUFJO0FBRWpELFlBQUk7QUFBRSxlQUFLLE9BQU8sV0FBVyxXQUFXO0FBQUEsUUFBUyxTQUMxQyxJQUFJO0FBQUUsZUFBSyxPQUFPLFdBQVcsQ0FBQztBQUFBLFFBQUU7QUFFdkMsYUFBSyxzQkFBc0IsWUFBWSxlQUFlLEtBQUssTUFBTTtBQUVqRSxlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0YsQ0FBQztBQUdELGdCQUFZLHFCQUFxQixLQUFLLFFBQVEsV0FBVyxRQUFRO0FBQUEsTUFDL0QscUJBQXFCLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDMUQsYUFBSyxzQkFBc0IsWUFBWSxnQkFBZ0IsUUFBUSxJQUFJO0FBQ25FLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxnQkFBZ0IsT0FBTyxJQUFJO0FBQ2xFLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxXQUFXLENBQUMsU0FBYyxTQUFVLE1BQWtCO0FBQ3BELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQ25DLGFBQUssc0JBQXNCLFlBQVksV0FBVyxNQUFNLElBQUk7QUFDNUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGVBQWUsQ0FBQyxTQUFjLFNBQVUsT0FBbUI7QUFDekQsY0FBTSxpQkFBaUIsRUFBRSxPQUFPLE1BQU07QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sT0FBTyxjQUFjO0FBQy9FLFlBQUksQ0FBQyxlQUFlO0FBQU8sZUFBSyxLQUFLLE1BQU0sS0FBSztBQUFBLE1BQ2xEO0FBQUEsTUFDQSxhQUFhLENBQUMsU0FBYyxTQUFVLFVBQW1CO0FBQ3ZELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxRQUFRO0FBQ3ZDLGFBQUssc0JBQXNCLFlBQVksc0JBQXNCLE1BQU0sUUFBUTtBQUMzRSxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0Esb0JBQW9CLENBQUMsU0FBYyxTQUFVLE1BQVk7QUFDdkQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDbkMsYUFBSyxzQkFBc0IsWUFBWSwwQkFBMEIsTUFBTSxNQUFNLE1BQU07QUFDbkYsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGlCQUFpQixDQUFDLFNBQWMsU0FBVSxRQUFvQjtBQUM1RCxjQUFNLGVBQWUsSUFBSSxJQUFJLEtBQUssU0FBUztBQUMzQyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sTUFBTTtBQUNyQyxhQUFLLHNCQUFzQixZQUFZLGtCQUFrQixNQUFNLGNBQWUsQ0FBQ0MsWUFBdUIsS0FBSyxLQUFLLE1BQU1BLE9BQU0sQ0FBRTtBQUM5SCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsZ0JBQWdCLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDckQsY0FBTSxPQUFPLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUNwQyxhQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxJQUFJO0FBQzlELGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxnQkFBZ0IsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUNyRCxjQUFNLE9BQU8sS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3BDLGFBQUssc0JBQXNCLFlBQVksYUFBYSxNQUFNLElBQUk7QUFDOUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGlCQUFpQixDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ3RELGNBQU0sUUFBUSxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDckMsY0FBTSxRQUFRLENBQUMsU0FBcUIsS0FBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSSxDQUFDO0FBQ25HLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxpQkFBaUIsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUN0RCxjQUFNLE9BQU8sS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3BDLGFBQUssc0JBQXNCLFlBQVksYUFBYSxNQUFNLElBQUk7QUFDOUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGdCQUFnQixDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ3JELGNBQU0sT0FBTyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDcEMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSTtBQUM5RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsU0FBUyxDQUFDLFNBQWMsU0FBVSxNQUFrQjtBQUNsRCxhQUFLLFVBQVUsSUFBSTtBQUNuQixlQUFPLEtBQUssS0FBSyxNQUFNLElBQUk7QUFBQSxNQUM3QjtBQUFBLE1BQ0EsU0FBUyxDQUFDLFNBQWMsU0FBVSxNQUFrQjtBQUNsRCxhQUFLLFVBQVUsSUFBSTtBQUNuQixZQUFJLENBQUMsS0FBSztBQUFpQixlQUFLLHNCQUFzQixZQUFZLGFBQWEsTUFBTSxJQUFJO0FBQ3pGLGVBQU8sS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUFBLE1BQzdCO0FBQUEsTUFDQSxZQUFZLENBQUMsU0FBYyxTQUFVLE1BQWtCO0FBQ3JELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQ25DLGFBQUssc0JBQXNCLFlBQVksYUFBYSxNQUFNLElBQUk7QUFDOUQsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFlBQVksQ0FBQyxTQUFjLFNBQVUsTUFBa0I7QUFDckQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDbkMsYUFBSyxzQkFBc0IsWUFBWSxhQUFhLE1BQU0sSUFBSTtBQUM5RCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsWUFBWSxDQUFDLFNBQWMsU0FBVSxNQUFZO0FBQy9DLGFBQUssc0JBQXNCLFlBQVksV0FBVyxRQUFRLE1BQU0sSUFBSTtBQUNwRSxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUNuQyxhQUFLLHNCQUFzQixZQUFZLFdBQVcsT0FBTyxNQUFNLElBQUk7QUFDbkUsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLGFBQWEsQ0FBQyxTQUFjLFNBQVUsVUFBbUI7QUFDdkQsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLFFBQVE7QUFDdkMsYUFBSyxzQkFBc0IsWUFBWSxpQkFBaUIsTUFBTSxRQUFRO0FBQ3RFLGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxNQUFNLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDM0MsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLFdBQVcsS0FBSyxRQUFRLEdBQUcsSUFBSTtBQUNwQyxhQUFLLHNCQUFzQixZQUFZLE1BQU0sSUFBSTtBQUNqRCxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsTUFBTSxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQzNDLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxXQUFXLEtBQUssUUFBUSxHQUFHLElBQUk7QUFDcEMsYUFBSyxzQkFBc0IsWUFBWSxNQUFNLElBQUk7QUFDakQsZUFBTztBQUFBLE1BQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQU9BLFNBQVMsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUM5QyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssc0JBQXNCLFlBQVksZUFBZSxNQUFNLE1BQU07QUFDbEUsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFlBQVksQ0FBQyxTQUFjLFNBQVUsTUFBa0IsYUFBdUIsUUFBa0I7QUFDOUYsY0FBTSxpQkFBaUIsS0FBSyxLQUFLLEtBQUs7QUFDdEMsY0FBTSxVQUFVLENBQUNDLFVBQXFCO0FBRXBDLGNBQUksQ0FBQyxLQUFLLEtBQUssUUFBUSxLQUFLLEtBQUssS0FBSyxTQUFTO0FBQWdCO0FBRS9ELGVBQUssV0FBV0EsT0FBTSxNQUFNLElBQUk7QUFDaEMsZUFBSyxnQ0FBZ0MsSUFBSTtBQUFBLFFBQzNDO0FBRUEsWUFBSSxDQUFDO0FBQVEsZUFBSyxzQkFBc0IsWUFBWSxVQUFVLE1BQU0sTUFBTSxPQUFPO0FBQ2pGLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxNQUFNLFdBQVc7QUFDaEQsYUFBSyxnQ0FBZ0MsSUFBSTtBQUN6QyxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsYUFBYSxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ2xELGFBQUssc0JBQXNCLFlBQVksWUFBWSxRQUFRLElBQUk7QUFDL0QsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLHNCQUFzQixZQUFZLFlBQVksT0FBTyxJQUFJO0FBQzlELGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBR0QsZ0JBQVkscUJBQXFCLEtBQUssUUFBUSxXQUFXLE9BQU8sTUFBTTtBQUFBLE1BQ3BFLFFBQVEsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUM3QyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssc0JBQXNCLFlBQVksa0JBQWtCLEtBQUssTUFBTTtBQUNwRSxhQUFLLEtBQUssSUFBSTtBQUNkLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBR0QsZ0JBQVkscUJBQXFCLEtBQUssUUFBUSxXQUFXLE9BQU8sc0JBQXNCO0FBQUEsTUFDcEYsV0FBVyxDQUFDLFNBQWMsU0FBVSxNQUFrQjtBQUNwRCxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUNuQyxhQUFLLHNCQUFzQixZQUFZLGlCQUFpQixLQUFLLFFBQVEsSUFBSTtBQUN6RSxlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0YsQ0FBQztBQUdELFNBQUssT0FBTyxJQUFJLFVBQVUsaUJBQWlCLENBQUMsU0FBd0I7QUFDbEUsVUFBSSxLQUFLLEtBQUssWUFBWSxNQUFNO0FBQVU7QUFFMUMsWUFBTUMsY0FBYSxLQUFLO0FBRXhCLE1BQUFBLFlBQVcsS0FBSyxZQUFZO0FBQUEsSUFDOUIsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVRLFVBQVUsTUFBa0I7QUFDbEMsVUFBTSxPQUFPO0FBRWIsZ0JBQVksb0JBQW9CLEtBQUssUUFBUSxNQUFNO0FBQUEsTUFDakQsU0FBUyxDQUFDLFNBQWMsU0FBVSxNQUFzQixZQUFzQjtBQUM1RSxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUVuQyxZQUFJLEtBQUssZUFBZSxDQUFDLEtBQUssU0FBUztBQUNyQyxlQUFLLFVBQVU7QUFDZixlQUFLLHNCQUFzQixZQUFZLGFBQWEsS0FBSyxRQUFRLElBQUk7QUFDckUsaUJBQU8sS0FBSztBQUFBLFFBQ2Q7QUFHQSxhQUFLLE9BQU8sT0FBTyxLQUFLLE9BQU8sUUFBUTtBQUN2QyxhQUFLLE9BQU8sS0FBSyxZQUFZO0FBRzdCLFlBQUk7QUFBWSxlQUFLLE9BQU8sWUFBWSxLQUFLLE9BQU8sUUFBUSxDQUFDO0FBRTdELGVBQU87QUFBQSxNQUNUO0FBQUEsTUFDQSxTQUFTLENBQUMsU0FBYyxZQUFhLE1BQVc7QUFDOUMsY0FBTSxTQUFTLEtBQUssS0FBSyxNQUFNLEdBQUcsSUFBSTtBQUN0QyxhQUFLLHNCQUFzQixZQUFZLG1CQUFtQixLQUFLLFFBQVEsTUFBTSxNQUFNO0FBQ25GLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxvQkFBb0IsTUFBTSxNQUFNO0FBQ25DLFdBQUssc0JBQXNCLFlBQVksV0FBVyxLQUFLLFFBQVEsSUFBSTtBQUNuRSxXQUFLLHNCQUFzQixZQUFZLGFBQWEsS0FBSyxRQUFRLElBQUk7QUFBQSxJQUN2RSxDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsVUFBVSxNQUFrQjtBQUNsQyxVQUFNLE9BQU87QUFFYixnQkFBWSxvQkFBb0IsS0FBSyxRQUFRLE1BQU07QUFBQSxNQUNqRCxTQUFTLENBQUMsU0FBYyxTQUFVLE1BQXNCLFlBQXNCO0FBQzVFLGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBRW5DLFlBQUksS0FBSyxlQUFlLENBQUMsS0FBSyxTQUFTO0FBQ3JDLGVBQUssVUFBVTtBQUNmLGVBQUssc0JBQXNCLFlBQVksYUFBYSxLQUFLLFFBQVEsSUFBSTtBQUNyRSxpQkFBTyxLQUFLO0FBQUEsUUFDZDtBQUdBLGFBQUssT0FBTyxPQUFPLEtBQUssT0FBTyxRQUFRO0FBQ3ZDLGFBQUssT0FBTyxLQUFLLFlBQVk7QUFHN0IsWUFBSTtBQUFZLGVBQUssT0FBTyxZQUFZLEtBQUssT0FBTyxRQUFRLENBQUM7QUFFN0QsZUFBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBLFFBQVEsQ0FBQyxTQUFjLFlBQWEsTUFBVztBQUM3QyxjQUFNLFNBQVMsS0FBSyxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQ3RDLGFBQUssc0JBQXNCLFlBQVksYUFBYSxLQUFLLFFBQVEsSUFBSTtBQUNyRSxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0EsV0FBVyxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ2hELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFDdEMsYUFBSyxzQkFBc0IsWUFBWSxxQkFBcUIsS0FBSyxRQUFRLE1BQU0sTUFBTTtBQUNyRixlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssb0JBQW9CLE1BQU0sTUFBTTtBQUNuQyxXQUFLLHNCQUFzQixZQUFZLFdBQVcsS0FBSyxRQUFRLElBQUk7QUFBQSxJQUNyRSxDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsb0JBQW9CLGVBQThCLFNBQXFCO0FBQzdFLFFBQUksY0FBYyxhQUFhO0FBQzdCLGNBQVE7QUFDUjtBQUFBLElBQ0Y7QUFFQSxVQUFNLE9BQU87QUFHYixVQUFNLFlBQVksT0FBTyxlQUFlO0FBQUEsTUFDdEMsWUFBWSxDQUFDLFNBQWMsWUFBYSxNQUFXO0FBQ2pELGNBQU0sU0FBUyxLQUFLLEtBQUssTUFBTSxHQUFHLElBQUk7QUFFdEMsZ0JBQVE7QUFDUixrQkFBVTtBQUVWLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxPQUFPLFNBQVMsU0FBUztBQUFBLEVBQ2hDO0FBQUEsRUFFUSxnQ0FBZ0MsUUFBZ0I7QUFFdEQsV0FBTyxNQUFNLFFBQVEsQ0FBQyxTQUFxQixLQUFLLG9CQUFvQixNQUFNLE1BQU07QUFDOUUsV0FBSyxzQkFBc0IsWUFBWSxhQUFhLEtBQUssUUFBUSxJQUFJO0FBQUEsSUFDdkUsQ0FBQyxDQUFDO0FBR0YsV0FBTyxNQUFNLFFBQVEsQ0FBQyxTQUFxQixLQUFLLG9CQUFvQixNQUFNLE1BQU07QUFDOUUsV0FBSyxzQkFBc0IsWUFBWSxhQUFhLEtBQUssUUFBUSxJQUFJO0FBQUEsSUFDdkUsQ0FBQyxDQUFDO0FBQUEsRUFDSjtBQUFBLEVBRVEsc0JBQXNCLFVBQWtCLE1BQVc7QUFDekQsU0FBSyxPQUFPLElBQUksVUFBVSxRQUFRLE9BQU8sR0FBRyxJQUFJO0FBQUEsRUFDbEQ7QUFDRjs7O0FDNVZBLHNCQUF3QjtBQUV4QixJQUFNLGVBQWU7QUFBQSxFQUNuQixjQUFjO0FBQUEsRUFDZCx1QkFBdUI7QUFBQSxFQUN2Qiw0QkFBNEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU81QixrQkFBa0I7QUFBQSxFQUNsQixrQkFBa0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPbEIsZ0JBQWdCO0FBQUEsRUFDaEIsaUJBQWlCO0FBQUEsRUFDakIsaUJBQWlCO0FBQUEsRUFFakIsY0FBYztBQUFBLEVBQ2QsZUFBZTtBQUFBLEVBQ2YscUJBQXFCO0FBQUEsRUFDckIsb0JBQW9CO0FBQUEsRUFFcEIsa0JBQWtCO0FBQUEsRUFDbEIsMEJBQTBCO0FBQUEsRUFDMUIsdUJBQXVCO0FBQUEsRUFDdkIseUJBQXlCO0FBQUEsRUFDekIsaUJBQWlCO0FBQUEsRUFDakIseUJBQXlCO0FBQUEsRUFDekIsZ0JBQWdCO0FBQUEsRUFDaEIsd0JBQXdCO0FBQUEsRUFFeEIsNkJBQTZCO0FBQUEsRUFDN0IsNkJBQTZCO0FBQy9CO0FBRUEsSUFBcUIsY0FBckIsTUFBaUM7QUFBQSxFQUMvQixPQUFPLFdBQVc7QUFDaEIsZUFBVyxDQUFDLElBQUksR0FBRyxLQUFLLE9BQU8sUUFBUSxZQUFZLEdBQUc7QUFDcEQsbUNBQVEsSUFBSSxHQUFHO0FBQUEsSUFDakI7QUFBQSxFQUNGO0FBQ0Y7OztBQzVDQSxJQUFxQixjQUFyQixNQUFpQztBQUFBLEVBRy9CLFlBQVksUUFBOEI7QUFDeEMsU0FBSyxTQUFTO0FBRWQsU0FBSyxPQUFPLGNBQWMsS0FBSyxPQUFPLElBQUksVUFBVTtBQUFBLE1BQ2xELFlBQVk7QUFBQSxNQUNaLENBQUMsU0FBaUIsVUFBc0IsUUFBUSxNQUFNLHFCQUFjO0FBQUEsSUFDdEUsQ0FBQztBQUVELFNBQUssT0FBTyxjQUFjLEtBQUssT0FBTyxJQUFJLFVBQVU7QUFBQSxNQUNsRCxZQUFZO0FBQUEsTUFDWixDQUFDLFNBQWlCLFVBQXNCLFFBQVEsTUFBTSx1QkFBZ0I7QUFBQSxJQUN4RSxDQUFDO0FBRUQsU0FBSyxPQUFPLGNBQWMsS0FBSyxPQUFPLElBQUksVUFBVTtBQUFBLE1BQ2xELFlBQVk7QUFBQSxNQUNaLENBQUMsU0FBaUIsVUFBc0IsUUFBUSxNQUFNLHFCQUFjO0FBQUEsSUFDdEUsQ0FBQztBQUVELFNBQUssT0FBTyxjQUFjLEtBQUssT0FBTyxJQUFJLFVBQVU7QUFBQSxNQUNsRCxZQUFZO0FBQUEsTUFDWixDQUFDLFNBQWlCLFVBQXNCLFFBQVEsTUFBTSx1QkFBZ0I7QUFBQSxJQUN4RSxDQUFDO0FBQUEsRUFDSDtBQUNGOzs7QUM5QkEsSUFBQUMsbUJBQWtEOzs7QUNlM0MsSUFBTSxnQ0FBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsWUFBWTtBQUFBLElBQ1osT0FBTztBQUFBLElBQ1AsV0FBVyxDQUFDLE1BQU07QUFBQSxJQUNsQixTQUFTO0FBQUEsTUFDUDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxXQUFXLENBQUMsTUFBTTtBQUFBLElBQ2xCLFNBQVM7QUFBQSxNQUNQO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsTUFDUDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBRU8sSUFBTSxnQ0FBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsWUFBWTtBQUFBLElBQ1osT0FBTztBQUFBLElBQ1AsU0FBUztBQUFBLE1BQ1A7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsTUFDUDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9B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bUJBQWtCO0FBQVUsYUFBTztBQUNuRCxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsbUJBQWtDO0FBaEdwQztBQWlHSSxhQUFPLFVBQUsscUJBQXFCLE1BQTFCLG1CQUE2QixXQUFVO0FBQUEsRUFDaEQ7QUFBQSxFQUVBLG1CQUFtQixNQUFjLFNBQWlCO0FBcEdwRDtBQXFHSSxVQUFNLHNCQUFxQixVQUFLLElBQUksZ0JBQWdCLFFBQVEsZUFBZSxNQUFoRCxtQkFBbUQ7QUFDOUUsUUFBSSxDQUFDO0FBQW9CO0FBRXpCLHVCQUFtQixTQUFTLE1BQU0sT0FBTztBQUFBLEVBQzNDO0FBQUE7QUFBQSxFQUdBLGtCQUFrQjtBQUNoQixRQUFJLEtBQUs7QUFBYTtBQUN0QixTQUFLLGNBQWMsSUFBSSxZQUFZLElBQUk7QUFBQSxFQUN6QztBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAicmVzdWx0IiwgIl9hIiwgInVwZGF0ZSIsICJkYXRhIiwgImNhbnZhc1ZpZXciLCAiaW1wb3J0X29ic2lkaWFuIiwgIndpbmRvdyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiX2IiLCAibGVmdFBvc2l0aW9uIiwgInJpZ2h0UG9zaXRpb24iLCAiY2FudmFzIiwgImltcG9ydF9vYnNpZGlhbiIsICJjYW52YXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJub2RlIiwgIl9hIiwgIl9iIiwgIm5vZGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYiIsICJESVJFQ1RJT05TIl0KfQo=
